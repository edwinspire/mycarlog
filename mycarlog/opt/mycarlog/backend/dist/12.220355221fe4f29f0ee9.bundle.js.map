{"version":3,"sources":["webpack://pen_onitoring_ystem/./src/widgets/select_vehicle/select_vehicle.ts"],"names":["SelectVehicle","_dojo_framework_core_WidgetBase__WEBPACK_IMPORTED_MODULE_2__","[object Object]","this","Vehicles","TextSearch","push","Object","_dojo_framework_core_vdom__WEBPACK_IMPORTED_MODULE_1__","setInterval","console","log","length","invalidate","res","fetch","method","body","JSON","stringify","idaccount","localStorage","getItem","Search","headers","Content-Type","status","data","json","Array","isArray","forEach","element","licence_plate","_Menu__WEBPACK_IMPORTED_MODULE_5__","_dojo_widgets_text_input__WEBPACK_IMPORTED_MODULE_3__","label","onChange","val","GetVehicles","tslib__WEBPACK_IMPORTED_MODULE_0__","_dojo_framework_core_decorators_watch__WEBPACK_IMPORTED_MODULE_4__"],"mappings":";;;;;;;;0OAgBe,MAAMA,UAAsBC,EAAA,EAA3CC,kCACUC,KAAAC,SAAkB,GAEjBD,KAAAE,WAAqB,GAE9BH,WAEDC,KAAKC,SAASE,KAAKC,OAAAC,EAAA,EAAAD,CAAE,MAAO,GAAI,CAAC,qBAE9BE,YAAY,KACVC,QAAQC,IAAIR,KAAKC,SAASQ,QAC1BT,KAAKU,cACJ,KAGLX,oBACE,MAAMY,QAAYC,MAAM,YAAa,CACnCC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBC,UAAWC,aAAaC,QAAQ,aAChCC,OAAQpB,KAAKE,aAEfmB,QAAS,CACPC,eAAgB,sBAIpB,GAAkB,KAAdX,EAAIY,OAAe,CACrB,IAAIC,QAAab,EAAIc,OAErBlB,QAAQC,IAAIgB,GACRE,MAAMC,QAAQH,IAChBA,EAAKI,QAASC,IACZtB,QAAQC,IAAIqB,GACZ7B,KAAKC,SAASE,KAAKC,OAAAC,EAAA,EAAAD,CAAE,MAAO,GAAI,CAACyB,EAAQC,mBAK7C9B,KAAKU,cAICX,SACR,OAAOK,OAAAC,EAAA,EAAAD,CAAE,MAAO,GAAI,CAClBA,OAAAC,EAAA,EAAAD,CAAE2B,EAAA,EAAM,IACR3B,OAAAC,EAAA,EAAAD,CACE4B,EAAA,EACA,CACEC,MAAO,SACPC,SAAWC,IACT5B,QAAQC,IAAIO,KAAKC,UAAUmB,IAC3BnC,KAAKE,WAAaiC,EAClBnC,KAAKoC,cACLpC,KAAKU,eAGT,IAEFN,OAAAC,EAAA,EAAAD,CAAE,MAAO,GAAIJ,KAAKC,aAxDbG,OAAAiC,EAAA,EAAAjC,CAAA,CAARA,OAAAkC,EAAA,EAAAlC","file":"12.220355221fe4f29f0ee9.bundle.js","sourcesContent":["import { v, w } from \"@dojo/framework/core/vdom\";\nimport WidgetBase from \"@dojo/framework/core/WidgetBase\";\n// import * as css from '../styles/Profile.m.css';\nimport TextInput from \"@dojo/widgets/text-input\";\n// import Checkbox from '@dojo/widgets/checkbox';\n// import Textarea from '@dojo/widgets/text-area';\n// import SelectFromURL from '.././modules/SelectFromURL';\n// //import Lbox from '.././modules/ListboxUri';\nimport watch from \"@dojo/framework/core/decorators/watch\";\n// import ToolBar from '@dojo/widgets/toolbar';\n// import Icon from '.././Icon/Icon';\n// // // import SBar from '@dojo/widgets/snackbar';\n// import TitlePane from '@dojo/widgets/title-pane';\nimport Menu from \".././Menu\";\n//import { stringify } from \"querystring\";\n\nexport default class SelectVehicle extends WidgetBase {\n  private Vehicles: any[] = [];\n\n  @watch() TextSearch: string = \"\";\n\n  onAttach() {\n\n\tthis.Vehicles.push(v('div', {}, ['Primer registro']));\n\n    setInterval(() => {\n      console.log(this.Vehicles.length);\n      this.invalidate();\n    }, 5000);\n  }\n\n  async GetVehicles() {\n    const res = await fetch(\"/vehicles\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        idaccount: localStorage.getItem(\"idaccount\"),\n        Search: this.TextSearch,\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n\n    if (res.status == 200) {\n      let data = await res.json();\n      //\t\tthis._fetcher = createFetcher(data);\n      console.log(data);\n      if (Array.isArray(data)) {\n        data.forEach((element: any) => {\n          console.log(element);\n          this.Vehicles.push(v(\"div\", {}, [element.licence_plate]));\n          //this.invalidate();\n        });\n      }\n\n      this.invalidate();\n    }\n  }\n\n  protected render() {\n    return v(\"div\", {}, [\n      w(Menu, {}),\n      w(\n        TextInput,\n        {\n          label: \"Buscar\",\n          onChange: (val) => {\n            console.log(JSON.stringify(val));\n            this.TextSearch = val as string;\n            this.GetVehicles();\n            this.invalidate();\n          },\n        },\n        []\n      ),\n      v(\"div\", {}, this.Vehicles),\n    ]);\n  }\n}\n"],"sourceRoot":""}