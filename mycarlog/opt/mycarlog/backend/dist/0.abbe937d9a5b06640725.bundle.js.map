{"version":3,"sources":["webpack://pen_onitoring_ystem/./node_modules/@dojo/widgets/theme/grid.m.css.js","webpack://pen_onitoring_ystem/./node_modules/@dojo/widgets/grid/styles/grid.m.css.js","webpack://pen_onitoring_ystem/process.ts","webpack://pen_onitoring_ystem/processes.ts","webpack://pen_onitoring_ystem/Drag.ts","webpack://pen_onitoring_ystem/Header.ts","webpack://pen_onitoring_ystem/PlaceholderRow.ts","webpack://pen_onitoring_ystem/Cell.ts","webpack://pen_onitoring_ystem/Row.ts","webpack://pen_onitoring_ystem/Body.ts","webpack://pen_onitoring_ystem/Footer.ts","webpack://pen_onitoring_ystem/PaginatedFooter.ts","webpack://pen_onitoring_ystem/PaginatedBody.ts","webpack://pen_onitoring_ystem/index.ts","webpack://pen_onitoring_ystem/wrapper.ts","webpack://pen_onitoring_ystem/./src/widgets/contacts/Contacts.ts","webpack://pen_onitoring_ystem/./src/widgets/Contacts.ts","webpack://pen_onitoring_ystem/utils.ts","webpack://pen_onitoring_ystem/./node_modules/@dojo/widgets/grid/styles/body.m.css.js","webpack://pen_onitoring_ystem/./node_modules/@dojo/widgets/theme/grid-body.m.css.js","webpack://pen_onitoring_ystem/./node_modules/@dojo/widgets/theme/grid-header.m.css.js","webpack://pen_onitoring_ystem/./node_modules/@dojo/widgets/grid/styles/header.m.css.js","webpack://pen_onitoring_ystem/./node_modules/@dojo/widgets/theme/grid-placeholder-row.m.css.js","webpack://pen_onitoring_ystem/./node_modules/@dojo/widgets/grid/styles/cell.m.css.js","webpack://pen_onitoring_ystem/./node_modules/@dojo/widgets/theme/grid-cell.m.css.js","webpack://pen_onitoring_ystem/./node_modules/@dojo/widgets/grid/styles/row.m.css.js","webpack://pen_onitoring_ystem/./node_modules/@dojo/widgets/theme/grid-row.m.css.js","webpack://pen_onitoring_ystem/./node_modules/@dojo/widgets/theme/grid-footer.m.css.js","webpack://pen_onitoring_ystem/./node_modules/@dojo/widgets/grid/styles/paginated-footer.m.css.js","webpack://pen_onitoring_ystem/./node_modules/@dojo/widgets/theme/grid-paginated-footer.m.css.js"],"names":["__webpack_require__","module","exports"," _key","root","header","filterGroup","rootFixed","headerFixed","processMap","Map","valueSymbol","Symbol","proxyError","processExecutor","id","commands","store","before","after","transformer","apply","get","path","at","executor","process","payload","async","executorPayload","operations","commandsCopy","undoOperations","command","shift","error","result","createProxy","proxies","proxied","proxyOperations","createHandler","partialPath","[object Object]","obj","prop","fullPath","stringPath","value","hasOwnProperty","proxiedValue","has","Array","isArray","slice","Object","assign","Proxy","set","removeProxies","newValue","keys","i","length","push","state_operations","deleteProperty","proxy","results","resolvedResults","map","commandFunction","state","Error","shim_Promise","then","some","Promise","all","invalidate","e","message","resolve","createProcess","callbacks","callback","reduce","nextCallback","processCallback","previousCallback","previousBefore","previousAfter","combineCallbacks","undefined","commandFactory","pageChangeCommand","page","preFetcherCommand","fetchedPages","indexOf","fetcherCommand","fetcher","pageSize","tslib","sortOptions","filterOptions","sort","filter","data","meta","total","preSortCommand","columnId","direction","preFilterCommand","sortCommand","sortForFirstPage","options","previousPage","currentPage","err","filterCommand","currentFilters","preUpdateCommand","updater","rowNumber","item","updatedItem","updaterCommand","previousItem","selectionCommand","index","type","currentSelection","existingIndex","array","idx","splice","clearSelectionCommand","updaterProcess","fetcherProcess","filterProcess","sortProcess","selectionProcess","pageChangeProcess","emptyResults","freeze","delta","x","y","isDragging","getPositionMatrix","event","client","clientX","clientY","offset","offsetX","offsetY","pageX","pageY","screen","screenX","screenY","getDelta","start","current","controller","this","_nodeMap","WeakMap","_dragging","_onDragStart","isPrimary","dragResults","button","_getData","target","last","util","preventDefault","stopPropagation","_onDrag","_onDragStop","win","global","window","addEventListener","parentElement","node","createNodeData","style","touchAction","setAttribute","initNode","object","meta_Drag","Base","_boundInvalidate","bind","key","getNode","Header_Header","Themed","WidgetBase","_sortRenderer","column","sorter","theme","classes","properties","vdom","grid_header_m_css","onclick","icon","altText","_getColumnTitle","_filterRenderer","columnConfig","filterValue","doFilter","title","text_input","extraClasses","label","labelHidden","onInput","filterer","sortRenderer","filterRenderer","columnWidths","onColumnResize","rowWidth","styles","width","header_m_css","role","headerProperties","isSorted","isSortedAsc","Boolean","sortable","_sortColumn","resizable","aria-sort","flex","filterable","grid_Header","PlaceholderRow_PlaceholderRow","grid_placeholder_row_m_css","grid_PlaceholderRow","Cell_Cell","Focus","_editing","_editingValue","_idBase","_onEdit","editable","_callFocus","rawValue","_focusKey","focus","_onSave","common_util","Enter","Escape","ondblclick","grid_cell_m_css","cell_m_css","input","shouldFocus","_onInput","onBlur","_onBlur","onKeyDown","_onKeyDown","renderContent","widgets_button","aria","describedby","onClick","grid_Cell","Row_Row","onRowSelect","ctrlKey","metaKey","selected","columns","config","renderer","updatedValue","grid_row_m_css","row_m_css","_onRowSelect","aria-rowindex","grid_Row","defaultPlaceholderRowRenderer","Body_Body","_start","_end","_resetScroll","Math","max","ceil","pageItemNumber","totalRows","onScroll","scrollTop","scrollLeft","topRow","round","_rowHeight","bottomRow","_rowsInView","_renderPageSize","min","end","pages","placeholderRowRenderer","pageChange","selectedRows","startPage","endPage","endData","rows","_updater","height","dimensions","dnode","r","div","document","createElement","position","body","appendChild","mount","domNode","sync","getBoundingClientRect","removeChild","offscreen","_renderRows","topPaddingHeight","bottomPaddingHeight","containerProperties","grid_body_m_css","body_m_css","onscroll","_onScroll","diffProperty","diff","grid_Body","Footer_Footer","footer","grid_footer_m_css","grid_Footer","PaginatedFooter_PaginatedFooter","onPageChange","active","disabled","aria-current","aria-label","grid_paginated_footer_m_css","totalPages","_renderPageControl","aria-hidden","paginated_footer_m_css","from","to","controls","_renderPaginationControls","grid_PaginatedFooter","PaginatedBody_defaultPlaceholderRowRenderer","PaginatedBody_PaginatedBody","pageNumber","rowCount","grid_PaginatedBody","defaultGridMeta","isSorting","editedRow","selection","grid_Grid","super","_store","Store","_scrollLeft","_pageSize","_gridWidth","_handle","onChange","previous","storeId","remove","headerHeight","Dimensions","headerWrapper","footerHeight","headerWidth","size","bodyHeight","bodyWidth","_columnWidths","currentColumnWidth","_getProperties","selectedIndexes","items","selectedIndex","floor","itemIndex","pagination","customRenderers","hasFilters","hasResizableColumns","_getBodyDimensions","Resize","sizes","grid_m_css","styles_grid_m_css","aria-rowcount","row","_sorter","_filterer","_onColumnResize","_fetcher","_selection","_pageChange","__webpack_exports__","d","wrapper","_global__WEBPACK_IMPORTED_MODULE_0__","nameOnGlobal","constructor","Contacts_Contacts","res","fetch","method","JSON","stringify","idaccount","localStorage","getItem","headers","Content-Type","json","console","log","utils","toolbar","heading","collapseWidth","Icon","ShowLabel","location","href","grid","idcontact","rowkey","factory","Profile_m","Menu","url","createFetcher","tslib__WEBPACK_IMPORTED_MODULE_0__","temp","createFetcherResult","a","b","left","right","match","forEach","toLowerCase","cell","sorted","desc","asc","cellFixed","resize","loading","spin","edit","containerFixed","detailsFixed","paginationListFixed","itemFixed","moreFixed","pageNavFixed","details","paginationList","more","pageNav"],"mappings":"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","file":"0.abbe937d9a5b06640725.bundle.js","sourcesContent":["require('B:/Documentos/Desarrollo/mycarlog/mycarlog/opt/mycarlog/frontend/node_modules/@dojo/widgets/theme/grid.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid\",\"root\":\"grid-m__root___v2E_\",\"header\":\"grid-m__header__1tmI3\",\"filterGroup\":\"grid-m__filterGroup__2dOAI\"};;","require('B:/Documentos/Desarrollo/mycarlog/mycarlog/opt/mycarlog/frontend/node_modules/@dojo/widgets/grid/styles/grid.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid\",\"rootFixed\":\"grid-m__rootFixed__2GZXD\",\"headerFixed\":\"grid-m__headerFixed__2X7jF\"};;","import { isThenable } from '../shim/Promise';\nimport { PatchOperation } from './state/Patch';\nimport { replace, remove } from './state/operations';\nimport { Path, State, Store } from './Store';\nimport Map from '../shim/Map';\nimport has from '../core/has';\n\n/**\n * Default Payload interface\n */\nexport interface DefaultPayload {\n\t[index: string]: any;\n}\n\n/**\n * The arguments passed to a `Command`\n */\nexport interface CommandRequest<T = any, P extends object = DefaultPayload> extends State<T> {\n\tpayload: P;\n\tstate: T;\n}\n\n/**\n * A command factory interface. Returns the passed command. This provides a way to automatically infer and/or\n * verify the type of multiple commands without explicitly specifying the generic for each command\n */\nexport interface CommandFactory<T = any, P extends object = DefaultPayload> {\n\t<R extends object = P>(command: AsyncCommandWithOps<T, R>): AsyncCommandWithOps<T, R>;\n\t<R extends object = P>(command: SyncCommandWithOps<T, R>): SyncCommandWithOps<T, R>;\n\t<R extends object = P>(command: AsyncCommand<T, R>): AsyncCommand<T, R>;\n\t<R extends object = P>(command: SyncCommand<T, R>): SyncCommand<T, R>;\n}\n\nexport interface AsyncCommandWithOps<T = any, P extends object = DefaultPayload> {\n\t(request: CommandRequest<T, P>): Promise<PatchOperation<T>[]>;\n}\n\nexport interface SyncCommandWithOps<T = any, P extends object = DefaultPayload> {\n\t(request: CommandRequest<T, P>): PatchOperation<T>[];\n}\n\nexport interface AsyncCommand<T = any, P extends object = DefaultPayload> {\n\t(request: CommandRequest<T, P>): Promise<void>;\n}\n\nexport interface SyncCommand<T = any, P extends object = DefaultPayload> {\n\t(request: CommandRequest<T, P>): void;\n}\n\n/**\n * Command that returns patch operations based on the command request\n */\nexport type Command<T = any, P extends object = DefaultPayload> =\n\t| SyncCommand<T, P>\n\t| AsyncCommand<T, P>\n\t| SyncCommandWithOps<T, P>\n\t| AsyncCommandWithOps<T, P>;\n\n/**\n * Transformer function\n */\nexport interface Transformer<P extends object = DefaultPayload, R extends object = DefaultPayload> {\n\t(payload: R): P;\n}\n\n/**\n * A process that returns an executor using a Store and Transformer\n */\nexport interface Process<T = any, P extends object = DefaultPayload> {\n\t<R extends object = DefaultPayload>(store: Store<T>, transformer: Transformer<P, R>): ProcessExecutor<T, P, R>;\n\t(store: Store<T>): ProcessExecutor<T, P, P>;\n}\n\n/**\n * Represents an error from a ProcessExecutor\n */\nexport interface ProcessError<T = any> {\n\terror: Error | null;\n\tcommand?: Command<T, any>[] | Command<T, any>;\n}\n\nexport interface ProcessResultExecutor<T = any> {\n\t<P extends object = DefaultPayload, R extends object = DefaultPayload>(\n\t\tprocess: Process<T, P>,\n\t\tpayload: R,\n\t\ttransformer: Transformer<P, R>\n\t): Promise<ProcessResult<T, P> | ProcessError<T>>;\n\t<P extends object = object>(process: Process<T, P>, payload: P): Promise<ProcessResult<T, P> | ProcessError<T>>;\n}\n\n/**\n * Represents a successful result from a ProcessExecutor\n */\nexport interface ProcessResult<T = any, P extends object = DefaultPayload> extends State<T> {\n\texecutor: ProcessResultExecutor<T>;\n\tstore: Store<T>;\n\toperations: PatchOperation<T>[];\n\tundoOperations: PatchOperation<T>[];\n\tapply: (operations: PatchOperation<T>[], invalidate?: boolean) => PatchOperation<T>[];\n\tpayload: P;\n\tid: string;\n\terror?: ProcessError<T> | null;\n}\n\n/**\n * Runs a process for the given arguments.\n */\nexport interface ProcessExecutor<T = any, P extends object = DefaultPayload, R extends object = DefaultPayload> {\n\t(payload: R): Promise<ProcessResult<T, P>>;\n}\n\nexport interface ProcessCallback<T = any, P extends object = DefaultPayload> {\n\t(): {\n\t\tbefore?: ProcessCallbackBefore<T, P>;\n\t\tafter?: ProcessCallbackAfter<T>;\n\t};\n}\n\n/**\n * Callback for a process, returns an error as the first argument\n */\nexport interface ProcessCallbackAfter<T = any> {\n\t(error: ProcessError<T> | null, result: ProcessResult<T>): void;\n}\n\nexport interface ProcessCallbackBefore<T = any, P extends object = DefaultPayload> {\n\t(payload: P, store: Store<T>, id: string): void | Promise<void>;\n}\n\n/**\n * Function for undoing operations\n */\nexport interface Undo {\n\t(): void;\n}\n\n/**\n * ProcessCallbackDecorator callback\n */\ninterface ProcessCallbackDecorator {\n\t(callback?: ProcessCallback): ProcessCallback;\n}\n\n/**\n * CreateProcess factory interface\n */\nexport interface CreateProcess<T = any, P extends object = DefaultPayload> {\n\t(id: string, commands: (Command<T, P>[] | Command<T, P>)[], callback?: ProcessCallback<T>): Process<T, P>;\n}\n\n/**\n * Creates a command factory with the specified type\n */\nexport function createCommandFactory<T, P extends object = DefaultPayload>(): CommandFactory<T, P> {\n\tfunction commandFactory<R extends object = P>(command: AsyncCommand<T, R>): AsyncCommand<T, R>;\n\tfunction commandFactory<R extends object = P>(command: SyncCommand<T, R>): SyncCommand<T, R>;\n\tfunction commandFactory<R extends object = P>(command: AsyncCommandWithOps<T, R>): AsyncCommandWithOps<T, R>;\n\tfunction commandFactory<R extends object = P>(command: SyncCommandWithOps<T, R>): SyncCommandWithOps<T, R>;\n\tfunction commandFactory<R extends object = P>(command: Command<T, R>): Command<T, R> {\n\t\treturn command;\n\t}\n\treturn commandFactory;\n}\n\n/**\n * Commands that can be passed to a process\n */\nexport type Commands<T = any, P extends object = DefaultPayload> = (Command<T, P>[] | Command<T, P>)[];\n\nconst processMap = new Map();\nconst valueSymbol = Symbol('value');\n\nexport function isStateProxy(value: any) {\n\tif (typeof value !== 'object' || value === null) {\n\t\treturn false;\n\t}\n\n\treturn Boolean(value[valueSymbol]);\n}\n\nexport function getProcess(id: string) {\n\treturn processMap.get(id);\n}\n\nconst proxyError = 'State updates are not available on legacy browsers';\n\nfunction removeProxies(value: any) {\n\tif (typeof value === 'object' && value !== null) {\n\t\tif (value[valueSymbol]) {\n\t\t\tvalue = value[valueSymbol];\n\t\t}\n\n\t\tconst newValue: typeof value = Array.isArray(value) ? [] : {};\n\t\tconst keys = Object.keys(value);\n\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\tnewValue[keys[i]] = removeProxies(value[keys[i]]);\n\t\t}\n\n\t\tvalue = newValue;\n\t}\n\n\treturn value;\n}\n\nexport function processExecutor<T = any, P extends object = DefaultPayload>(\n\tid: string,\n\tcommands: Commands<T, P>,\n\tstore: Store<T>,\n\tbefore: ProcessCallbackBefore | undefined,\n\tafter: ProcessCallbackAfter | undefined,\n\ttransformer: Transformer<P> | undefined\n): ProcessExecutor<T, any, any> {\n\tconst { apply, get, path, at } = store;\n\tfunction executor(\n\t\tprocess: Process,\n\t\tpayload: any,\n\t\ttransformer?: Transformer\n\t): Promise<ProcessResult | ProcessError> {\n\t\treturn process(store)(payload);\n\t}\n\n\treturn async (executorPayload: P): Promise<ProcessResult<T, P>> => {\n\t\tconst operations: PatchOperation[] = [];\n\t\tconst commandsCopy = [...commands];\n\t\tlet undoOperations: PatchOperation[] = [];\n\t\tlet command = commandsCopy.shift();\n\t\tlet error: ProcessError | null = null;\n\t\tconst payload = transformer ? transformer(executorPayload) : executorPayload;\n\n\t\tif (before) {\n\t\t\tlet result = before(payload, store, id);\n\t\t\tif (result) {\n\t\t\t\tawait result;\n\t\t\t}\n\t\t}\n\n\t\tfunction createProxy() {\n\t\t\tconst proxies = new Map<string, any>();\n\t\t\tconst proxied = new Map<string, any>();\n\n\t\t\tconst proxyOperations: PatchOperation[] = [];\n\t\t\tconst createHandler = (partialPath?: Path<T, any>) => ({\n\t\t\t\tget(obj: any, prop: string): any {\n\t\t\t\t\tconst fullPath = partialPath ? path(partialPath, prop) : path(prop as keyof T);\n\t\t\t\t\tconst stringPath = fullPath.path;\n\n\t\t\t\t\tif (typeof prop === 'symbol' && prop === valueSymbol) {\n\t\t\t\t\t\treturn proxied.get(stringPath);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet value = partialPath || obj.hasOwnProperty(prop) ? obj[prop] : get(fullPath);\n\n\t\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\t\tlet proxiedValue;\n\t\t\t\t\t\tif (!proxies.has(stringPath)) {\n\t\t\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\t\t\tvalue = value.slice();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvalue = { ...value };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tproxiedValue = new Proxy(value, createHandler(fullPath));\n\t\t\t\t\t\t\tproxies.set(stringPath, proxiedValue);\n\t\t\t\t\t\t\tproxied.set(stringPath, value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tproxiedValue = proxies.get(stringPath);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tobj[prop] = value;\n\t\t\t\t\t\treturn proxiedValue;\n\t\t\t\t\t}\n\n\t\t\t\t\tobj[prop] = value;\n\t\t\t\t\treturn value;\n\t\t\t\t},\n\n\t\t\t\tset(obj: any, prop: string, value: any) {\n\t\t\t\t\tvalue = removeProxies(value);\n\n\t\t\t\t\tproxyOperations.push(replace(partialPath ? path(partialPath, prop) : path(prop as keyof T), value));\n\t\t\t\t\tobj[prop] = value;\n\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\n\t\t\t\tdeleteProperty(obj: any, prop: string) {\n\t\t\t\t\tproxyOperations.push(remove(partialPath ? path(partialPath, prop) : path(prop as keyof T)));\n\t\t\t\t\tdelete obj[prop];\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn { proxy: new Proxy({}, createHandler()) as T, operations: proxyOperations };\n\t\t}\n\n\t\ttry {\n\t\t\twhile (command) {\n\t\t\t\tlet results = [];\n\t\t\t\tconst commandArray = Array.isArray(command) ? command : [command];\n\n\t\t\t\tresults = commandArray.map((commandFunction: Command<T, P>) => {\n\t\t\t\t\tlet state: T;\n\t\t\t\t\tlet proxyOperations: PatchOperation[] = [];\n\t\t\t\t\tif (typeof Proxy !== 'undefined') {\n\t\t\t\t\t\tconst { operations, proxy } = createProxy();\n\t\t\t\t\t\tstate = proxy;\n\t\t\t\t\t\tproxyOperations = operations;\n\t\t\t\t\t}\n\t\t\t\t\tlet result = commandFunction({\n\t\t\t\t\t\tat,\n\t\t\t\t\t\tget,\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\tpayload,\n\t\t\t\t\t\tget state() {\n\t\t\t\t\t\t\tif (typeof Proxy === 'undefined') {\n\t\t\t\t\t\t\t\tthrow new Error(proxyError);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn state;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tif (isThenable(result)) {\n\t\t\t\t\t\treturn result.then((result) => {\n\t\t\t\t\t\t\tresult = result ? [...proxyOperations, ...result] : [...proxyOperations];\n\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult =\n\t\t\t\t\t\t\tresult && Array.isArray(result) ? [...proxyOperations, ...result] : [...proxyOperations];\n\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tlet resolvedResults: PatchOperation[][];\n\t\t\t\tif (results.some(isThenable)) {\n\t\t\t\t\tresolvedResults = await Promise.all(results);\n\t\t\t\t} else {\n\t\t\t\t\tresolvedResults = results as PatchOperation[][];\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < results.length; i++) {\n\t\t\t\t\toperations.push(...resolvedResults[i]);\n\t\t\t\t\tundoOperations = [...apply(resolvedResults[i]), ...undoOperations];\n\t\t\t\t}\n\n\t\t\t\tstore.invalidate();\n\t\t\t\tcommand = commandsCopy.shift();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tif (e.message === proxyError) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\terror = { error: e, command };\n\t\t}\n\n\t\tafter &&\n\t\t\tafter(error, {\n\t\t\t\tundoOperations,\n\t\t\t\tstore,\n\t\t\t\tid,\n\t\t\t\toperations,\n\t\t\t\tapply,\n\t\t\t\tat,\n\t\t\t\tget,\n\t\t\t\tpath,\n\t\t\t\texecutor,\n\t\t\t\tpayload\n\t\t\t});\n\t\treturn Promise.resolve({\n\t\t\tstore,\n\t\t\tundoOperations,\n\t\t\tid,\n\t\t\terror,\n\t\t\toperations,\n\t\t\tapply,\n\t\t\tat,\n\t\t\tget,\n\t\t\tpath,\n\t\t\texecutor,\n\t\t\tpayload\n\t\t});\n\t};\n}\n/**\n * Factories a process using the provided commands and an optional callback. Returns an executor used to run the process.\n *\n * @param commands The commands for the process\n * @param callback Callback called after the process is completed\n */\nexport function createProcess<T = any, P extends object = DefaultPayload>(\n\tid: string,\n\tcommands: Commands<T, P>,\n\tcallbacks?: ProcessCallback | ProcessCallback[]\n): Process<T, P> {\n\tcallbacks = Array.isArray(callbacks) ? callbacks : callbacks ? [callbacks] : [];\n\n\tconst callback = callbacks.length\n\t\t? callbacks.reduce((callback, nextCallback) => {\n\t\t\t\treturn combineCallbacks(nextCallback, id)(callback);\n\t\t  })\n\t\t: undefined;\n\n\tconst { before = undefined, after = undefined } = callback ? callback() : {};\n\n\tprocessMap.set(id, [id, commands, before, after]);\n\treturn (store: Store<T>, transformer?: Transformer<P>) =>\n\t\tprocessExecutor(id, commands, store, before, after, transformer);\n}\n\n/**\n * Creates a process factory that will create processes with the specified callback decorators applied.\n * @param callbacks array of process callback to be used by the returned factory.\n * @param initializers array of process initializers to be used by the returned factory.\n */\nexport function createProcessFactoryWith(callbacks: ProcessCallback[]) {\n\treturn <S, P extends object>(\n\t\tid: string,\n\t\tcommands: (Command<S, P>[] | Command<S, P>)[],\n\t\tcallback?: ProcessCallback<S>\n\t): Process<S, P> => {\n\t\treturn createProcess(id, commands, callback ? [...callbacks, callback] : callbacks);\n\t};\n}\n\n/**\n * Creates a `ProcessCallbackDecorator` from a `ProcessCallback`.\n * @param processCallback the process callback to convert to a decorator.\n * @param id process id to be passed to the before callback\n */\nfunction combineCallbacks(processCallback: ProcessCallback, id: string): ProcessCallbackDecorator {\n\tconst { before, after } = processCallback();\n\treturn (previousCallback?: ProcessCallback) => {\n\t\tconst { before: previousBefore = undefined, after: previousAfter = undefined } = previousCallback\n\t\t\t? previousCallback()\n\t\t\t: {};\n\t\treturn () => ({\n\t\t\tafter(error: ProcessError | null, result: ProcessResult) {\n\t\t\t\tif (previousAfter) {\n\t\t\t\t\tpreviousAfter(error, result);\n\t\t\t\t}\n\n\t\t\t\tif (after) {\n\t\t\t\t\tafter(error, result);\n\t\t\t\t}\n\t\t\t},\n\t\t\tbefore(payload: DefaultPayload, store: Store<any>) {\n\t\t\t\tif (previousBefore) {\n\t\t\t\t\tpreviousBefore(payload, store, id);\n\t\t\t\t}\n\n\t\t\t\tif (before) {\n\t\t\t\t\tbefore(payload, store, id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n}\n\nexport function createCallbackDecorator(\n\tcallback: ProcessCallbackAfter\n): (callbacks?: ProcessCallback[]) => ProcessCallback[] {\n\tif (has('dojo-debug')) {\n\t\tconsole.warn(\n\t\t\t'Process using the the legacy middleware API. Please update to use the latest API, see https://github.com/dojo/framework/blob/master/docs/V5-Migration-Guide.md for details.'\n\t\t);\n\t}\n\tconst convertedCallback = () => ({\n\t\tafter: callback\n\t});\n\treturn (callbacks: ProcessCallback[] = []) => {\n\t\treturn [convertedCallback, ...callbacks];\n\t};\n}\n","import { createProcess, createCommandFactory, Process } from '@dojo/framework/stores/process';\nimport { replace, remove } from '@dojo/framework/stores/state/operations';\nimport {\n\tFetcherResult,\n\tGridState,\n\tFetcherCommandPayload,\n\tPageChangeCommandPayload,\n\tSortCommandPayload,\n\tFilterCommandPayload,\n\tUpdaterCommandPayload,\n\tSelectionCommandPayload\n} from './interfaces';\nimport { findIndex } from '@dojo/framework/shim/array';\n\nconst commandFactory = createCommandFactory<GridState>();\n\nconst pageChangeCommand = commandFactory<PageChangeCommandPayload>(\n\t({ path, get, payload: { id, page } }) => {\n\t\tconst currentPage = get(path(id, 'meta', 'page'));\n\t\tif (page !== currentPage) {\n\t\t\treturn [replace(path(id, 'meta', 'page'), page)];\n\t\t}\n\t\treturn [];\n\t}\n);\n\nconst preFetcherCommand = commandFactory<FetcherCommandPayload>(\n\t({ path, get, payload: { id, page } }) => {\n\t\tconst fetchedPages = get(path(id, 'meta', 'fetchedPages')) || [];\n\t\tif (fetchedPages.indexOf(page) === -1) {\n\t\t\treturn [\n\t\t\t\treplace(path(id, 'meta', 'fetchedPages'), [...fetchedPages, page]),\n\t\t\t\treplace(path(id, 'meta', 'page'), page)\n\t\t\t];\n\t\t}\n\t\tthrow Error('The page has already been requested');\n\t}\n);\n\nconst fetcherCommand = commandFactory<FetcherCommandPayload>(\n\tasync ({ at, path, get, payload: { id, fetcher, page, pageSize } }) => {\n\t\tlet result: FetcherResult;\n\t\tconst isSorting = get(path(id, 'meta', 'isSorting'));\n\t\tif (!isSorting) {\n\t\t\tconst sortOptions = get(path(id, 'meta', 'sort'));\n\t\t\tconst filterOptions = get(path(id, 'meta', 'filter'));\n\t\t\ttry {\n\t\t\t\tresult = await fetcher(page, pageSize, {\n\t\t\t\t\tsort: sortOptions,\n\t\t\t\t\tfilter: filterOptions\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\treturn [remove(path(id, 'data', 'pages', `page-${page}`))];\n\t\t\t}\n\t\t\treturn [\n\t\t\t\treplace(path(id, 'data', 'pages', `page-${page}`), result.data),\n\t\t\t\treplace(path(id, 'meta', 'total'), result.meta.total),\n\t\t\t\treplace(path(id, 'meta', 'pageSize'), pageSize)\n\t\t\t];\n\t\t} else {\n\t\t\tthrow Error('The grid is being sorted or filtered');\n\t\t}\n\t}\n);\n\nconst preSortCommand = commandFactory<SortCommandPayload>(\n\t({ at, path, get, payload: { id, columnId, direction } }) => {\n\t\tconst page = get(path(id, 'meta', 'page'));\n\t\treturn [\n\t\t\tremove(path(id, 'data', 'pages')),\n\t\t\tremove(path(id, 'meta', 'selection')),\n\t\t\treplace(path(id, 'meta', 'fetchedPages'), page === 1 ? [1] : [page, page - 1]),\n\t\t\treplace(path(id, 'meta', 'sort', 'columnId'), columnId),\n\t\t\treplace(path(id, 'meta', 'sort', 'direction'), direction),\n\t\t\treplace(path(id, 'meta', 'isSorting'), true)\n\t\t];\n\t}\n);\n\nconst preFilterCommand = commandFactory<FilterCommandPayload>(\n\t({ at, path, get, payload: { id, filterOptions } }) => {\n\t\treturn [\n\t\t\tremove(path(id, 'data', 'pages')),\n\t\t\tremove(path(id, 'meta', 'selection')),\n\t\t\treplace(path(id, 'meta', 'fetchedPages'), [1]),\n\t\t\treplace(path(id, 'meta', 'filter', filterOptions.columnId), filterOptions.value),\n\t\t\treplace(path(id, 'meta', 'currentFilter'), filterOptions),\n\t\t\treplace(path(id, 'meta', 'page'), 1),\n\t\t\treplace(path(id, 'meta', 'isSorting'), true)\n\t\t];\n\t}\n);\n\nconst sortCommand = commandFactory<SortCommandPayload>(\n\tasync ({ at, path, get, payload, state }) => {\n\t\tconst { id, fetcher, columnId, direction } = payload;\n\t\tconst page = get(path(id, 'meta', 'page'));\n\t\tif (page === 1) {\n\t\t\treturn sortForFirstPage({ at, get, path, payload, state });\n\t\t}\n\t\tconst pageSize = get(path(id, 'meta', 'pageSize'));\n\t\tconst filterOptions = get(path(id, 'meta', 'filter'));\n\t\tlet result: FetcherResult[];\n\t\ttry {\n\t\t\tconst options = {\n\t\t\t\tsort: { columnId, direction },\n\t\t\t\tfilter: filterOptions\n\t\t\t};\n\t\t\tconst previousPage = fetcher(page - 1, pageSize, options);\n\t\t\tconst currentPage = fetcher(page, pageSize, options);\n\t\t\tresult = await Promise.all([previousPage, currentPage]);\n\t\t} catch (err) {\n\t\t\treturn [];\n\t\t}\n\n\t\treturn [\n\t\t\treplace(path(id, 'data', 'pages', `page-${page - 1}`), result[0].data),\n\t\t\treplace(path(id, 'data', 'pages', `page-${page}`), result[1].data),\n\t\t\treplace(path(id, 'meta', 'sort', 'columnId'), columnId),\n\t\t\treplace(path(id, 'meta', 'sort', 'direction'), direction),\n\t\t\treplace(path(id, 'meta', 'total'), result[1].meta.total),\n\t\t\treplace(path(id, 'meta', 'page'), page),\n\t\t\treplace(path(id, 'meta', 'isSorting'), false)\n\t\t];\n\t}\n);\n\nconst sortForFirstPage = commandFactory<SortCommandPayload>(\n\tasync ({ at, path, get, payload: { id, fetcher, columnId, direction } }) => {\n\t\tconst pageSize = get(path(id, 'meta', 'pageSize'));\n\t\tconst filterOptions = get(path(id, 'meta', 'filter'));\n\t\tlet result: FetcherResult;\n\t\ttry {\n\t\t\tresult = await fetcher(1, pageSize, {\n\t\t\t\tsort: { columnId, direction },\n\t\t\t\tfilter: filterOptions\n\t\t\t});\n\t\t} catch (err) {\n\t\t\treturn [];\n\t\t}\n\t\treturn [\n\t\t\treplace(path(id, 'data', 'pages', 'page-1'), result.data),\n\t\t\treplace(path(id, 'meta', 'sort', 'columnId'), columnId),\n\t\t\treplace(path(id, 'meta', 'sort', 'direction'), direction),\n\t\t\treplace(path(id, 'meta', 'total'), result.meta.total),\n\t\t\treplace(path(id, 'meta', 'page'), 1),\n\t\t\treplace(path(id, 'meta', 'isSorting'), false)\n\t\t];\n\t}\n);\n\nconst filterCommand = commandFactory<FilterCommandPayload>(\n\tasync ({ at, path, get, payload: { id, fetcher, filterOptions } }) => {\n\t\tconst pageSize = get(path(id, 'meta', 'pageSize'));\n\t\tconst sortOptions = get(path(id, 'meta', 'sort'));\n\t\tconst currentFilters = get(path(id, 'meta', 'filter'));\n\t\tlet result: FetcherResult;\n\t\ttry {\n\t\t\tresult = await fetcher(1, pageSize, { sort: sortOptions, filter: currentFilters });\n\t\t} catch (err) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (filterOptions !== get(path(id, 'meta', 'currentFilter'))) {\n\t\t\tthrow new Error();\n\t\t}\n\t\treturn [\n\t\t\tremove(path(id, 'data', 'pages')),\n\t\t\treplace(path(id, 'data', 'pages', 'page-1'), result.data),\n\t\t\treplace(path(id, 'meta', 'total'), result.meta.total),\n\t\t\treplace(path(id, 'meta', 'isSorting'), false)\n\t\t];\n\t}\n);\n\nconst preUpdateCommand = commandFactory<UpdaterCommandPayload>(\n\t({ at, path, get, payload: { id, updater, columnId, value, page, rowNumber } }) => {\n\t\tconst item = get(at(path(id, 'data', 'pages', `page-${page}`), rowNumber));\n\t\tconst updatedItem = { ...item, [columnId]: value };\n\n\t\treturn [\n\t\t\treplace(at(path(id, 'data', 'pages', `page-${page}`), rowNumber), updatedItem),\n\t\t\treplace(path(id, 'meta', 'editedRow', 'page'), page),\n\t\t\treplace(path(id, 'meta', 'editedRow', 'index'), rowNumber),\n\t\t\treplace(path(id, 'meta', 'editedRow', 'item'), { ...item })\n\t\t];\n\t}\n);\n\nconst updaterCommand = commandFactory<UpdaterCommandPayload>(\n\tasync ({ at, path, get, payload: { id, updater, columnId, value, page, rowNumber } }) => {\n\t\tconst item = get(at(path(id, 'data', 'pages', `page-${page}`), rowNumber));\n\t\ttry {\n\t\t\tawait updater(item);\n\t\t} catch (err) {\n\t\t\tconst previousItem = get(path(id, 'meta', 'editedRow', 'item'));\n\t\t\treturn [\n\t\t\t\treplace(at(path(id, 'data', 'pages', `page-${page}`), rowNumber), previousItem)\n\t\t\t];\n\t\t}\n\n\t\treturn [replace(path(id, 'meta', 'editedRow'), undefined)];\n\t}\n);\n\nconst selectionCommand = commandFactory<SelectionCommandPayload>(\n\t({ payload: { id, index, type }, get, path }) => {\n\t\tlet currentSelection = [...(get(path(id, 'meta', 'selection')) || [])];\n\t\tif (type === 'single') {\n\t\t\tif (currentSelection.indexOf(index) === -1) {\n\t\t\t\tcurrentSelection = [index];\n\t\t\t} else if (currentSelection.length > 1) {\n\t\t\t\tcurrentSelection = [index];\n\t\t\t} else {\n\t\t\t\tcurrentSelection = [];\n\t\t\t}\n\t\t} else {\n\t\t\tconst existingIndex = findIndex(currentSelection, (idx) => idx === index);\n\t\t\tif (existingIndex === -1) {\n\t\t\t\tcurrentSelection = [...currentSelection, index];\n\t\t\t} else {\n\t\t\t\tcurrentSelection.splice(existingIndex, 1);\n\t\t\t}\n\t\t}\n\n\t\treturn [replace(path(id, 'meta', 'selection'), currentSelection)];\n\t}\n);\n\nconst clearSelectionCommand = commandFactory<{ id: string }>(({ payload: { id }, path }) => {\n\treturn [remove(path(id, 'meta', 'selection'))];\n});\n\nexport const updaterProcess: Process<GridState, UpdaterCommandPayload> = createProcess(\n\t'grid-update',\n\t[preUpdateCommand, updaterCommand]\n);\nexport const fetcherProcess: Process<GridState, FetcherCommandPayload> = createProcess(\n\t'grid-fetch',\n\t[preFetcherCommand, fetcherCommand]\n);\nexport const filterProcess: Process<GridState, FilterCommandPayload> = createProcess(\n\t'grid-filter',\n\t[preFilterCommand, filterCommand]\n);\nexport const sortProcess: Process<GridState, SortCommandPayload> = createProcess('grid-sort', [\n\tpreSortCommand,\n\tsortCommand\n]);\nexport const selectionProcess: Process<GridState, SelectionCommandPayload> = createProcess(\n\t'grid-selection',\n\t[selectionCommand]\n);\nexport const clearSelectionProcess = createProcess('clear-selection', [clearSelectionCommand]);\nexport const pageChangeProcess: Process<GridState, PageChangeCommandPayload> = createProcess(\n\t'grid-page-change',\n\t[pageChangeCommand]\n);\n","import { deepAssign } from '../../core/util';\nimport global from '../../shim/global';\nimport { assign } from '../../shim/object';\nimport WeakMap from '../../shim/WeakMap';\nimport { Base } from './Base';\n\nexport interface DragResults {\n\t/**\n\t * The movement of pointer during the duration of the drag state\n\t */\n\tdelta: Position;\n\n\t/**\n\t * Is the DOM node currently in a drag state\n\t */\n\tisDragging: boolean;\n\n\t/**\n\t * A matrix of posistions that represent the start position for the current drag interaction\n\t */\n\tstart?: PositionMatrix;\n}\n\ninterface NodeData {\n\tdragResults: DragResults;\n\tinvalidate: () => void;\n\tlast: PositionMatrix;\n\tstart: PositionMatrix;\n}\n\n/**\n * An x/y position structure\n */\nexport interface Position {\n\tx: number;\n\ty: number;\n}\n\n/**\n * A matrix of x/y positions\n */\nexport interface PositionMatrix {\n\t/**\n\t * Client x/y position\n\t */\n\tclient: Position;\n\n\t/**\n\t * Offset x/y position\n\t */\n\toffset: Position;\n\n\t/**\n\t * Page x/y position\n\t */\n\tpage: Position;\n\n\t/**\n\t * Screen x/y position\n\t */\n\tscreen: Position;\n}\n\nfunction createNodeData(invalidate: () => void): NodeData {\n\treturn {\n\t\tdragResults: deepAssign({}, emptyResults),\n\t\tinvalidate,\n\t\tlast: createPositionMatrix(),\n\t\tstart: createPositionMatrix()\n\t};\n}\n\n/**\n * Creates an empty position\n */\nfunction createPosition(): Position {\n\treturn { x: 0, y: 0 };\n}\n\n/**\n * Create an empty position matrix\n */\nfunction createPositionMatrix(): PositionMatrix {\n\treturn {\n\t\tclient: { x: 0, y: 0 },\n\t\toffset: { x: 0, y: 0 },\n\t\tpage: { x: 0, y: 0 },\n\t\tscreen: { x: 0, y: 0 }\n\t};\n}\n\n/**\n * A frozen empty result object, frozen to ensure that no one downstream modifies it\n */\nconst emptyResults = Object.freeze({\n\tdelta: Object.freeze(createPosition()),\n\tisDragging: false\n});\n\n/**\n * Return the x/y position matrix for an event\n * @param event The pointer event\n */\nfunction getPositionMatrix(event: PointerEvent): PositionMatrix {\n\treturn {\n\t\tclient: {\n\t\t\tx: event.clientX,\n\t\t\ty: event.clientY\n\t\t},\n\t\toffset: {\n\t\t\tx: event.offsetX,\n\t\t\ty: event.offsetY\n\t\t},\n\t\tpage: {\n\t\t\tx: event.pageX,\n\t\t\ty: event.pageY\n\t\t},\n\t\tscreen: {\n\t\t\tx: event.screenX,\n\t\t\ty: event.screenY\n\t\t}\n\t};\n}\n\n/**\n * Return the delta position between two positions\n * @param start The first position\n * @param current The second position\n */\nfunction getDelta(start: PositionMatrix, current: PositionMatrix): Position {\n\treturn {\n\t\tx: current.client.x - start.client.x,\n\t\ty: current.client.y - start.client.y\n\t};\n}\n\n/**\n * Sets the `touch-action` on nodes so that PointerEvents are always emitted for the node\n * @param node The node to init\n */\nfunction initNode(node: HTMLElement): void {\n\t// Ensure that the node has `touch-action` none\n\tnode.style.touchAction = 'none';\n\t// PEP requires an attribute of `touch-action` to be set on the element\n\tnode.setAttribute('touch-action', 'none');\n}\n\nclass DragController {\n\tprivate _nodeMap = new WeakMap<HTMLElement, NodeData>();\n\tprivate _dragging: HTMLElement | undefined = undefined;\n\n\tprivate _getData(target: HTMLElement): { state: NodeData; target: HTMLElement } | undefined {\n\t\tif (this._nodeMap.has(target)) {\n\t\t\treturn { state: this._nodeMap.get(target)!, target };\n\t\t}\n\t\tif (target.parentElement) {\n\t\t\treturn this._getData(target.parentElement);\n\t\t}\n\t}\n\n\tprivate _onDragStart = (event: PointerEvent) => {\n\t\tconst { _dragging } = this;\n\t\tif (!event.isPrimary && _dragging) {\n\t\t\t// we have a second touch going on here, while we are dragging, so we aren't really dragging, so we\n\t\t\t// will close this down\n\t\t\tconst state = this._nodeMap.get(_dragging)!;\n\t\t\tstate.dragResults.isDragging = false;\n\t\t\tstate.invalidate();\n\t\t\tthis._dragging = undefined;\n\t\t\treturn;\n\t\t}\n\t\tif (event.button !== 0) {\n\t\t\t// it isn't the primary button that is being clicked, so we will ignore this\n\t\t\treturn;\n\t\t}\n\t\tconst data = this._getData(event.target as HTMLElement);\n\t\tif (data) {\n\t\t\tconst { state, target } = data;\n\t\t\tthis._dragging = target;\n\t\t\tstate.last = state.start = getPositionMatrix(event);\n\t\t\tstate.dragResults.delta = createPosition();\n\t\t\tstate.dragResults.start = deepAssign({}, state.start);\n\t\t\tstate.dragResults.isDragging = true;\n\t\t\tstate.invalidate();\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t} // else, we are ignoring the event\n\t};\n\n\tprivate _onDrag = (event: PointerEvent) => {\n\t\tconst { _dragging } = this;\n\t\tif (!_dragging) {\n\t\t\treturn;\n\t\t}\n\t\t// state cannot be unset, using ! operator\n\t\tconst state = this._nodeMap.get(_dragging)!;\n\t\tstate.last = getPositionMatrix(event);\n\t\tstate.dragResults.delta = getDelta(state.start, state.last);\n\t\tif (!state.dragResults.start) {\n\t\t\tstate.dragResults.start = deepAssign({}, state.start);\n\t\t}\n\t\tstate.invalidate();\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t};\n\n\tprivate _onDragStop = (event: PointerEvent) => {\n\t\tconst { _dragging } = this;\n\t\tif (!_dragging) {\n\t\t\treturn;\n\t\t}\n\t\t// state cannot be unset, using ! operator\n\t\tconst state = this._nodeMap.get(_dragging)!;\n\t\tstate.last = getPositionMatrix(event);\n\t\tstate.dragResults.delta = getDelta(state.start, state.last);\n\t\tif (!state.dragResults.start) {\n\t\t\tstate.dragResults.start = deepAssign({}, state.start);\n\t\t}\n\t\tstate.dragResults.isDragging = false;\n\t\tstate.invalidate();\n\t\tthis._dragging = undefined;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t};\n\n\tconstructor() {\n\t\tconst win: Window = global.window;\n\t\twin.addEventListener('pointerdown', this._onDragStart);\n\t\t// Use capture phase, to determine the right node target, as it will be top down versus bottom up\n\t\twin.addEventListener('pointermove', this._onDrag, true);\n\t\twin.addEventListener('pointerup', this._onDragStop, true);\n\t}\n\n\tpublic get(node: HTMLElement, invalidate: () => void): DragResults {\n\t\tconst { _nodeMap } = this;\n\t\t// first time we see a node, we will initialize its state and properties\n\t\tif (!_nodeMap.has(node)) {\n\t\t\t_nodeMap.set(node, createNodeData(invalidate));\n\t\t\tinitNode(node);\n\t\t\treturn emptyResults;\n\t\t}\n\n\t\tconst state = _nodeMap.get(node)!;\n\t\t// shallow \"clone\" the results, so no downstream manipulation can occur\n\t\tconst dragResults = assign({}, state.dragResults);\n\t\t// we are offering up an accurate delta, so we need to take the last event position and move it to the start so\n\t\t// that our deltas are calculated from the last time they are read\n\t\tstate.start = state.last;\n\t\t// reset the delta after we have read, as any future reads should have an empty delta\n\t\tstate.dragResults.delta = createPosition();\n\t\t// clear the start state\n\t\tdelete state.dragResults.start;\n\n\t\treturn dragResults;\n\t}\n}\n\nconst controller = new DragController();\n\nexport class Drag extends Base {\n\tprivate _boundInvalidate: () => void = this.invalidate.bind(this);\n\n\tpublic get(key: string | number): Readonly<DragResults> {\n\t\tconst node = this.getNode(key) as HTMLElement;\n\n\t\t// if we don't have a reference to the node yet, return an empty set of results\n\t\tif (!node) {\n\t\t\treturn emptyResults;\n\t\t}\n\n\t\t// otherwise we will ask the controller for our results\n\t\treturn controller.get(node, this._boundInvalidate);\n\t}\n}\n\nexport default Drag;\n","import WidgetBase from '@dojo/framework/core/WidgetBase';\nimport { v, w } from '@dojo/framework/core/vdom';\nimport Drag from '@dojo/framework/core/meta/Drag';\nimport ThemedMixin, { theme } from '@dojo/framework/core/mixins/Themed';\nimport { ColumnConfig, SortOptions } from './interfaces';\nimport { DNode } from '@dojo/framework/core/interfaces';\nimport TextInput from '../text-input/index';\nimport Icon from '../icon/index';\n\nimport * as css from '../theme/grid-header.m.css';\nimport * as fixedCss from './styles/header.m.css';\n\nexport interface SortRenderer {\n\t(column: ColumnConfig, direction: undefined | 'asc' | 'desc', sorter: () => void): DNode;\n}\n\nexport interface FilterRenderer {\n\t(\n\t\tcolumn: ColumnConfig,\n\t\tfilterValue: string,\n\t\tdoFilter: (value: string) => void,\n\t\ttitle?: string | DNode\n\t): DNode;\n}\n\nexport interface HeaderProperties {\n\t/** Configuration for grid columns (id, title, properties, and custom renderer) */\n\tcolumnConfig: ColumnConfig[];\n\t/** Handles changing the sort order of a column */\n\tsorter: (columnId: string, direction: 'asc' | 'desc') => void;\n\t/** Handles filtering rows based on a given column */\n\tfilterer: (columnId: string, value: any) => void;\n\t/** Applied filters */\n\tfilter?: {\n\t\t[index: string]: string;\n\t};\n\t/** Applied sort options */\n\tsort?: SortOptions;\n\t/** Custom column renderer for displaying sort options */\n\tsortRenderer?: SortRenderer;\n\t/** Custom renderer displaying applied filters */\n\tfilterRenderer?: FilterRenderer;\n\t/** Callback on column resize */\n\tonColumnResize?: (index: number, value: number) => void;\n\t/** Calculated column widths */\n\tcolumnWidths?: { [index: string]: number };\n}\n\n@theme(css)\nexport default class Header extends ThemedMixin(WidgetBase)<HeaderProperties> {\n\tprivate _getColumnTitle(column: ColumnConfig): string | DNode {\n\t\tif (typeof column.title === 'function') {\n\t\t\treturn column.title();\n\t\t}\n\t\treturn column.title;\n\t}\n\n\tprivate _sortColumn(id: string) {\n\t\tconst { sort, sorter } = this.properties;\n\t\tconst direction = sort\n\t\t\t? sort.columnId !== id\n\t\t\t\t? 'desc'\n\t\t\t\t: sort.direction === 'desc'\n\t\t\t\t? 'asc'\n\t\t\t\t: 'desc'\n\t\t\t: 'desc';\n\t\tsorter(id, direction);\n\t}\n\n\tprivate _sortRenderer = (\n\t\tcolumn: ColumnConfig,\n\t\tdirection: undefined | 'asc' | 'desc',\n\t\tsorter: () => void\n\t) => {\n\t\tconst { theme, classes } = this.properties;\n\t\treturn v('button', { classes: this.theme(css.sort), onclick: sorter }, [\n\t\t\tw(Icon, {\n\t\t\t\ttheme,\n\t\t\t\tclasses,\n\t\t\t\ttype: direction === 'asc' ? 'upIcon' : 'downIcon',\n\t\t\t\taltText: `Sort by ${this._getColumnTitle(column)}`\n\t\t\t})\n\t\t]);\n\t};\n\n\tprivate _filterRenderer = (\n\t\tcolumnConfig: ColumnConfig,\n\t\tfilterValue: string,\n\t\tdoFilter: (value: string) => void,\n\t\ttitle?: string | DNode\n\t) => {\n\t\tconst { theme, classes } = this.properties;\n\t\treturn w(TextInput, {\n\t\t\tkey: 'filter',\n\t\t\ttheme,\n\t\t\tclasses,\n\t\t\textraClasses: { root: css.filter },\n\t\t\tlabel: `Filter by ${title}`,\n\t\t\tlabelHidden: true,\n\t\t\ttype: 'search',\n\t\t\tvalue: filterValue,\n\t\t\tonInput: doFilter\n\t\t});\n\t};\n\n\tprotected render(): DNode {\n\t\tconst {\n\t\t\tcolumnConfig,\n\t\t\tsort,\n\t\t\tfilterer,\n\t\t\tfilter = {},\n\t\t\tsortRenderer = this._sortRenderer,\n\t\t\tfilterRenderer = this._filterRenderer,\n\t\t\tcolumnWidths,\n\t\t\tonColumnResize\n\t\t} = this.properties;\n\n\t\tconst rowWidth =\n\t\t\tcolumnWidths &&\n\t\t\tObject.keys(columnWidths).reduce((rowWidth, key) => {\n\t\t\t\treturn rowWidth + columnWidths[key];\n\t\t\t}, 0);\n\n\t\treturn v(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\tstyles: rowWidth ? { width: `${rowWidth}px` } : {},\n\t\t\t\tclasses: [this.theme(css.root), fixedCss.rootFixed],\n\t\t\t\trole: 'row'\n\t\t\t},\n\t\t\tcolumnConfig.map((column, index) => {\n\t\t\t\tconst title = this._getColumnTitle(column);\n\t\t\t\tlet headerProperties = {};\n\t\t\t\tconst isSorted = sort && sort.columnId === column.id;\n\t\t\t\tconst isSortedAsc = Boolean(\n\t\t\t\t\tsort && sort.columnId === column.id && sort.direction === 'asc'\n\t\t\t\t);\n\t\t\t\tif (column.sortable) {\n\t\t\t\t\theaderProperties = {\n\t\t\t\t\t\tclasses: [\n\t\t\t\t\t\t\tfixedCss.column,\n\t\t\t\t\t\t\tthis.theme(css.sortable),\n\t\t\t\t\t\t\tisSorted ? this.theme(css.sorted) : null,\n\t\t\t\t\t\t\tisSorted && !isSortedAsc ? this.theme(css.desc) : null,\n\t\t\t\t\t\t\tisSortedAsc ? this.theme(css.asc) : null\n\t\t\t\t\t\t],\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tthis._sortColumn(column.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tconst filterKeys = Object.keys(filter);\n\t\t\t\tconst direction = !isSorted ? undefined : isSortedAsc ? 'asc' : 'desc';\n\t\t\t\tconst filterValue = filterKeys.indexOf(column.id) > -1 ? filter[column.id] : '';\n\t\t\t\tconst doFilter = (value: string) => {\n\t\t\t\t\tfilterer(column.id, value);\n\t\t\t\t};\n\n\t\t\t\tif (column.resizable) {\n\t\t\t\t\tconst dragResults = this.meta(Drag).get(`${column.id}-resize`);\n\n\t\t\t\t\tif (dragResults.isDragging) {\n\t\t\t\t\t\tdragResults.delta.x !== 0 &&\n\t\t\t\t\t\t\tonColumnResize &&\n\t\t\t\t\t\t\tonColumnResize(index, dragResults.delta.x);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn v(\n\t\t\t\t\t'div',\n\t\t\t\t\t{\n\t\t\t\t\t\t'aria-sort': isSorted ? (isSortedAsc ? 'ascending' : 'descending') : null,\n\t\t\t\t\t\tclasses: [this.theme(css.cell), fixedCss.cellFixed],\n\t\t\t\t\t\trole: 'columnheader',\n\t\t\t\t\t\tstyles: columnWidths\n\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\tflex: `0 1 ${columnWidths[column.id]}px`\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: {}\n\t\t\t\t\t},\n\t\t\t\t\t[\n\t\t\t\t\t\tv('div', headerProperties, [\n\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\tcolumn.sortable\n\t\t\t\t\t\t\t\t? sortRenderer(column, direction, () => {\n\t\t\t\t\t\t\t\t\t\tthis._sortColumn(column.id);\n\t\t\t\t\t\t\t\t  })\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t]),\n\n\t\t\t\t\t\tcolumn.filterable\n\t\t\t\t\t\t\t? filterRenderer(column, filterValue, doFilter, title)\n\t\t\t\t\t\t\t: null,\n\t\t\t\t\t\tcolumn.resizable &&\n\t\t\t\t\t\t\tv('span', {\n\t\t\t\t\t\t\t\tkey: `${column.id}-resize`,\n\t\t\t\t\t\t\t\tclasses: [fixedCss.resize]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t}\n}\n","import WidgetBase from '@dojo/framework/core/WidgetBase';\nimport { v } from '@dojo/framework/core/vdom';\nimport ThemedMixin, { theme } from '@dojo/framework/core/mixins/Themed';\nimport { DNode } from '@dojo/framework/core/interfaces';\nimport * as css from '../theme/grid-placeholder-row.m.css';\n\n@theme(css)\nexport default class PlaceholderRow extends ThemedMixin(WidgetBase) {\n\tprotected render(): DNode {\n\t\treturn v('div', { classes: this.theme(css.root) }, [\n\t\t\tv('div', { classes: this.theme(css.loading) })\n\t\t]);\n\t}\n}\n","import WidgetBase from '@dojo/framework/core/WidgetBase';\nimport { v, w } from '@dojo/framework/core/vdom';\nimport { FocusMixin, FocusProperties } from '@dojo/framework/core/mixins/Focus';\nimport ThemedMixin, { theme } from '@dojo/framework/core/mixins/Themed';\nimport { DNode } from '@dojo/framework/core/interfaces';\nimport { uuid } from '@dojo/framework/core/util';\nimport { Keys } from '../common/util';\nimport TextInput from '../text-input/index';\nimport Button from '../button/index';\nimport Icon from '../icon/index';\n\nimport * as fixedCss from './styles/cell.m.css';\nimport * as css from '../theme/grid-cell.m.css';\n\nexport interface CellProperties extends FocusProperties {\n\t/** The display value (or widget) of the cell */\n\tvalue: string | DNode;\n\t/** If the cell's value may be updated */\n\teditable?: boolean;\n\t/** The underlying string value of the cell (used by the editor) */\n\trawValue: string;\n\t/** Called when the Cell's value is saved by the editor */\n\tupdater: (value: any) => void;\n\t/** The width (in pixels) */\n\twidth?: number;\n}\n\n@theme(css)\nexport default class Cell extends ThemedMixin(FocusMixin(WidgetBase))<CellProperties> {\n\tprivate _editing = false;\n\tprivate _editingValue = '';\n\tprivate _focusKey!: string;\n\tprivate _idBase = uuid();\n\n\tprivate _callFocus(key: string) {\n\t\tthis._focusKey = key;\n\t\tthis.focus();\n\t}\n\n\tprivate _onEdit = () => {\n\t\tconst { editable } = this.properties;\n\t\tif (editable) {\n\t\t\tthis._editing = true;\n\t\t\tthis._callFocus('input');\n\t\t\tthis._editingValue = this.properties.rawValue;\n\t\t\tthis.invalidate();\n\t\t}\n\t};\n\n\tprivate _onBlur() {\n\t\tif (this._editing) {\n\t\t\tthis._onSave();\n\t\t}\n\t}\n\n\tprivate _onInput(value: string) {\n\t\tthis._editingValue = value;\n\t}\n\n\tprivate _onKeyDown(key: number) {\n\t\tif (key === Keys.Enter) {\n\t\t\tthis._onSave();\n\t\t\tthis._callFocus('button');\n\t\t} else if (key === Keys.Escape) {\n\t\t\tthis._editing = false;\n\t\t\tthis._callFocus('button');\n\t\t\tthis.invalidate();\n\t\t}\n\t}\n\n\tprivate _onSave() {\n\t\tthis._editing = false;\n\t\tthis.properties.updater(this._editingValue);\n\t\tthis.invalidate();\n\t}\n\n\tprotected renderContent(): DNode {\n\t\tconst { value } = this.properties;\n\t\treturn v(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\tkey: 'content',\n\t\t\t\tid: this._idBase,\n\t\t\t\tondblclick: this._onEdit\n\t\t\t},\n\t\t\t[value]\n\t\t);\n\t}\n\n\tprotected render(): DNode {\n\t\tlet { editable, rawValue, theme, classes, width } = this.properties;\n\n\t\treturn v(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\trole: 'cell',\n\t\t\t\tstyles: width\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tflex: `0 1 ${width}px`\n\t\t\t\t\t  }\n\t\t\t\t\t: {},\n\t\t\t\tclasses: [this.theme(css.root), fixedCss.rootFixed]\n\t\t\t},\n\t\t\t[\n\t\t\t\tthis._editing\n\t\t\t\t\t? w(TextInput, {\n\t\t\t\t\t\t\tkey: 'input',\n\t\t\t\t\t\t\ttheme,\n\t\t\t\t\t\t\tclasses,\n\t\t\t\t\t\t\tlabel: `Edit ${rawValue}`,\n\t\t\t\t\t\t\tlabelHidden: true,\n\t\t\t\t\t\t\textraClasses: { input: this.theme(css.input) } as any,\n\t\t\t\t\t\t\tfocus: this._focusKey === 'input' ? this.shouldFocus : () => false,\n\t\t\t\t\t\t\tvalue: this._editingValue,\n\t\t\t\t\t\t\tonInput: this._onInput,\n\t\t\t\t\t\t\tonBlur: this._onBlur,\n\t\t\t\t\t\t\tonKeyDown: this._onKeyDown\n\t\t\t\t\t  })\n\t\t\t\t\t: this.renderContent(),\n\t\t\t\teditable && !this._editing\n\t\t\t\t\t? w(\n\t\t\t\t\t\t\tButton,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tkey: 'button',\n\t\t\t\t\t\t\t\ttheme,\n\t\t\t\t\t\t\t\tclasses,\n\t\t\t\t\t\t\t\taria: { describedby: this._idBase },\n\t\t\t\t\t\t\t\tfocus: this._focusKey === 'button' ? this.shouldFocus : () => false,\n\t\t\t\t\t\t\t\ttype: 'button',\n\t\t\t\t\t\t\t\textraClasses: { root: this.theme(css.edit) } as any,\n\t\t\t\t\t\t\t\tonClick: this._onEdit\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t[w(Icon, { type: 'editIcon', altText: 'Edit', classes, theme })]\n\t\t\t\t\t  )\n\t\t\t\t\t: null\n\t\t\t]\n\t\t);\n\t}\n}\n","import WidgetBase from '@dojo/framework/core/WidgetBase';\nimport { v, w } from '@dojo/framework/core/vdom';\nimport { DNode } from '@dojo/framework/core/interfaces';\nimport ThemedMixin, { theme } from '@dojo/framework/core/mixins/Themed';\n\nimport { ColumnConfig, SelectionType } from './interfaces';\nimport Cell from './Cell';\nimport * as fixedCss from './styles/row.m.css';\nimport * as css from '../theme/grid-row.m.css';\n\nexport interface RowProperties {\n\t/** identifier for the row */\n\tid: number;\n\t/** A list of values indexed on the column id */\n\titem: { [index: string]: any };\n\t/** Configuration for grid columns (id, title, properties, and custom renderer)  */\n\tcolumnConfig: ColumnConfig[];\n\t/** Handles updating the value of a cell */\n\tupdater: (rowNumber: number, columnId: string, value: any) => void;\n\t/** Calculated column widths */\n\tcolumnWidths?: { [index: string]: number };\n\t/** handler for row selection */\n\tonRowSelect?: (type: SelectionType) => void;\n\t/** array of selected rows */\n\tselected?: boolean;\n}\n\n@theme(css)\nexport default class Row extends ThemedMixin(WidgetBase)<RowProperties> {\n\tprivate _onRowSelect(event: MouseEvent) {\n\t\tconst { onRowSelect } = this.properties;\n\t\tconst type = event.ctrlKey || event.metaKey ? 'multi' : 'single';\n\t\tonRowSelect && onRowSelect(type);\n\t}\n\n\tprotected render(): DNode {\n\t\tconst {\n\t\t\titem,\n\t\t\tcolumnConfig,\n\t\t\tid,\n\t\t\ttheme,\n\t\t\tclasses,\n\t\t\tcolumnWidths,\n\t\t\tonRowSelect,\n\t\t\tselected\n\t\t} = this.properties;\n\t\tlet columns = columnConfig.map(\n\t\t\t(config) => {\n\t\t\t\tlet value: string | DNode = `${item[config.id]}`;\n\t\t\t\tif (config.renderer) {\n\t\t\t\t\tvalue = config.renderer({ value });\n\t\t\t\t}\n\t\t\t\treturn w(Cell, {\n\t\t\t\t\ttheme,\n\t\t\t\t\tkey: config.id,\n\t\t\t\t\tclasses,\n\t\t\t\t\tupdater: (updatedValue: string) => {\n\t\t\t\t\t\tthis.properties.updater(id, config.id, updatedValue);\n\t\t\t\t\t},\n\t\t\t\t\tvalue,\n\t\t\t\t\teditable: config.editable,\n\t\t\t\t\trawValue: `${item[config.id]}`,\n\t\t\t\t\twidth: columnWidths ? columnWidths[config.id] : undefined\n\t\t\t\t});\n\t\t\t},\n\t\t\t[] as DNode[]\n\t\t);\n\n\t\treturn v(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\tkey: 'root',\n\t\t\t\tclasses: [\n\t\t\t\t\tthis.theme(css.root),\n\t\t\t\t\tselected && this.theme(css.selected),\n\t\t\t\t\tfixedCss.rootFixed\n\t\t\t\t],\n\t\t\t\trole: 'row',\n\t\t\t\tonclick: onRowSelect ? this._onRowSelect : undefined,\n\t\t\t\t'aria-rowindex': `${id + 1}`\n\t\t\t},\n\t\t\tcolumns\n\t\t);\n\t}\n}\n","import global from '@dojo/framework/shim/global';\nimport WidgetBase from '@dojo/framework/core/WidgetBase';\nimport { v, w } from '@dojo/framework/core/vdom';\nimport ThemedMixin, { theme } from '@dojo/framework/core/mixins/Themed';\nimport { DNode, VNodeProperties } from '@dojo/framework/core/interfaces';\nimport renderer from '@dojo/framework/core/vdom';\n\nimport { GridPages, ColumnConfig, SelectionType } from './interfaces';\nimport PlaceholderRow from './PlaceholderRow';\nimport Row from './Row';\n\nimport * as fixedCss from './styles/body.m.css';\nimport * as css from '../theme/grid-body.m.css';\nimport { diffProperty } from '@dojo/framework/core/decorators/diffProperty';\nimport { auto, reference } from '@dojo/framework/core/diff';\n\nexport interface BodyProperties<S> {\n\t/** The total number of rows */\n\ttotalRows?: number;\n\t/** The number of elements to a page */\n\tpageSize: number;\n\t/** A list of paginated grids */\n\tpages: GridPages<S>;\n\t/** The height (in pixels) */\n\theight: number;\n\t/** The width (in pixels) */\n\twidth?: number;\n\t/** Configuration for grid columns (id, title, properties, and custom renderer) */\n\tcolumnConfig: ColumnConfig[];\n\t/** Custom renderer for the placeholder row used while data is loaded */\n\tplaceholderRowRenderer?: (index: number) => DNode;\n\t/** Used to fetch additional pages of information */\n\tfetcher: (page: number, pageSize: number) => void;\n\t/** Called when a cell is updated */\n\tupdater: (page: number, rowNumber: number, columnId: string, value: string) => void;\n\t/** Called when the page changes */\n\tpageChange: (page: number) => void;\n\t/** Handler for scroll events */\n\tonScroll?: (value: number) => void;\n\t/** Calculated column widths */\n\tcolumnWidths?: { [index: string]: number };\n\t/** handler for row selection */\n\tonRowSelect?: (index: number, type: SelectionType) => void;\n\t/** array of selected rows */\n\tselectedRows?: number[];\n}\n\nconst offscreen = (dnode: DNode) => {\n\tconst r = renderer(() =>\n\t\tw(\n\t\t\tclass extends WidgetBase {\n\t\t\t\trender() {\n\t\t\t\t\treturn dnode;\n\t\t\t\t}\n\t\t\t},\n\t\t\t{}\n\t\t)\n\t);\n\tconst div = global.document.createElement('div');\n\tdiv.style.position = 'absolute';\n\tglobal.document.body.appendChild(div);\n\tr.mount({ domNode: div, sync: true });\n\tconst dimensions = div.getBoundingClientRect();\n\tglobal.document.body.removeChild(div);\n\treturn dimensions;\n};\n\nconst defaultPlaceholderRowRenderer = (index: number) => {\n\treturn w(PlaceholderRow, { key: index });\n};\n\n@theme(css)\n@diffProperty('pages', reference)\nexport default class Body<S> extends ThemedMixin(WidgetBase)<BodyProperties<S>> {\n\tprivate _rowHeight!: number;\n\tprivate _rowsInView!: number;\n\tprivate _renderPageSize!: number;\n\tprivate _start = 0;\n\tprivate _end = 100;\n\tprivate _resetScroll = false;\n\n\tprivate _updater(rowNumber: number, columnId: string, value: any) {\n\t\tconst page = Math.max(Math.ceil(rowNumber / this.properties.pageSize), 1);\n\t\tconst pageItemNumber = rowNumber - (page - 1) * this.properties.pageSize;\n\t\tthis.properties.updater(page, pageItemNumber, columnId, value);\n\t}\n\n\tprivate _onScroll(event: UIEvent) {\n\t\tconst { totalRows = 0, onScroll } = this.properties;\n\t\tconst scrollTop = (event.target as HTMLElement).scrollTop;\n\t\tconst scrollLeft = (event.target as HTMLElement).scrollLeft;\n\t\tconst topRow = Math.round(scrollTop / this._rowHeight);\n\t\tconst bottomRow = topRow + this._rowsInView;\n\t\tif (topRow <= this._start) {\n\t\t\tthis._start = Math.max(0, topRow - this._renderPageSize);\n\t\t\tthis._end = Math.min(totalRows, this._start + this._renderPageSize * 2);\n\t\t}\n\t\tif (bottomRow >= this._end) {\n\t\t\tthis._start = Math.min(topRow, totalRows - this._renderPageSize);\n\t\t\tthis._end = Math.min(totalRows, this._start + this._renderPageSize * 2);\n\t\t}\n\t\tonScroll && onScroll(scrollLeft);\n\t\tthis.invalidate();\n\t}\n\n\t@diffProperty('totalRows', auto)\n\tprotected _onDiffTotalRows() {\n\t\tthis._start = 0;\n\t\tthis._end = 100;\n\t\tthis._resetScroll = true;\n\t}\n\n\tprivate _renderRows(start: number, end: number) {\n\t\tconst {\n\t\t\tpageSize,\n\t\t\tfetcher,\n\t\t\tpages,\n\t\t\tcolumnConfig,\n\t\t\tplaceholderRowRenderer = defaultPlaceholderRowRenderer,\n\t\t\tpageChange,\n\t\t\ttotalRows,\n\t\t\ttheme,\n\t\t\tclasses,\n\t\t\tcolumnWidths,\n\t\t\tonRowSelect,\n\t\t\tselectedRows = []\n\t\t} = this.properties;\n\n\t\tconst startPage = Math.max(Math.ceil(start / pageSize), 1);\n\t\tconst endPage = Math.ceil(end / pageSize);\n\n\t\tlet data = pages[`page-${startPage}`] || [];\n\n\t\tif (!data.length && (totalRows === undefined || totalRows > 0)) {\n\t\t\tfetcher(startPage, pageSize);\n\t\t}\n\n\t\tif (startPage !== endPage) {\n\t\t\tconst endData = pages[`page-${endPage}`] || [];\n\t\t\tif (!endData.length) {\n\t\t\t\tfetcher(endPage, pageSize);\n\t\t\t}\n\t\t\tconst midScreenPage = Math.max(Math.ceil((start + this._rowsInView / 2) / pageSize), 1);\n\t\t\tpageChange(midScreenPage);\n\t\t\tdata = [...data, ...endData];\n\t\t} else {\n\t\t\tpageChange(startPage);\n\t\t}\n\n\t\tconst rows: DNode[] = [];\n\n\t\tfor (let i = start; i < end; i++) {\n\t\t\tconst offset = i - (startPage * pageSize - pageSize);\n\t\t\tconst item = data[offset];\n\t\t\tif (item) {\n\t\t\t\trows.push(\n\t\t\t\t\tw(Row, {\n\t\t\t\t\t\tid: i,\n\t\t\t\t\t\tkey: i,\n\t\t\t\t\t\ttheme,\n\t\t\t\t\t\tclasses,\n\t\t\t\t\t\titem,\n\t\t\t\t\t\tcolumnConfig,\n\t\t\t\t\t\tupdater: this._updater,\n\t\t\t\t\t\tcolumnWidths,\n\t\t\t\t\t\tonRowSelect: onRowSelect\n\t\t\t\t\t\t\t? (type: SelectionType) => {\n\t\t\t\t\t\t\t\t\tonRowSelect && onRowSelect(i, type);\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\tselected: selectedRows.indexOf(i) !== -1\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tif (totalRows === undefined || (i > -1 && i < totalRows)) {\n\t\t\t\t\trows.push(placeholderRowRenderer(i));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn rows;\n\t}\n\n\tprotected render(): DNode {\n\t\tconst {\n\t\t\tplaceholderRowRenderer = defaultPlaceholderRowRenderer,\n\t\t\ttotalRows = 0,\n\t\t\tpageSize,\n\t\t\theight,\n\t\t\twidth,\n\t\t\tcolumnWidths\n\t\t} = this.properties;\n\n\t\tconst rowWidth =\n\t\t\tcolumnWidths &&\n\t\t\tObject.keys(columnWidths).reduce((rowWidth, key) => {\n\t\t\t\treturn rowWidth + columnWidths[key];\n\t\t\t}, 0);\n\n\t\tif (!this._rowHeight) {\n\t\t\tconst firstRow = placeholderRowRenderer(0);\n\t\t\tconst dimensions = offscreen(firstRow);\n\t\t\tthis._rowHeight = dimensions.height;\n\t\t\tthis._rowsInView = Math.ceil(height / this._rowHeight);\n\t\t\tthis._renderPageSize = this._rowsInView * 2;\n\t\t}\n\n\t\tconst rows: DNode[] = this._renderRows(this._start, this._end);\n\t\tconst topPaddingHeight = this._rowHeight * this._start;\n\t\tlet bottomPaddingHeight = 0;\n\t\tif (totalRows >= pageSize) {\n\t\t\tbottomPaddingHeight =\n\t\t\t\ttotalRows * this._rowHeight -\n\t\t\t\ttopPaddingHeight -\n\t\t\t\t(this._end - this._start) * this._rowHeight;\n\t\t}\n\n\t\tlet containerProperties: VNodeProperties = {\n\t\t\tkey: 'root',\n\t\t\tclasses: [this.theme(css.root), fixedCss.rootFixed],\n\t\t\trole: 'rowgroup',\n\t\t\tonscroll: this._onScroll,\n\t\t\tstyles: width\n\t\t\t\t? { height: `${height}px`, width: `${width}px` }\n\t\t\t\t: { height: `${height}px` }\n\t\t};\n\n\t\tif (this._resetScroll) {\n\t\t\tthis._resetScroll = false;\n\t\t\tcontainerProperties = {\n\t\t\t\t...containerProperties,\n\t\t\t\tscrollTop: 0\n\t\t\t};\n\t\t}\n\n\t\treturn v('div', containerProperties, [\n\t\t\tv('div', { styles: rowWidth ? { width: `${rowWidth}px` } : {} }, [\n\t\t\t\tv('div', { key: 'top', styles: { height: `${topPaddingHeight}px` } }),\n\t\t\t\t...rows,\n\t\t\t\tv('div', {\n\t\t\t\t\tkey: 'bottom',\n\t\t\t\t\tstyles: { height: `${bottomPaddingHeight}px` }\n\t\t\t\t})\n\t\t\t])\n\t\t]);\n\t}\n}\n","import WidgetBase from '@dojo/framework/core/WidgetBase';\nimport { v } from '@dojo/framework/core/vdom';\nimport ThemedMixin, { theme } from '@dojo/framework/core/mixins/Themed';\nimport { DNode } from '@dojo/framework/core/interfaces';\n\nimport * as css from '../theme/grid-footer.m.css';\n\nexport interface FooterProperties {\n\ttotal?: number;\n\tpage: number;\n\tpageSize: number;\n}\n\n@theme(css)\nexport default class Footer extends ThemedMixin(WidgetBase)<FooterProperties> {\n\tprotected render(): DNode {\n\t\tconst { total, page, pageSize } = this.properties;\n\t\tconst footer =\n\t\t\ttotal !== undefined\n\t\t\t\t? `Page ${page} of ${Math.ceil(total / pageSize)}. Total rows ${total}`\n\t\t\t\t: `Page ${page} of ?`;\n\t\treturn v('div', { classes: this.theme(css.root) }, [footer]);\n\t}\n}\n","import { WidgetBase } from '@dojo/framework/core/WidgetBase';\nimport { ThemedMixin, theme } from '@dojo/framework/core/mixins/Themed';\nimport { v } from '@dojo/framework/core/vdom';\n\nimport * as fixedCss from './styles/paginated-footer.m.css';\nimport * as css from '../theme/grid-paginated-footer.m.css';\n\nexport interface PaginatedFooterProperties {\n\ttotal?: number;\n\tpage: number;\n\tpageSize: number;\n\tonPageChange: (page: number) => void;\n}\n\n@theme(css)\nexport default class PaginatedFooter extends ThemedMixin(WidgetBase)<PaginatedFooterProperties> {\n\tprivate _renderPageControl(page: number) {\n\t\tconst { onPageChange, page: currentPage } = this.properties;\n\t\tconst active = page === currentPage;\n\n\t\treturn v(\n\t\t\t'button',\n\t\t\t{\n\t\t\t\tkey: active ? 'current' : `${page}`,\n\t\t\t\tdisabled: active,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tonPageChange(page);\n\t\t\t\t},\n\t\t\t\t'aria-current': active ? 'page' : undefined,\n\t\t\t\t'aria-label': active ? `Current Page, Page ${page}` : `Goto Page ${page}`,\n\t\t\t\tclasses: [this.theme(css.pageNumber), active && this.theme(css.active)]\n\t\t\t},\n\t\t\t[`${page}`]\n\t\t);\n\t}\n\n\tprivate _renderPaginationControls(totalPages: number) {\n\t\tconst { page } = this.properties;\n\t\tif (page < 4) {\n\t\t\treturn [\n\t\t\t\tthis._renderPageControl(1),\n\t\t\t\ttotalPages > 1 && this._renderPageControl(2),\n\t\t\t\ttotalPages > 2 && this._renderPageControl(3),\n\t\t\t\ttotalPages > 3 && this._renderPageControl(4),\n\t\t\t\ttotalPages > 4 && this._renderPageControl(5),\n\t\t\t\ttotalPages > 5 &&\n\t\t\t\t\tv(\n\t\t\t\t\t\t'span',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: 'more',\n\t\t\t\t\t\t\t'aria-hidden': true,\n\t\t\t\t\t\t\tclasses: [this.theme(css.more), fixedCss.moreFixed]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t['...']\n\t\t\t\t\t),\n\t\t\t\ttotalPages > 5 && this._renderPageControl(totalPages)\n\t\t\t];\n\t\t} else if (page > totalPages - 3) {\n\t\t\treturn [\n\t\t\t\tthis._renderPageControl(1),\n\t\t\t\tv(\n\t\t\t\t\t'span',\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'less',\n\t\t\t\t\t\t'aria-hidden': true,\n\t\t\t\t\t\tclasses: [this.theme(css.more), fixedCss.moreFixed]\n\t\t\t\t\t},\n\t\t\t\t\t['...']\n\t\t\t\t),\n\t\t\t\tthis._renderPageControl(totalPages - 4),\n\t\t\t\tthis._renderPageControl(totalPages - 3),\n\t\t\t\tthis._renderPageControl(totalPages - 2),\n\t\t\t\tthis._renderPageControl(totalPages - 1),\n\t\t\t\tthis._renderPageControl(totalPages)\n\t\t\t];\n\t\t} else {\n\t\t\treturn [\n\t\t\t\tthis._renderPageControl(1),\n\t\t\t\tv(\n\t\t\t\t\t'span',\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'less',\n\t\t\t\t\t\t'aria-hidden': true,\n\t\t\t\t\t\tclasses: [this.theme(css.more), fixedCss.moreFixed]\n\t\t\t\t\t},\n\t\t\t\t\t['...']\n\t\t\t\t),\n\t\t\t\tthis._renderPageControl(page - 1),\n\t\t\t\tthis._renderPageControl(page),\n\t\t\t\tthis._renderPageControl(page + 1),\n\t\t\t\tv(\n\t\t\t\t\t'span',\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'more',\n\t\t\t\t\t\t'aria-hidden': true,\n\t\t\t\t\t\tclasses: [this.theme(css.more), fixedCss.moreFixed]\n\t\t\t\t\t},\n\t\t\t\t\t['...']\n\t\t\t\t),\n\t\t\t\tthis._renderPageControl(totalPages)\n\t\t\t];\n\t\t}\n\t}\n\n\tprotected render() {\n\t\tconst { onPageChange, page, total, pageSize } = this.properties;\n\t\tif (total === undefined) {\n\t\t\treturn null;\n\t\t}\n\t\tconst totalPages = Math.ceil(total / pageSize);\n\t\tconst from = page === 1 ? '1' : `${(page - 1) * pageSize + 1}`;\n\t\tconst to = page === 1 ? pageSize : page * pageSize;\n\t\tconst controls = total ? this._renderPaginationControls(totalPages) : [];\n\t\treturn v('div', { classes: [this.theme(css.root), fixedCss.rootFixed] }, [\n\t\t\tv(\n\t\t\t\t'div',\n\t\t\t\t{\n\t\t\t\t\tclasses: [\n\t\t\t\t\t\tfixedCss.containerFixed,\n\t\t\t\t\t\tthis.theme(css.details),\n\t\t\t\t\t\tfixedCss.detailsFixed\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t[total ? `${from} - ${total < to ? total : to} of ${total} Results` : '0 Results']\n\t\t\t),\n\t\t\tv(\n\t\t\t\t'nav',\n\t\t\t\t{\n\t\t\t\t\trole: 'navigation',\n\t\t\t\t\t'aria-label': 'Pagination Navigation',\n\t\t\t\t\tclasses: [this.theme(css.pagination)]\n\t\t\t\t},\n\t\t\t\t[\n\t\t\t\t\tv(\n\t\t\t\t\t\t'ul',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclasses: [\n\t\t\t\t\t\t\t\tfixedCss.containerFixed,\n\t\t\t\t\t\t\t\tthis.theme(css.paginationList),\n\t\t\t\t\t\t\t\tfixedCss.paginationListFixed\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tv('li', { classes: [fixedCss.itemFixed, this.theme(css.item)] }, [\n\t\t\t\t\t\t\t\ttotalPages > 1 &&\n\t\t\t\t\t\t\t\t\tv(\n\t\t\t\t\t\t\t\t\t\t'button',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tkey: 'previous',\n\t\t\t\t\t\t\t\t\t\t\tdisabled: page === 1,\n\t\t\t\t\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\t\t\t\t\tonPageChange(page - 1);\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t'aria-label': `Goto Page ${page - 1}`,\n\t\t\t\t\t\t\t\t\t\t\tclasses: [\n\t\t\t\t\t\t\t\t\t\t\t\tthis.theme(css.pageNav),\n\t\t\t\t\t\t\t\t\t\t\t\tfixedCss.pageNavFixed\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t['<']\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t...controls,\n\t\t\t\t\t\t\t\ttotalPages > 1 &&\n\t\t\t\t\t\t\t\t\tv(\n\t\t\t\t\t\t\t\t\t\t'button',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tkey: 'next',\n\t\t\t\t\t\t\t\t\t\t\tdisabled: page === totalPages,\n\t\t\t\t\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\t\t\t\t\tonPageChange(page + 1);\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t'aria-label': `Goto Page ${page + 1}`,\n\t\t\t\t\t\t\t\t\t\t\tclasses: [\n\t\t\t\t\t\t\t\t\t\t\t\tthis.theme(css.pageNav),\n\t\t\t\t\t\t\t\t\t\t\t\tfixedCss.pageNavFixed\n\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t['>']\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t])\n\t\t\t\t\t\t]\n\t\t\t\t\t)\n\t\t\t\t]\n\t\t\t)\n\t\t]);\n\t}\n}\n","import WidgetBase from '@dojo/framework/core/WidgetBase';\nimport { v, w } from '@dojo/framework/core/vdom';\nimport ThemedMixin, { theme } from '@dojo/framework/core/mixins/Themed';\nimport { DNode } from '@dojo/framework/core/interfaces';\n\nimport { GridPages, ColumnConfig, SelectionType } from './interfaces';\nimport PlaceholderRow from './PlaceholderRow';\nimport Row from './Row';\n\nimport * as fixedCss from './styles/body.m.css';\nimport * as css from '../theme/grid-body.m.css';\nimport { diffProperty } from '@dojo/framework/core/decorators/diffProperty';\nimport { reference } from '@dojo/framework/core/diff';\n\nexport interface PaginatedBodyProperties<S> {\n\t/** The current page number */\n\tpageNumber: number;\n\t/** A list of paginated grids */\n\tpages: GridPages<S>;\n\t/** The height (in pixels) */\n\theight: number;\n\t/** The width (in pixels) */\n\twidth?: number;\n\t/** The number of elements to a page */\n\tpageSize: number;\n\t/** Configuration for grid columns (id, title, properties, and custom renderer) */\n\tcolumnConfig: ColumnConfig[];\n\t/** Custom renderer for the placeholder row used while data is loaded */\n\tplaceholderRowRenderer?: (index: number) => DNode;\n\t/** Used to fetch additional pages of information */\n\tfetcher: (page: number, pageSize: number) => void;\n\t/** Called when a cell is updated */\n\tupdater: (page: number, rowNumber: number, columnId: string, value: string) => void;\n\t/** Handler for scroll events */\n\tonScroll: (value: number) => void;\n\t/** Calculated column widths */\n\tcolumnWidths?: { [index: string]: number };\n\t/** handler for row selection */\n\tonRowSelect?: (index: number, type: SelectionType) => void;\n\t/** array of selected rows */\n\tselectedRows?: number[];\n}\n\nconst defaultPlaceholderRowRenderer = (index: number) => {\n\treturn w(PlaceholderRow, { key: index });\n};\n\n@theme(css)\n@diffProperty('pages', reference)\nexport default class PaginatedBody<S> extends ThemedMixin(WidgetBase)<PaginatedBodyProperties<S>> {\n\tprivate _updater(rowNumber: number, columnId: string, value: any) {\n\t\tconst page = Math.max(Math.ceil(rowNumber / this.properties.pageSize), 1);\n\t\tconst pageItemNumber = rowNumber - (page - 1) * this.properties.pageSize;\n\t\tthis.properties.updater(page, pageItemNumber, columnId, value);\n\t}\n\n\tprivate _onScroll(event: UIEvent) {\n\t\tconst scrollLeft = (event.target as HTMLElement).scrollLeft;\n\t\tthis.properties.onScroll(scrollLeft);\n\t}\n\n\tprivate _renderRows() {\n\t\tconst {\n\t\t\tpageSize,\n\t\t\tfetcher,\n\t\t\tpages,\n\t\t\tcolumnConfig,\n\t\t\tplaceholderRowRenderer = defaultPlaceholderRowRenderer,\n\t\t\tpageNumber,\n\t\t\ttheme,\n\t\t\tclasses,\n\t\t\tcolumnWidths,\n\t\t\tonRowSelect,\n\t\t\tselectedRows = []\n\t\t} = this.properties;\n\t\tlet data = pages[`page-${pageNumber}`];\n\t\tif (!data) {\n\t\t\tfetcher(pageNumber, pageSize);\n\t\t}\n\t\tlet rows: DNode[] = [];\n\t\tconst rowCount = data ? data.length : pageSize;\n\t\tfor (let i = 0; i < rowCount; i++) {\n\t\t\tif (!data) {\n\t\t\t\trows.push(placeholderRowRenderer(i));\n\t\t\t} else {\n\t\t\t\trows.push(\n\t\t\t\t\tw(Row, {\n\t\t\t\t\t\tid: i,\n\t\t\t\t\t\tkey: i,\n\t\t\t\t\t\ttheme,\n\t\t\t\t\t\tclasses,\n\t\t\t\t\t\titem: data[i],\n\t\t\t\t\t\tcolumnConfig,\n\t\t\t\t\t\tcolumnWidths,\n\t\t\t\t\t\tupdater: this._updater,\n\t\t\t\t\t\tonRowSelect: onRowSelect\n\t\t\t\t\t\t\t? (type: SelectionType) => {\n\t\t\t\t\t\t\t\t\tonRowSelect && onRowSelect(i, type);\n\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\tselected: selectedRows.indexOf(i) !== -1\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn rows;\n\t}\n\n\tprotected render(): DNode {\n\t\tconst { height, width, columnWidths } = this.properties;\n\n\t\tconst rowWidth =\n\t\t\tcolumnWidths &&\n\t\t\tObject.keys(columnWidths).reduce((rowWidth, key) => {\n\t\t\t\treturn rowWidth + columnWidths[key];\n\t\t\t}, 0);\n\n\t\treturn v(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\tkey: 'root',\n\t\t\t\tclasses: [this.theme(css.root), fixedCss.rootFixed],\n\t\t\t\trole: 'rowgroup',\n\t\t\t\tonscroll: this._onScroll,\n\t\t\t\tstyles: width\n\t\t\t\t\t? { height: `${height}px`, width: `${width}px` }\n\t\t\t\t\t: { height: `${height}px` }\n\t\t\t},\n\t\t\t[\n\t\t\t\tv('div', { styles: rowWidth ? { width: `${rowWidth}px` } : {} }, [\n\t\t\t\t\tv('div'),\n\t\t\t\t\t...this._renderRows()\n\t\t\t\t])\n\t\t\t]\n\t\t);\n\t}\n}\n","import WidgetBase from '@dojo/framework/core/WidgetBase';\nimport { v, w } from '@dojo/framework/core/vdom';\nimport ThemedMixin, { theme, ThemedProperties } from '@dojo/framework/core/mixins/Themed';\nimport diffProperty from '@dojo/framework/core/decorators/diffProperty';\nimport { DNode } from '@dojo/framework/core/interfaces';\nimport { reference } from '@dojo/framework/core/diff';\nimport { Store } from '@dojo/framework/stores/Store';\nimport Dimensions from '@dojo/framework/core/meta/Dimensions';\nimport Resize from '@dojo/framework/core/meta/Resize';\nimport './utils';\n\nimport { Fetcher, ColumnConfig, GridState, Updater } from './interfaces';\nimport {\n\tfetcherProcess,\n\tpageChangeProcess,\n\tsortProcess,\n\tfilterProcess,\n\tupdaterProcess,\n\tselectionProcess\n} from './processes';\n\nimport Header, { SortRenderer, FilterRenderer } from './Header';\nimport Body from './Body';\nimport Footer from './Footer';\nimport PaginatedFooter from './PaginatedFooter';\nimport PaginatedBody from './PaginatedBody';\nimport * as css from '../theme/grid.m.css';\nimport * as fixedCss from './styles/grid.m.css';\n\nconst defaultGridMeta = {\n\tpage: 1,\n\ttotal: undefined,\n\tsort: undefined,\n\tfilter: undefined,\n\tisSorting: false,\n\teditedRow: undefined,\n\tselection: []\n};\n\nexport interface CustomRenderers {\n\tsortRenderer?: SortRenderer;\n\tfilterRenderer?: FilterRenderer;\n}\n\nexport interface GridProperties<S> extends ThemedProperties {\n\t/** The full configuration for the grid columns */\n\tcolumnConfig: ColumnConfig[];\n\t/** function that returns results for the page reflected */\n\tfetcher: Fetcher<S>;\n\t/** gird height in px */\n\theight: number;\n\t/** function that updates an item from a edit made in the grid */\n\tupdater?: Updater<S>;\n\t/** options store, if no store is passed each grid will factory their own grid */\n\tstore?: Store<S>;\n\t/** the path to store the grid data in */\n\tstoreId?: string;\n\t/** set of custom renderers for sorting or filtering */\n\tcustomRenderers?: CustomRenderers;\n\t/** when set uses traditional pagination */\n\tpagination?: boolean;\n\t/** handler for row selection */\n\tonRowSelect?: (rowData: S[]) => void;\n}\n\nconst MIN_COLUMN_WIDTH = 100;\n\n@theme(css)\nexport default class Grid<S> extends ThemedMixin(WidgetBase)<GridProperties<S>> {\n\tprivate _store = new Store<GridState<S>>();\n\tprivate _handle: any;\n\tprivate _scrollLeft = 0;\n\tprivate _pageSize = 100;\n\tprivate _columnWidths: { [index: string]: number } | undefined;\n\tprivate _gridWidth = 0;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis._handle = this._store.onChange(this._store.path('_grid'), this.invalidate.bind(this));\n\t}\n\n\t@diffProperty('store', reference)\n\tprotected onStoreProperty(previous: any, current: any) {\n\t\tconst { storeId = '_grid' } = current;\n\t\tthis._handle.remove();\n\t\tthis._store = current.store;\n\t\tthis._handle = this._store.onChange(this._store.path(storeId), () => {\n\t\t\tthis.invalidate();\n\t\t});\n\t}\n\n\tprivate _getProperties() {\n\t\tconst { storeId = '_grid' } = this.properties;\n\t\treturn { ...this.properties, storeId };\n\t}\n\n\tprivate _getBodyDimensions() {\n\t\tconst { height } = this.properties;\n\t\tconst headerHeight = this.meta(Dimensions).get('header');\n\t\tconst headerWrapper = this.meta(Dimensions).get('header-wrapper');\n\t\tconst footerHeight = this.meta(Dimensions).get('footer');\n\t\treturn {\n\t\t\theaderWidth: headerWrapper.size.width,\n\t\t\tbodyHeight: height - headerHeight.size.height - footerHeight.size.height,\n\t\t\tbodyWidth: headerHeight.size.width\n\t\t};\n\t}\n\n\tprivate _onColumnResize(index: number, value: number) {\n\t\tconst { columnConfig } = this.properties;\n\t\tif (!this._columnWidths) {\n\t\t\treturn;\n\t\t}\n\t\tconst currentColumnWidth = this._columnWidths[columnConfig[index].id];\n\t\tif (currentColumnWidth <= MIN_COLUMN_WIDTH && value < 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (currentColumnWidth + value <= MIN_COLUMN_WIDTH) {\n\t\t\tvalue = value - (currentColumnWidth + value - MIN_COLUMN_WIDTH);\n\t\t}\n\n\t\tthis._columnWidths = {\n\t\t\t...this._columnWidths,\n\t\t\t[columnConfig[index].id]: currentColumnWidth + value\n\t\t};\n\t\tthis.invalidate();\n\t}\n\n\tprivate _fetcher(page: number, pageSize: number) {\n\t\tconst { storeId, fetcher } = this._getProperties();\n\t\tfetcherProcess(this._store)({ id: storeId, fetcher, page, pageSize });\n\t}\n\n\tprivate _sorter(columnId: string, direction: 'asc' | 'desc') {\n\t\tconst { storeId, fetcher, onRowSelect } = this._getProperties();\n\t\tif (onRowSelect) {\n\t\t\tconst selectedIndexes =\n\t\t\t\tthis._store.get(this._store.path(storeId, 'meta', 'selection')) || [];\n\t\t\tselectedIndexes.length && onRowSelect([]);\n\t\t}\n\t\tsortProcess(this._store)({ id: storeId, fetcher, columnId, direction });\n\t}\n\n\tprivate _filterer(columnId: string, value: any) {\n\t\tconst { storeId, fetcher, onRowSelect } = this._getProperties();\n\t\tif (onRowSelect) {\n\t\t\tconst selectedIndexes =\n\t\t\t\tthis._store.get(this._store.path(storeId, 'meta', 'selection')) || [];\n\t\t\tselectedIndexes.length && onRowSelect([]);\n\t\t}\n\t\tfilterProcess(this._store)({ id: storeId, fetcher, filterOptions: { columnId, value } });\n\t}\n\n\tprivate _updater(page: number, rowNumber: number, columnId: string, value: string) {\n\t\tconst { storeId, updater } = this._getProperties();\n\t\tupdaterProcess(this._store)({ id: storeId, page, columnId, rowNumber, value, updater });\n\t}\n\n\tprivate _pageChange(page: number) {\n\t\tconst { storeId } = this._getProperties();\n\t\tpageChangeProcess(this._store)({ id: storeId, page });\n\t}\n\n\tprivate _selection(index: number, type: any) {\n\t\tconst { storeId, onRowSelect } = this._getProperties();\n\t\tselectionProcess(this._store)({ id: storeId, index, type });\n\t\tconst selectedIndexes =\n\t\t\tthis._store.get(this._store.path(storeId, 'meta', 'selection')) || [];\n\t\tconst items = [];\n\t\tconst data = this._store.get(this._store.path(storeId, 'data', 'pages'));\n\t\tfor (let i = 0; i < selectedIndexes.length; i++) {\n\t\t\tconst selectedIndex = selectedIndexes[i];\n\t\t\tconst pageNumber = Math.floor(selectedIndex / this._pageSize) + 1;\n\t\t\tconst itemIndex = selectedIndex - (pageNumber - 1) * this._pageSize;\n\t\t\tif (data[`page-${pageNumber}`]) {\n\t\t\t\titems.push(data[`page-${pageNumber}`][itemIndex]);\n\t\t\t}\n\t\t}\n\t\tonRowSelect && onRowSelect(items);\n\t}\n\n\tprivate _onScroll(value: number) {\n\t\tthis._scrollLeft = value;\n\t\tthis.invalidate();\n\t}\n\n\tprotected render(): DNode {\n\t\tconst {\n\t\t\tcolumnConfig,\n\t\t\tstoreId,\n\t\t\ttheme,\n\t\t\tclasses,\n\t\t\tpagination = false,\n\t\t\tcustomRenderers = {},\n\t\t\tonRowSelect\n\t\t} = this._getProperties();\n\t\tconst { sortRenderer, filterRenderer } = customRenderers;\n\n\t\tif (!columnConfig || !this.properties.fetcher) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst meta = this._store.get(this._store.path(storeId, 'meta')) || defaultGridMeta;\n\t\tconst pages = this._store.get(this._store.path(storeId, 'data', 'pages')) || {};\n\t\tconst hasFilters = columnConfig.some((config) => !!config.filterable);\n\t\tconst hasResizableColumns = columnConfig.some((config) => !!config.resizable);\n\t\tconst { bodyHeight, bodyWidth, headerWidth } = this._getBodyDimensions();\n\t\tthis.meta(Resize).get('root');\n\n\t\tif (bodyWidth && headerWidth && hasResizableColumns && !this._columnWidths) {\n\t\t\tconst width = headerWidth / columnConfig.length;\n\t\t\tthis._columnWidths = columnConfig.reduce(\n\t\t\t\t(sizes, { id }) => {\n\t\t\t\t\tsizes[id] = Math.max(MIN_COLUMN_WIDTH, width);\n\t\t\t\t\treturn sizes;\n\t\t\t\t},\n\t\t\t\t{} as any\n\t\t\t);\n\t\t\tthis._gridWidth = Math.max(bodyWidth, MIN_COLUMN_WIDTH * columnConfig.length);\n\t\t}\n\n\t\treturn v(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\tkey: 'root',\n\t\t\t\tclasses: [this.theme(css.root), fixedCss.rootFixed],\n\t\t\t\trole: 'table',\n\t\t\t\t'aria-rowcount': meta.total ? `${meta.total}` : null\n\t\t\t},\n\t\t\t[\n\t\t\t\tv(\n\t\t\t\t\t'div',\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'header',\n\t\t\t\t\t\tscrollLeft: this._scrollLeft,\n\t\t\t\t\t\tstyles:\n\t\t\t\t\t\t\thasResizableColumns && this._gridWidth\n\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\twidth: `${this._gridWidth}px`\n\t\t\t\t\t\t\t\t  }\n\t\t\t\t\t\t\t\t: {},\n\t\t\t\t\t\tclasses: [\n\t\t\t\t\t\t\tthis.theme(css.header),\n\t\t\t\t\t\t\tfixedCss.headerFixed,\n\t\t\t\t\t\t\thasFilters ? this.theme(css.filterGroup) : null\n\t\t\t\t\t\t],\n\t\t\t\t\t\trow: 'rowgroup'\n\t\t\t\t\t},\n\t\t\t\t\t[\n\t\t\t\t\t\tv('div', { key: 'header-wrapper' }, [\n\t\t\t\t\t\t\tw(Header, {\n\t\t\t\t\t\t\t\tkey: 'header-row',\n\t\t\t\t\t\t\t\ttheme,\n\t\t\t\t\t\t\t\tcolumnWidths: this._columnWidths,\n\t\t\t\t\t\t\t\tclasses,\n\t\t\t\t\t\t\t\tcolumnConfig,\n\t\t\t\t\t\t\t\tsorter: this._sorter,\n\t\t\t\t\t\t\t\tsort: meta.sort,\n\t\t\t\t\t\t\t\tfilter: meta.filter,\n\t\t\t\t\t\t\t\tfilterer: this._filterer,\n\t\t\t\t\t\t\t\tsortRenderer,\n\t\t\t\t\t\t\t\tfilterRenderer,\n\t\t\t\t\t\t\t\tonColumnResize: this._onColumnResize\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t])\n\t\t\t\t\t]\n\t\t\t\t),\n\t\t\t\tpagination\n\t\t\t\t\t? w(PaginatedBody, {\n\t\t\t\t\t\t\tkey: 'paginated-body',\n\t\t\t\t\t\t\ttheme,\n\t\t\t\t\t\t\tclasses,\n\t\t\t\t\t\t\tpages,\n\t\t\t\t\t\t\tcolumnWidths: this._columnWidths,\n\t\t\t\t\t\t\tpageNumber: meta.page,\n\t\t\t\t\t\t\tpageSize: this._pageSize,\n\t\t\t\t\t\t\tonScroll: this._onScroll,\n\t\t\t\t\t\t\tcolumnConfig,\n\t\t\t\t\t\t\tfetcher: this._fetcher,\n\t\t\t\t\t\t\tupdater: this._updater,\n\t\t\t\t\t\t\theight: bodyHeight,\n\t\t\t\t\t\t\twidth: hasResizableColumns ? this._gridWidth : undefined,\n\t\t\t\t\t\t\tonRowSelect: onRowSelect ? this._selection : undefined,\n\t\t\t\t\t\t\tselectedRows: meta.selection\n\t\t\t\t\t  })\n\t\t\t\t\t: w(Body, {\n\t\t\t\t\t\t\tkey: 'body',\n\t\t\t\t\t\t\ttheme,\n\t\t\t\t\t\t\tclasses,\n\t\t\t\t\t\t\tpages,\n\t\t\t\t\t\t\tcolumnWidths: this._columnWidths,\n\t\t\t\t\t\t\ttotalRows: meta.total,\n\t\t\t\t\t\t\tpageSize: this._pageSize,\n\t\t\t\t\t\t\tcolumnConfig,\n\t\t\t\t\t\t\tfetcher: this._fetcher,\n\t\t\t\t\t\t\tpageChange: this._pageChange,\n\t\t\t\t\t\t\tupdater: this._updater,\n\t\t\t\t\t\t\tonScroll: this._onScroll,\n\t\t\t\t\t\t\theight: bodyHeight,\n\t\t\t\t\t\t\twidth: hasResizableColumns ? this._gridWidth : undefined,\n\t\t\t\t\t\t\tonRowSelect: onRowSelect ? this._selection : undefined,\n\t\t\t\t\t\t\tselectedRows: meta.selection\n\t\t\t\t\t  }),\n\t\t\t\tv('div', { key: 'footer' }, [\n\t\t\t\t\tpagination\n\t\t\t\t\t\t? w(PaginatedFooter, {\n\t\t\t\t\t\t\t\ttheme,\n\t\t\t\t\t\t\t\tclasses,\n\t\t\t\t\t\t\t\ttotal: meta.total,\n\t\t\t\t\t\t\t\tpage: meta.page,\n\t\t\t\t\t\t\t\tpageSize: this._pageSize,\n\t\t\t\t\t\t\t\tonPageChange: (page: number) => {\n\t\t\t\t\t\t\t\t\tthis._pageChange(page);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t  })\n\t\t\t\t\t\t: w(Footer, {\n\t\t\t\t\t\t\t\tkey: 'footer-row',\n\t\t\t\t\t\t\t\ttheme,\n\t\t\t\t\t\t\t\tclasses,\n\t\t\t\t\t\t\t\ttotal: meta.total,\n\t\t\t\t\t\t\t\tpage: meta.page,\n\t\t\t\t\t\t\t\tpageSize: this._pageSize\n\t\t\t\t\t\t  })\n\t\t\t\t])\n\t\t\t]\n\t\t);\n\t}\n}\n","import global from '../global';\nimport has from '../../core/has';\n\nexport default function wrapper(nameOnGlobal: string, constructor = false, bind = false): any {\n\tif (has('test')) {\n\t\tif (constructor) {\n\t\t\treturn function(...args: any[]) {\n\t\t\t\treturn new global[nameOnGlobal](...args);\n\t\t\t};\n\t\t} else {\n\t\t\treturn function(...args: any[]) {\n\t\t\t\treturn global[nameOnGlobal](...args);\n\t\t\t};\n\t\t}\n\t}\n\n\treturn bind ? global[nameOnGlobal].bind(global) : global[nameOnGlobal];\n}\n","import { v, w } from '@dojo/framework/core/vdom';\nimport WidgetBase from '@dojo/framework/core/WidgetBase';\nimport Grid from '@dojo/widgets/grid';\nimport { createFetcher } from '@dojo/widgets/grid/utils';\nimport ToolBar from '@dojo/widgets/toolbar';\nimport IconX from '.././Icon/Icon';\n\nexport interface ContactsProperties {\n\turl: string;\n}\n\nexport default class Contacts extends WidgetBase <ContactsProperties> {\n\n\tprivate columnConfig = [\n\t{\n\t\tid: 'lfname',\n\t\ttitle: 'Nombre',\n\t\tfilterable: true,\n\t\tsortable: true,\n\t\t//editable: true,\n\t\tresizable: true\n\t},\t\n\t{\n\t\tid: 'identificationtype_label',\n\t\ttitle: 'Tipo ID',\n\t\tfilterable: true,\n\t\tsortable: true,\n\t\t//editable: true,\n\t\tresizable: true\n\t},\n\t{\n\t\tid: 'identification',\n\t\ttitle: 'Identificación',\n\t\tfilterable: true,\n\t\tsortable: true,\n\t\t//editable: true,\n\t\tresizable: true\n\t},\n\t{\n\t\tid: 'gender_label',\n\t\ttitle: 'Género',\n\t\tfilterable: true,\n\t\tsortable: true,\n\t\t//editable: true,\n\t\tresizable: true\n\t},\n\n\t{\n\t\tid: 'contactype_label',\n\t\ttitle: 'Tipo Contacto',\n\t\tfilterable: true,\n\t\tsortable: true,\n\t\t//editable: true,\n\t\tresizable: true\n\t},\n\t{\n\t\tid: 'note',\n\t\ttitle: 'Notas',\n\t\t//filterable: true,\n\t\tsortable: true,\n\t\t//editable: true,\n\t\tresizable: true\n\t}\n\t];\n\n\tprivate _fetcher: any;\n\n\tasync onAttach() {\n\t\tconst res = await fetch(\n\t\t\t\"/contacts_r\",{\n\t\t\t\tmethod: 'POST',\n\t\t\t\tbody: JSON.stringify({idaccount: localStorage.getItem('idaccount')}),\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t}\n\t\t\t}\n\t\t\t);\n\t\tlet data = await res.json();\n\t\tconsole.log(data);\n\t\tthis._fetcher = createFetcher(data);\n\t\tthis.invalidate(); \n\t}\n\n\tprotected render(){\n\n\t\treturn v('div', { }, [\n\t\t\tw(ToolBar, {heading: 'CONTACTOS', collapseWidth: 150}, [\n\t\t\t\tw(IconX, {label: 'NUEVO', classes: ['fas', 'fa-user-plus'], ShowLabel: true,\n\t\t\t\t\tonClick: (e)=>{    \n\t\t\t\t\t\twindow.location.href = \"/#contact?idcontact=0&rowkey=0&idaccount=\"+localStorage.getItem('idaccount');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t]),\n\t\t\tv('div', { }, [\n\t\t\t\tthis._fetcher ? w(Grid, {\n\t\t\t\t\tcolumnConfig: this.columnConfig,\n\t\t\t\t\tfetcher: this._fetcher,\n\t\t\t\t\theight: 400,\n\t\t\t\t\tonRowSelect: (items: any[]) => {\n\t\t\t\t\t\tconsole.log(items, this._fetcher)\n\t\t\t\t\t\twindow.location.href = \"/#contact?idcontact=\"+items[0].idcontact+\"&rowkey=\"+items[0].rowkey+\"&idaccount=\"+localStorage.getItem('idaccount');\n\t\t\t\t\t}\n\t\t\t\t}) : null\n\t\t\t\t])\n\t\t\t]);\n\t}\n\n}","import { create, v, w } from '@dojo/framework/core/vdom';\nimport Menu from './Menu';\n\n//import watch from '@dojo/framework/core/decorators/watch';\nimport Contacts from './contacts/Contacts';\n\nimport * as css from './styles/Profile.m.css';\n\nconst factory = create();\n\nexport default factory(function Profile({ properties }) {\n\t//const { username, name } = properties();\n\treturn v('div', { classes: [css.root] }, [\n\t\tw(Menu, {}),\n\t\tw(Contacts, {url: '/contacts'})\n\t\t]);\n});\n","import { FetcherOptions, FetcherResult } from './interfaces';\nimport { findIndex } from '@dojo/framework/shim/array';\n\nexport function sorter(data: any[], { sort }: FetcherOptions): any[] {\n\tconst temp = [...data];\n\tif (sort) {\n\t\ttemp.sort((a, b) => {\n\t\t\tconst left = sort.direction === 'asc' ? b : a;\n\t\t\tconst right = sort.direction === 'asc' ? a : b;\n\t\t\tif (left[sort.columnId] < right[sort.columnId]) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (left[sort.columnId] > right[sort.columnId]) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t});\n\t}\n\treturn temp;\n}\n\nexport function filterer(data: any[], { filter }: FetcherOptions): any[] {\n\tif (filter) {\n\t\treturn data.filter((item) => {\n\t\t\tlet match = true;\n\t\t\tObject.keys(filter).forEach((columnId) => {\n\t\t\t\tif (item[columnId].toLowerCase().indexOf(filter[columnId].toLowerCase()) === -1) {\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn match;\n\t\t});\n\t}\n\treturn [...data];\n}\n\nexport async function createFetcherResult(\n\tdata: any[],\n\tpage: number,\n\tpageSize: number\n): Promise<FetcherResult> {\n\tconst temp = [...data];\n\tconst block = [...temp].splice((page - 1) * pageSize, pageSize);\n\treturn { data: block, meta: { total: temp.length } };\n}\n\nexport function createUpdater<S extends any>(data: S[], idColumn: string = 'id') {\n\treturn (updatedItem: S) => {\n\t\tconst index = findIndex(data, (item) => {\n\t\t\treturn item[idColumn] === updatedItem[idColumn];\n\t\t});\n\t\tdata[index] = updatedItem;\n\t};\n}\n\nexport function createFetcher(data: any[]) {\n\treturn async (\n\t\tpage: number,\n\t\tpageSize: number,\n\t\toptions: FetcherOptions = {}\n\t): Promise<FetcherResult> => {\n\t\treturn createFetcherResult(sorter(filterer(data, options), options), page, pageSize);\n\t};\n}\n","require('B:/Documentos/Desarrollo/mycarlog/mycarlog/opt/mycarlog/frontend/node_modules/@dojo/widgets/grid/styles/body.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/body\",\"rootFixed\":\"body-m__rootFixed__2K95C\"};;","require('B:/Documentos/Desarrollo/mycarlog/mycarlog/opt/mycarlog/frontend/node_modules/@dojo/widgets/theme/grid-body.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid-body\",\"root\":\"grid-body-m__root__1yYLp\"};;","require('B:/Documentos/Desarrollo/mycarlog/mycarlog/opt/mycarlog/frontend/node_modules/@dojo/widgets/theme/grid-header.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid-header\",\"root\":\"grid-header-m__root__10T4d\",\"cell\":\"grid-header-m__cell__14Kc4\",\"sortable\":\"grid-header-m__sortable__2yeMz\",\"sorted\":\"grid-header-m__sorted__2yNUr\",\"desc\":\"grid-header-m__desc__pLIpr\",\"asc\":\"grid-header-m__asc__2gtzM\",\"sort\":\"grid-header-m__sort__1e8Kx\",\"filter\":\"grid-header-m__filter__f6CI9\"};;","require('B:/Documentos/Desarrollo/mycarlog/mycarlog/opt/mycarlog/frontend/node_modules/@dojo/widgets/grid/styles/header.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/header\",\"rootFixed\":\"header-m__rootFixed__1gcHn\",\"cellFixed\":\"header-m__cellFixed__1R9rb\",\"column\":\"header-m__column__3Z_b8\",\"resize\":\"header-m__resize__3cPDx\"};;","require('B:/Documentos/Desarrollo/mycarlog/mycarlog/opt/mycarlog/frontend/node_modules/@dojo/widgets/theme/grid-placeholder-row.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid-placeholder-row\",\"root\":\"grid-placeholder-row-m__root__1I0Qr grid-row-m__root__2PlMc\",\"loading\":\"grid-placeholder-row-m__loading__1ASJP\",\"spin\":\"grid-placeholder-row-m__spin__2NsZe\"};;","require('B:/Documentos/Desarrollo/mycarlog/mycarlog/opt/mycarlog/frontend/node_modules/@dojo/widgets/grid/styles/cell.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/cell\",\"rootFixed\":\"cell-m__rootFixed__1lXNB\"};;","require('B:/Documentos/Desarrollo/mycarlog/mycarlog/opt/mycarlog/frontend/node_modules/@dojo/widgets/theme/grid-cell.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid-cell\",\"root\":\"grid-cell-m__root__3icaN\",\"input\":\"grid-cell-m__input__2J0_c\",\"edit\":\"grid-cell-m__edit__xjg9f base-m__visuallyHidden__1AeWe base-m__focusable__1_qAN\"};;","require('B:/Documentos/Desarrollo/mycarlog/mycarlog/opt/mycarlog/frontend/node_modules/@dojo/widgets/grid/styles/row.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/row\",\"rootFixed\":\"row-m__rootFixed__3ejCY\"};;","require('B:/Documentos/Desarrollo/mycarlog/mycarlog/opt/mycarlog/frontend/node_modules/@dojo/widgets/theme/grid-row.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid-row\",\"root\":\"grid-row-m__root__2PlMc\",\"selected\":\"grid-row-m__selected__Em4gT\"};;","require('B:/Documentos/Desarrollo/mycarlog/mycarlog/opt/mycarlog/frontend/node_modules/@dojo/widgets/theme/grid-footer.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid-footer\",\"root\":\"grid-footer-m__root__2hvVs\"};;","require('B:/Documentos/Desarrollo/mycarlog/mycarlog/opt/mycarlog/frontend/node_modules/@dojo/widgets/grid/styles/paginated-footer.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/paginated-footer\",\"rootFixed\":\"paginated-footer-m__rootFixed__54_sK\",\"containerFixed\":\"paginated-footer-m__containerFixed__HzKF8\",\"detailsFixed\":\"paginated-footer-m__detailsFixed__3gQUX\",\"paginationListFixed\":\"paginated-footer-m__paginationListFixed__1JPbF\",\"itemFixed\":\"paginated-footer-m__itemFixed__2W4-4\",\"moreFixed\":\"paginated-footer-m__moreFixed__1VMXn\",\"pageNavFixed\":\"paginated-footer-m__pageNavFixed__20MBZ\"};;","require('B:/Documentos/Desarrollo/mycarlog/mycarlog/opt/mycarlog/frontend/node_modules/@dojo/widgets/theme/grid-paginated-footer.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/grid-paginated-footer\",\"root\":\"grid-paginated-footer-m__root__2xW9j\",\"pagination\":\"grid-paginated-footer-m__pagination__mMw0Z\",\"details\":\"grid-paginated-footer-m__details__3OO9A\",\"paginationList\":\"grid-paginated-footer-m__paginationList__1dOPM\",\"item\":\"grid-paginated-footer-m__item__1_Tjb\",\"more\":\"grid-paginated-footer-m__more__2TJ3y\",\"pageNumber\":\"grid-paginated-footer-m__pageNumber__3aae7\",\"pageNav\":\"grid-paginated-footer-m__pageNav__6zNer\",\"active\":\"grid-paginated-footer-m__active__3zI7L\"};;"],"sourceRoot":""}