{"version":3,"sources":["webpack://pen_onitoring_ystem/./src/widgets/select_vehicle/select_vehicle.ts"],"names":["__webpack_require__","r","__webpack_exports__","d","SelectVehicle","_dojo_framework_core_vdom__WEBPACK_IMPORTED_MODULE_0__","_dojo_framework_core_WidgetBase__WEBPACK_IMPORTED_MODULE_1__","_dojo_widgets_text_input__WEBPACK_IMPORTED_MODULE_2__","_Menu__WEBPACK_IMPORTED_MODULE_3__","[object Object]","this","Vehicles","TextSearch","push","Object","setInterval","console","log","length","invalidate","res","fetch","method","body","JSON","stringify","idaccount","localStorage","getItem","Search","headers","Content-Type","status","data","json","Array","isArray","forEach","element","licence_plate","label","value","onChange","v","GetVehicles"],"mappings":";;;;;;;;yIAAAA,EAAAC,EAAAC,GAAAF,EAAAG,EAAAD,EAAA,4BAAAE,IAAA,IAAAC,EAAAL,EAAA,IAAAM,EAAAN,EAAA,IAAAO,EAAAP,EAAA,IAAAQ,EAAAR,EAAA,IAMe,MAAMI,UAAsBE,EAAA,EAA3CG,kCACUC,KAAAC,SAAW,GAEXD,KAAAE,WAAqB,GAE7BH,WACEC,KAAKC,SAASE,KAAKC,OAAAT,EAAA,EAAAS,CAAE,MAAO,GAAI,CAAC,qBAEjCC,YAAY,KACVC,QAAQC,IAAIP,KAAKC,SAASO,QAC1BR,KAAKS,cACJ,KACHT,KAAKS,aAGPV,oBACEC,KAAKC,SAAW,GAEhB,MAAMS,QAAYC,MAAM,YAAa,CACnCC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBC,UAAWC,aAAaC,QAAQ,aAChCC,OAAQnB,KAAKE,aAEfkB,QAAS,CACPC,eAAgB,sBAIpB,GAAkB,KAAdX,EAAIY,OAAe,CACrB,IAAIC,QAAab,EAAIc,OAErBlB,QAAQC,IAAIgB,GACRE,MAAMC,QAAQH,IAChBA,EAAKI,QAASC,IACZtB,QAAQC,IAAIqB,GACZ5B,KAAKC,SAASE,KAAKC,OAAAT,EAAA,EAAAS,CAAE,MAAO,GAAI,CAACwB,EAAQC,mBAK7C7B,KAAKS,cAICV,SACR,OAAOK,OAAAT,EAAA,EAAAS,CAAE,MAAO,GAAI,CAClBA,OAAAT,EAAA,EAAAS,CAAEN,EAAA,EAAM,IACRM,OAAAT,EAAA,EAAAS,CACEP,EAAA,EACA,CACEiC,MAAO,SACPC,MAAO/B,KAAKE,WACZ8B,SAAWC,IACT3B,QAAQC,IAAIO,KAAKC,UAAUkB,IAC3BjC,KAAKE,WAAa+B,EAClBjC,KAAKkC,cACLlC,KAAKS,eAGT,IAEFL,OAAAT,EAAA,EAAAS,CAAE,MAAO,GAAIJ,KAAKC","file":"12.feddc8c2b676d6432a01.bundle.js","sourcesContent":["import { v, w } from \"@dojo/framework/core/vdom\";\nimport WidgetBase from \"@dojo/framework/core/WidgetBase\";\nimport TextInput from \"@dojo/widgets/text-input\";\n//import watch from \"@dojo/framework/core/decorators/watch\";\nimport Menu from \".././Menu\";\n\nexport default class SelectVehicle extends WidgetBase {\n  private Vehicles = [] as any[];\n\n  private TextSearch: string = \"\";\n\n  onAttach() {\n    this.Vehicles.push(v(\"div\", {}, [\"Primer registro\"]));\n\n    setInterval(() => {\n      console.log(this.Vehicles.length);\n      this.invalidate();\n    }, 5000);\n    this.invalidate();\n  }\n\n  async GetVehicles() {\n    this.Vehicles = [];\n\n    const res = await fetch(\"/vehicles\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        idaccount: localStorage.getItem(\"idaccount\"),\n        Search: this.TextSearch,\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n\n    if (res.status == 200) {\n      let data = await res.json();\n      //\t\tthis._fetcher = createFetcher(data);\n      console.log(data);\n      if (Array.isArray(data)) {\n        data.forEach((element: any) => {\n          console.log(element);\n          this.Vehicles.push(v(\"div\", {}, [element.licence_plate]));\n          //this.invalidate();\n        });\n      }\n\n      this.invalidate();\n    }\n  }\n\n  protected render() {\n    return v(\"div\", {}, [\n      w(Menu, {}),\n      w(\n        TextInput,\n        {\n          label: \"Buscar\",\n          value: this.TextSearch,\n          onChange: (v) => {\n            console.log(JSON.stringify(v));\n            this.TextSearch = v as string;\n            this.GetVehicles();\n            this.invalidate();\n          },\n        },\n        []\n      ),\n      v(\"div\", {}, this.Vehicles),\n    ]);\n  }\n}\n"],"sourceRoot":""}