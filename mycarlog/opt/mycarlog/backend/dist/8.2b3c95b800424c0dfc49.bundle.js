/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
(window.dojoWebpackJsonputomotive_og=window.dojoWebpackJsonputomotive_og||[]).push([[8],{22:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var i=a(0);a(1);function s(e,t=!1,a=!1){return a?i.default[e].bind(i.default):i.default[e]}},263:function(e,t,a){"use strict";a.r(t);var i=a(18),s=a(36),o=a(19),n=a(28),c=a(48),l=a(71),r=a(84),d=a(35),h=a(37),b=a(33),m=a(44);class p extends o.b{constructor(){super(...arguments),this.Params={idaccount:"0",idcontact:"-1",rowkey:0,firstname:"",lastname:"",identification:"",ididentificationtype:"0",birthday:"2020-01-01",idcontacttype:"0",idgender:"0",note:""},this._openSnackMsgValideFields=!1,this._openSnackMsgSaveError=!1}Save(){this.Params.idaccount=localStorage.getItem("idaccount")||"0",this.Params.firstname.length>0&&this.Params.lastname.length>0&&this.Params.identification.length?fetch("/contact_cu",{method:"POST",body:JSON.stringify(this.Params),headers:{"Content-Type":"application/json"}}).then(e=>{e.json().then(e=>{e.idcontact>0&&e.rowkey>0?window.location.href="/#contacts":(this._openSnackMsgSaveError=!0,this.invalidate())})}):(this._openSnackMsgValideFields=!0,setTimeout(()=>{this._openSnackMsgValideFields=!1},4e3)),this.invalidate()}async onAttach(){if(this.Params.idaccount=localStorage.getItem("idaccount")||"0",this.properties.idcontact&&this.Params.idaccount){var e=window.location.hash.split("?")[1],t=new URLSearchParams(e);this.Params.idcontact=t.get("idcontact")||"-3";var a="/contact_r?idcontact="+this.Params.idcontact+"&idaccount="+this.Params.idaccount;const i=await fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}});if(200==i.status){const e=await i.json();console.log(e),e.length>0&&(this.Params=e[0])}else 401==i.status&&(window.location.href="/#login");console.log(i),this.invalidate()}else console.log("No consulta",this.Params)}render(){return Object(i.j)("div",{},[Object(i.k)(h.a,{heading:"CONTACTOS",collapseWidth:150},[Object(i.k)(b.a,{label:"NUEVO",classes:["fas","fa-user-plus"],ShowLabel:!0,onClick:e=>{console.log("onClick 2"),this.Params={idaccount:"0",idcontact:"0",rowkey:0,firstname:"",lastname:"",identification:"",ididentificationtype:"0",birthday:"2020-01-01",idcontacttype:"0",idgender:"0",note:""}}}),Object(i.j)("span",{},["|"]),Object(i.k)(b.a,{label:"GUARDAR",classes:["fas","fa-save"],ShowLabel:!0,onClick:e=>{this.Save()}})]),Object(i.j)("div",{classes:n.row},[Object(i.j)("div",{classes:[n.column2]},[Object(i.k)(c.a,{key:"t5",type:"text",label:"Nombre",disabled:!1,readOnly:!1,required:!0,placeholder:"Nombre",value:this.Params.firstname,onChange:e=>{this.Params.firstname=e,this.invalidate()}})]),Object(i.j)("div",{classes:[n.column2]},[Object(i.k)(c.a,{key:"t5",type:"text",label:"Apellido",disabled:!1,readOnly:!1,required:!0,placeholder:"Apellido",value:this.Params.lastname,onChange:e=>{this.Params.lastname=e,this.invalidate()}})])]),Object(i.j)("div",{classes:n.row},[Object(i.j)("div",{classes:[n.column2]},[Object(i.k)(c.a,{key:"t5",type:"text",label:"Identificación",disabled:!1,readOnly:!1,required:!0,value:this.Params.identification,onChange:e=>{this.Params.identification=e,this.invalidate()}})]),Object(i.j)("div",{classes:[n.column2]},[Object(i.k)(r.a,{label:"Tipo Identificación",value:this.Params.ididentificationtype,url:"/toselect/identificationtypes",onSelect:(e,t,a)=>{console.log("onSelect",e,t,a),this.Params.ididentificationtype=t}})])]),Object(i.j)("div",{classes:n.row},[Object(i.j)("div",{classes:[n.column2]},[Object(i.k)(c.a,{key:"t6",type:"date",label:"Fecha nacimiento",disabled:!1,readOnly:!1,value:this.Params.birthday,onChange:e=>{this.Params.birthday=e,this.invalidate()}})]),Object(i.j)("div",{classes:[n.column2]},[Object(i.k)(r.a,{label:"Género",url:"/toselect/genders",value:this.Params.idgender,onSelect:(e,t,a)=>{console.log("onSelect",e,t,a),this.Params.idgender=t}})])]),Object(i.j)("div",{classes:n.row},[Object(i.j)("div",{classes:[n.column2]},[Object(i.k)(r.a,{label:"Tipo de contacto",url:"/toselect/contacttypes",value:this.Params.idcontacttype,onSelect:(e,t,a)=>{this.Params.idcontacttype=t}})]),Object(i.j)("div",{classes:n.column2},[])]),Object(i.j)("div",{classes:[]},[Object(i.k)(l.a,{columns:40,rows:5,placeholder:"Notas",label:"Notas",key:"text-area",value:this.Params.note,onInput:e=>{this.Params.note=e,this.invalidate()}})]),Object(i.k)(m.a,{open:this._openSnackMsgValideFields,leading:!1,type:"error",messageRenderer:()=>"Complete los campos requeridos"}),Object(i.k)(m.a,{open:this._openSnackMsgSaveError,leading:!1,type:"error",messageRenderer:()=>"No se pudo guardar, revise la conexión"})])}}Object(s.a)([Object(d.a)()],p.prototype,"Params",void 0),Object(s.a)([Object(d.a)()],p.prototype,"_openSnackMsgValideFields",void 0),Object(s.a)([Object(d.a)()],p.prototype,"_openSnackMsgSaveError",void 0);var u=a(38);console.log(window.location.hash);const j=Object(i.a)();t.default=j(function({properties:e}){return Object(i.j)("div",{classes:[n.root]},[Object(i.k)(u.a,{}),Object(i.k)(p,{idcontact:"0"})])})}}]);
//# sourceMappingURL=8.2b3c95b800424c0dfc49.bundle.js.map