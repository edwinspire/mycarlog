/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
(window.dojoWebpackJsonpmycarlog3=window.dojoWebpackJsonpmycarlog3||[]).push([["src/widgets/Vehicle/Vehicle"],{273:function(e,a,s){e.exports={" _key":"mycarlog3/Vehicle",spacing:"Vehicle-m__spacing__e9fe791z0jY"}},313:function(e,a,s){"use strict";s.r(a);var t=s(32),i=s(20),l=s(21),o=s(273),c=s(42),r=s(43),n=s(33),d=s(37),u=s(41),h=s(34),p=s(56),m=s(57),b=s(30);function v(e,a=b.a,s){return Object(m.b)((t,i)=>{t.addDecorator(`diffProperty:${e}`,a.bind(null)),t.addDecorator("registeredDiffProperty",e),(s||i)&&t.addDecorator("diffReaction",{propertyName:e,reaction:i?t[i]:s})})}class k extends l.a{constructor(){super(),this.open=!1,v("message",b.a,this.diffFooReaction)(this),console.log("Se ha creado")}diffFooReaction(e,a){console.log(e,a),a.message.length>0&&this.show()}show(){this.open=!0,this.invalidate(),setTimeout(()=>{this.open=!1,this.invalidate()},5e3)}render(){return Object(i.l)(p.a,{open:this.open,type:this.properties.type},[{message:this.properties.message}])}}s.d(a,"default",function(){return O});class O extends l.a{constructor(){super(...arguments),this.Params={idvehicle:"-1",idaccount:0,idcontact:"0",rowkey:0,license_plate:"",year:"0",fuel_tank_capacity:"0",idfuel_tank_capacitytype:"0",vin:"",idvehicletype:"0",idmark:"0",model:"",color:"0",idfueltype:"0",idunit_measure_fuel_tank:"0",note:""},this.Message="",this.MessageType=void 0}SnackBar(e,a){this.MessageType=a,this.Message=e}async Save(){if(console.log(this.Params),this.Params.idaccount&&this.Params.idaccount>0)if(Number(this.Params.idcontact)>0)if(this.Params.license_plate.length>0){let e=await fetch("/vehicle_cu",{method:"POST",body:JSON.stringify(this.Params),headers:{"Content-Type":"application/json"}}),a=await e.json();200==e.status?(console.log(a),a.idvehicle>0?(this.SnackBar("Guardado","success"),setTimeout(()=>{window.location.href="/#vehicle_cards?idvehicle="+a.idvehicle+"&idaccount="+this.Params.idaccount},2e3)):this.SnackBar("No se pudo guardar","error")):401==e.status?window.location.href="/#login":this.SnackBar("No se pudo guardar "+e.status,"error")}else this.SnackBar("Complete los campos que son requeridos","error");else this.SnackBar("Debe seleccionar un Propietario","error");else this.SnackBar("No se encuentra una cuenta válida","error");this.invalidate()}async onAttach(){if(console.log(this.properties.idvehicle),this.Params.idaccount=window.GlobalStore.get(window.GlobalStore.path("root","user","idaccount")),this.properties.idvehicle){var e=window.location.hash.split("?")[1],a=new URLSearchParams(e);this.Params.idvehicle=a.get("idvehicle")||"-2";var s="/vehicle?idvehicle="+this.Params.idvehicle+"&idaccount="+this.Params.idaccount;const t=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"}});let i=await t.json();console.log(i),i.length>0&&i[0].idaccount&&i[0].idvehicle&&(this.Params=i[0],this.invalidate())}}render(){return Object(i.k)("div",{},[Object(i.l)(k,{message:this.Message,type:this.MessageType}),Object(i.l)(d.a,{}),Object(i.l)(h.a,{title:"VEHÍCULO",ShowNew:!0,ShowSave:!0,onSave:()=>{this.Save()},onNew:()=>{this.Params={idaccount:this.Params.idaccount,idvehicle:"-1",idcontact:"0",rowkey:0,license_plate:"",year:"0",fuel_tank_capacity:"0",idfuel_tank_capacitytype:"0",vin:"",idvehicletype:"0",idmark:"0",model:"",color:"",idfueltype:"0",idunit_measure_fuel_tank:"0",note:""}}}),Object(i.k)("div",{classes:[]},[Object(i.k)("div",{classes:["columns is-mobile",o.spacing]},[Object(i.k)("div",{classes:["column"]},[Object(i.l)(r.a,{label:"Propietario",url:"/toselect/contacts",onValue:e=>{console.log("onSelect",e),this.Params.idcontact=e}})]),Object(i.k)("div",{classes:["column"]},[Object(i.l)(u.a,{label:"Placa",onValue:e=>{this.Params.license_plate=e,this.invalidate()}})])]),Object(i.k)("div",{classes:["columns is-mobile",o.spacing]},[Object(i.k)("div",{classes:["column"]},[Object(i.l)(r.a,{label:"Marca",value:this.Params.idmark,url:"/toselect/marks",onValue:e=>{console.log("onSelect",e),this.Params.idmark=e}})]),Object(i.k)("div",{classes:["column"]},[Object(i.l)(u.a,{label:"Modelo",value:this.Params.model,onValue:e=>{this.Params.model=e}},[])])]),Object(i.k)("div",{classes:["columns is-mobile",o.spacing]},[Object(i.k)("div",{classes:["column"]},[Object(i.l)(u.a,{label:"Año",type:"number",value:this.Params.year,onValue:e=>{this.Params.year=e,this.invalidate()}})]),Object(i.k)("div",{classes:["column"]},[Object(i.l)(u.a,{label:"VIN",value:this.Params.vin,onValue:e=>{this.Params.vin=e,this.invalidate()}})])]),Object(i.k)("div",{classes:["columns is-mobile",o.spacing]},[Object(i.k)("div",{classes:["column"]},[Object(i.l)(u.a,{label:"Color",type:"color",value:this.Params.color,onValue:e=>{this.Params.color=e}})]),Object(i.k)("div",{classes:["column"]},[Object(i.l)(r.a,{label:"Tipo de combustible",url:"/toselect/fueltypes",value:this.Params.idfueltype,onValue:e=>{console.log("onSelect",e),this.Params.idfueltype=e}})])]),Object(i.k)("div",{classes:["columns is-mobile",o.spacing]},[Object(i.k)("div",{classes:["column"]},[Object(i.l)(u.a,{label:"Capacidad Tanque",type:"number",value:this.Params.fuel_tank_capacity,onValue:e=>{this.Params.fuel_tank_capacity=e,console.log(this.Params.fuel_tank_capacity),this.invalidate()}})]),Object(i.k)("div",{classes:["column"]},[Object(i.l)(r.a,{label:"Unidad de medida del tanque",url:"/toselect/unit_measure_fuel_tanks",value:this.Params.idunit_measure_fuel_tank,onValue:e=>{console.log("onSelect",e),this.Params.idunit_measure_fuel_tank=e}},[])])]),Object(i.k)("div",{classes:[o.spacing]},[Object(i.l)(c.a,{label:"Notas",rows:5,value:this.Params.note,onValue:e=>{this.Params.note=e,this.invalidate()}})])])])}}t.a([Object(n.a)()],O.prototype,"Params",void 0)},42:function(e,a,s){"use strict";s.d(a,"a",function(){return l});var t=s(20),i=s(21);class l extends i.a{render(){return Object(t.k)("span",{},[Object(t.k)("div",{classes:["field"]},[Object(t.k)("label",{classes:["label","is-small"]},[this.properties.label]),Object(t.k)("div",{classes:["control"]},[Object(t.k)("textarea",{rows:this.properties.rows,cols:this.properties.cols,required:this.properties.required,placeholder:this.properties.placeholder,classes:["textarea","is-small"],value:this.properties.value,onchange:e=>{this.properties.onValue&&this.properties.onValue(e.target.value),console.log("Click")}},[this.properties.value])])])])}}},43:function(e,a,s){"use strict";s.d(a,"a",function(){return o});var t=s(20),i=s(21),l=s(44);class o extends i.a{constructor(){super(...arguments),this.RemoteOptions=[],this.Options=[]}async onAttach(){try{let e=await fetch(this.properties.url,{method:"POST",body:JSON.stringify(this.properties.params),headers:{"Content-Type":"application/json"}});if(200==e.status){let a=await e.json();this.RemoteOptions=a,this.Options=[],await this.RemoteOptions.forEach((e,a)=>{this.Options.push(Object(t.k)("option",{value:e.value},[e.label])),this.invalidate()}),console.log("Opciones",this.Options.length)}else 401==e.status&&(window.location.href="/#login")}catch(e){console.log(e),this.invalidate()}}render(){return Object(t.k)("span",{},[Object(t.k)("div",{classes:["field"]},[Object(t.k)("label",{classes:["label","is-small"]},[this.properties.label]),Object(t.k)("div",{classes:["control","is-small"]},[Object(t.k)("div",{classes:["select is-small",l.full_width]},[Object(t.k)("select",{required:this.properties.required,onchange:e=>{this.properties.onValue&&this.properties.onValue(e.target.value),console.log("Click",e.target,e)}},this.Options)])])])])}}},44:function(e,a,s){e.exports={" _key":"mycarlog3/SelectRemoteSource",full_width:"SelectRemoteSource-m__full_width__e9fe791RePL"}}}]);
//# sourceMappingURL=Vehicle.49743e997e0a05a8ada4.bundle.js.map