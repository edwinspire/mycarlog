/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
(window.dojoWebpackJsonpmycarlog3=window.dojoWebpackJsonpmycarlog3||[]).push([["src/widgets/Vehicle/Vehicle"],{271:function(e,a,t){e.exports={" _key":"mycarlog3/Vehicle",spacing:"Vehicle-m__spacing__e9fe791z0jY"}},273:function(e,a,t){t(274),e.exports={" _key":"@dojo/widgets/text-area",root:"text-area-m__root__1NUZh",wrapper:"text-area-m__wrapper__1Nkrq",input:"text-area-m__input__3libn",inputWrapper:"text-area-m__inputWrapper__1LN1m",disabled:"text-area-m__disabled__BN85r",focused:"text-area-m__focused__1Pb_L",readonly:"text-area-m__readonly__21ZTb",required:"text-area-m__required__1NXja",invalid:"text-area-m__invalid__2jMTq",valid:"text-area-m__valid__3mRCW"}},274:function(e,a,t){},276:function(e,a,t){e.exports={" _key":"mycarlog3/SelectRemoteSource",full_width:"SelectRemoteSource-m__full_width__e9fe791RePL"}},298:function(e,a,t){"use strict";t.r(a);var i=t(35),s=t(20),l=t(21),o=t(271),c=t(40),n=t(30),r=t(273),d=t(50),u=t(39),h=t(22),p=t(28),m=t(37),v=t(38);var b=Object(s.a)({icache:Object(h.a)(),theme:p.a,focus:m.a,validity:v.a}).properties().children()(function({id:e,middleware:{icache:a,theme:t,focus:i,validity:l},properties:o,children:h}){const p=t.classes(r);function m(e,a){let t,{valid:i,onValidate:s}=o();"object"==typeof i&&(t=i.message,i=i.valid),e===i&&a===t||s&&s(e,a)}const{aria:v={},columns:b=20,disabled:_,widgetId:j=`textarea-${e}`,maxLength:O,minLength:f,name:y,placeholder:g,readOnly:w,required:P,rows:k=2,initialValue:S,wrapText:x,theme:V,classes:N,labelHidden:q,helperText:T,onValidate:C}=o();let{value:R}=o();if(void 0===R){R=a.get("value"),S!==a.get("initialValue")&&(a.set("value",S),a.set("initialValue",S),R=S)}C&&function(){const{customValidator:e,value:t=a.get("value")||""}=o(),i=a.getOrSet("dirty",!1);if(""===t&&!i)return void m(void 0,"");a.set("dirty",!0);let{valid:s,message:c=""}=l.get("input",t||"");if(s&&e){const a=e(t);a&&(s=a.valid,c=a.message||"")}m(s,c)}();const{valid:B,message:L}=function(){const{valid:e={valid:void 0,message:void 0}}=o();return"boolean"==typeof e?{valid:e,message:void 0}:{valid:e.valid,message:e.message}}(),W=!1===B&&L||T,U=i.isFocused("input"),[$]=h();return Object(s.h)("div",{key:"root",classes:[t.variant(),p.root]},Object(s.h)("div",{key:"wrapper",classes:[p.wrapper,_?p.disabled:null,!1===B?p.invalid:null,!0===B?p.valid:null,w?p.readonly:null,P?p.required:null,U?p.focused:null]},$?Object(s.h)(c.a,{theme:t.compose(d,r,"label"),classes:N,disabled:_,valid:B,readOnly:w,required:P,hidden:q,forId:j,focused:U,active:!!R||U},$):null,Object(s.h)("div",{classes:p.inputWrapper},Object(s.h)("textarea",Object.assign({id:j,key:"input"},Object(n.a)(v),{classes:p.input,cols:`${b}`,disabled:_,focus:i.shouldFocus,"aria-invalid":!1===B?"true":null,maxlength:O?`${O}`:null,minlength:f?`${f}`:null,name:y,placeholder:g,readOnly:w,"aria-readonly":w?"true":null,required:P,rows:`${k}`,value:R,wrap:x,onblur:()=>{const{onBlur:e}=o();e&&e()},onfocus:()=>{const{onFocus:e}=o();e&&e()},oninput:e=>{const{onValue:t}=o();e.stopPropagation();const i=e.target.value;a.set("value",i),t&&t(i)},onkeydown:e=>{const{onKeyDown:a}=o();e.stopPropagation(),a&&a(e.which,()=>{e.preventDefault()})},onkeyup:e=>{const{onKeyUp:a}=o();e.stopPropagation(),a&&a(e.which,()=>{e.preventDefault()})},onclick:()=>{const{onClick:e}=o();e&&e()},onpointerenter:()=>{const{onOver:e}=o();e&&e()},onpointerleave:()=>{const{onOut:e}=o();e&&e()}})))),Object(s.h)(u.a,{text:W,valid:B,classes:N,theme:V}))}),_=t(276);class j extends l.a{constructor(){super(...arguments),this.RemoteOptions=[],this.Options=[]}async onAttach(){try{let e=await fetch(this.properties.url,{method:"POST",body:JSON.stringify(this.properties.params),headers:{"Content-Type":"application/json"}});if(200==e.status){let a=await e.json();this.RemoteOptions=a,this.Options=[],await this.RemoteOptions.forEach((e,a)=>{this.Options.push(Object(s.i)("option",{value:e.value},[e.label])),this.invalidate()}),console.log("Opciones",this.Options.length)}else 401==e.status&&(window.location.href="/#login")}catch(e){console.log(e),this.invalidate()}}render(){return Object(s.i)("span",{classes:[],onclick:e=>{console.log("Click")}},[Object(s.i)("div",{classes:["field"]},[Object(s.i)("label",{classes:["label","is-small"]},[this.properties.label]),Object(s.i)("div",{classes:["control","is-small"]},[Object(s.i)("div",{classes:["select is-small",_.full_width]},[Object(s.i)("select",{},this.Options)])])])])}}var O=t(47),f=t(45);class y extends l.a{render(){return Object(s.i)("span",{classes:[],onclick:e=>{console.log("Click")}},[Object(s.i)("div",{classes:["field"]},[Object(s.i)("label",{classes:["label","is-small"]},[this.properties.label]),Object(s.i)("div",{classes:["control","is-small"]},[Object(s.i)("input",{placeholder:"Prueba input",classes:["input","is-small"]})])])])}}var g=t(44);t.d(a,"default",function(){return w});class w extends l.a{constructor(){super(...arguments),this.Params={idvehicle:"-1",idaccount:0,idcontact:"0",rowkey:0,license_plate:"",year:"",fuel_tank_capacity:"",idfuel_tank_capacitytype:"0",vin:"",idvehicletype:"0",idmark:"0",idmodel:"0",idcolor:"0",idfueltype:"0",idunit_measure_fuel_tank:"0",note:""}}SnackBar(e){}async Save(){if(Number(this.Params.idcontact)>0)if(this.Params.license_plate.length>0){let e=await fetch("/vehicle_cu",{method:"POST",body:JSON.stringify(this.Params),headers:{"Content-Type":"application/json"}}),a=await e.json();200==e.status?(console.log(a),a.idvehicle>0?window.location.href="/#vehicles?idvehicle="+a.idvehicle+"&idaccount="+this.Params.idaccount:this.SnackBar("No se pudo guardar")):401==e.status?window.location.href="/#login":this.SnackBar("No se pudo guardar "+e.status)}else this.SnackBar("Complete los campos que son requeridos");else this.SnackBar("Debe seleccionar un Propietario");this.invalidate()}async onAttach(){if(console.log(this.properties.idvehicle),this.Params.idaccount=window.GlobalStore.get(window.GlobalStore.path("root","user","idaccount")),this.properties.idvehicle){var e=window.location.hash.split("?")[1],a=new URLSearchParams(e);this.Params.idvehicle=a.get("idvehicle")||"-2";var t="/vehicle?idvehicle="+this.Params.idvehicle+"&idaccount="+this.Params.idaccount;const i=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});let s=await i.json();console.log(s),s.length>0&&s[0].idaccount&&s[0].idvehicle&&(this.Params=s[0],this.invalidate())}}render(){return Object(s.i)("div",{},[Object(s.j)(f.a,{}),Object(s.j)(g.a,{title:"VEHÍCULO",ShowNew:!0,ShowSave:!0,onSave:()=>{this.Save()},onNew:()=>{this.Params={idaccount:this.Params.idaccount,idvehicle:"-1",idcontact:"0",rowkey:0,license_plate:"",year:"",fuel_tank_capacity:"",idfuel_tank_capacitytype:"0",vin:"",idvehicletype:"0",idmark:"0",idmodel:"0",idcolor:"0",idfueltype:"0",idunit_measure_fuel_tank:"0",note:""}}}),Object(s.i)("div",{classes:[]},[Object(s.i)("div",{classes:["columns is-mobile",o.spacing]},[Object(s.i)("div",{classes:["column"]},[Object(s.j)(j,{label:"Propietario",url:"/toselect/contacts",onValue:(e,a,t)=>{console.log("onSelect",e,a,t),this.Params.idcontact=a}})]),Object(s.i)("div",{classes:["column"]},[Object(s.j)(y,{label:"Placa",onValue:e=>{this.Params.license_plate=e,this.invalidate()}})])]),Object(s.i)("div",{classes:["columns is-mobile",o.spacing]},[Object(s.i)("div",{classes:["column"]},[Object(s.j)(j,{label:"Marca",value:this.Params.idmark,url:"/toselect/marks",onValue:(e,a,t)=>{console.log("onSelect",e,a,t),this.Params.idmark=a}})]),Object(s.i)("div",{classes:["column"]},[Object(s.j)(j,{label:"Modelo",value:this.Params.idmodel,url:"/toselect/models",onValue:(e,a,t)=>{console.log("onSelect",e,a,t),this.Params.idfuel_tank_capacitytype=a}},[])])]),Object(s.i)("div",{classes:["columns is-mobile",o.spacing]},[Object(s.i)("div",{classes:["column"]},[Object(s.j)(y,{label:"Año",value:this.Params.year,onValue:e=>{this.Params.year=e,this.invalidate()}})]),Object(s.i)("div",{classes:["column"]},[Object(s.j)(y,{label:"VIN",value:this.Params.vin,onValue:e=>{this.Params.vin=e,this.invalidate()}})])]),Object(s.i)("div",{classes:["columns is-mobile",o.spacing]},[Object(s.i)("div",{classes:["column"]},[Object(s.j)(j,{label:"Color",url:"/toselect/colors",value:this.Params.idcolor,onValue:(e,a,t)=>{console.log("onSelect",e,a,t),this.Params.idcolor=a}})]),Object(s.i)("div",{classes:["column"]},[Object(s.j)(j,{label:"Tipo de combustible",url:"/toselect/fueltypes",value:this.Params.idfueltype,onValue:(e,a,t)=>{console.log("onSelect",e,a,t),this.Params.idfueltype=a}})])]),Object(s.i)("div",{classes:["columns is-mobile",o.spacing]},[Object(s.i)("div",{classes:["column"]},[Object(s.j)(y,{label:"Capacidad Tanque",value:this.Params.fuel_tank_capacity,onValue:e=>{this.Params.fuel_tank_capacity=e,this.invalidate()}})]),Object(s.i)("div",{classes:["column"]},[Object(s.j)(j,{label:"Unidad de medida del tanque",url:"/toselect/unit_measure_fuel_tanks",value:this.Params.idunit_measure_fuel_tank,onValue:(e,a,t)=>{console.log("onSelect",e,a,t),this.Params.idunit_measure_fuel_tank=a}},[])])]),Object(s.i)("div",{classes:["columns is-mobile",o.spacing]},[Object(s.i)("div",{classes:["column"]},[]),Object(s.i)("div",{classes:["column"]},[])]),Object(s.i)("div",{classes:["columns is-mobile",o.spacing]},[Object(s.i)("div",{classes:["column"]},[]),Object(s.i)("div",{classes:["column"]},[])]),Object(s.i)("div",{classes:[""]},[Object(s.j)(b,{columns:40,rows:5,placeholder:"Notas",key:"text-area",value:this.Params.note,onValue:e=>{this.Params.note=e,this.invalidate()}})])])])}}i.a([Object(O.a)()],w.prototype,"Params",void 0)}}]);
//# sourceMappingURL=Vehicle.7dc31627130a1e183ce3.bundle.js.map