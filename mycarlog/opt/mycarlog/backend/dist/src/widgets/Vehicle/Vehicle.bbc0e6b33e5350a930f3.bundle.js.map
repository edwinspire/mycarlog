{"version":3,"sources":["webpack://lib_mycarlog3/./src/widgets/Vehicle/Vehicle.m.css","webpack://lib_mycarlog3/diffProperty.ts","webpack://lib_mycarlog3/./src/widgets/SnackBarTime/SnackBarTime.ts","webpack://lib_mycarlog3/./src/widgets/Vehicle/Vehicle.ts","webpack://lib_mycarlog3/./src/widgets/TextArea/TextArea.ts","webpack://lib_mycarlog3/./src/widgets/SelectRemoteSource/SelectRemoteSource.ts","webpack://lib_mycarlog3/./src/widgets/SelectRemoteSource/SelectRemoteSource.m.css"],"names":["module","exports"," _key","spacing","diffProperty","propertyName","diffFunction","diff","reactionFunction","Object","handleDecorator","target","propertyKey","addDecorator","bind","reaction","SnackBarTime_SnackBarTime","WidgetBase","[object Object]","super","this","open","diffFooReaction","console","log","previousProperty","newProperty","message","length","show","invalidate","setTimeout","vdom","snackbar","type","properties","Vehicle_Vehicle","Params","idvehicle","idaccount","idcontact","rowkey","license_plate","year","fuel_tank_capacity","idfuel_tank_capacitytype","vin","idvehicletype","idmark","model","color","idfueltype","idunit_measure_fuel_tank","note","Message","MessageType","undefined","Number","resp","fetch","method","body","JSON","stringify","headers","Content-Type","data","json","status","SnackBar","window","location","href","GlobalStore","get","path","paramsString","hash","split","searchParams","URLSearchParams","url","res","Menu","ToolBar","title","ShowNew","ShowSave","onSave","Save","onNew","classes","Vehicle_m","SelectRemoteSource","label","onValue","value","Input","d","v","TextArea","rows","tslib_es6","watch","__webpack_require__","__webpack_exports__","Textarea","_dojo_framework_core_vdom__WEBPACK_IMPORTED_MODULE_0__","_dojo_framework_core_WidgetBase__WEBPACK_IMPORTED_MODULE_1__","cols","required","placeholder","onchange","e","_SelectRemoteSource_m_css__WEBPACK_IMPORTED_MODULE_2__","RemoteOptions","Options","f","params","forEach","option","index","push","full_width"],"mappings":"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","file":"src/widgets/Vehicle/Vehicle.bbc0e6b33e5350a930f3.bundle.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"mycarlog3/Vehicle\",\"spacing\":\"Vehicle-m__spacing__e9fe791z0jY\"};","import { handleDecorator } from './handleDecorator';\nimport { DiffPropertyFunction } from './../interfaces';\nimport { auto } from './../diff';\n\n/**\n * Decorator that can be used to register a function as a specific property diff\n *\n * @param propertyName  The name of the property of which the diff function is applied\n * @param diffType      The diff type, default is DiffType.AUTO.\n * @param diffFunction  A diff function to run if diffType if DiffType.CUSTOM\n */\nexport function diffProperty(\n\tpropertyName: string,\n\tdiffFunction: DiffPropertyFunction = auto,\n\treactionFunction?: Function\n) {\n\treturn handleDecorator((target, propertyKey) => {\n\t\ttarget.addDecorator(`diffProperty:${propertyName}`, diffFunction.bind(null));\n\t\ttarget.addDecorator('registeredDiffProperty', propertyName);\n\t\tif (reactionFunction || propertyKey) {\n\t\t\ttarget.addDecorator('diffReaction', {\n\t\t\t\tpropertyName,\n\t\t\t\treaction: propertyKey ? target[propertyKey] : reactionFunction\n\t\t\t});\n\t\t}\n\t});\n}\n\nexport default diffProperty;\n","import { w } from \"@dojo/framework/core/vdom\";\nimport WidgetBase from \"@dojo/framework/core/WidgetBase\";\nimport SnackBar from \"@dojo/widgets/snackbar\";\nimport { diffProperty } from \"@dojo/framework/core/decorators/diffProperty\";\nimport { auto } from \"@dojo/framework/core/diff\";\n\nexport interface SnackBarTimeProperties {\n  message?: string;\n  type?: \"error\" | \"success\" | undefined;\n}\n\nexport default class SnackBarTime extends WidgetBase<SnackBarTimeProperties> {\n  private open = false;\n  //private message = \"Hola mundo\";\n\n  constructor() {\n    super();\n    diffProperty(\"message\", auto, this.diffFooReaction)(this);\n    console.log(\"Se ha creado\");\n  }\n\n  diffFooReaction(previousProperty: any, newProperty: any) {\n    //this.message = newProperty.value;\n    console.log(previousProperty, newProperty);\n    if (newProperty.message.length > 0) {\n      this.show();\n    }\n  }\n\n  private show() {\n    //this.message = message;\n    this.open = true;\n    this.invalidate();\n    setTimeout(() => {\n      this.open = false;\n      this.invalidate();\n    }, 5000);\n  }\n\n  protected render() {\n    return w(SnackBar, { open: this.open, type: this.properties.type }, [\n      { message: this.properties.message },\n    ]);\n  }\n}\n","import { v, w } from \"@dojo/framework/core/vdom\";\nimport WidgetBase from \"@dojo/framework/core/WidgetBase\";\nimport * as css from \"../Vehicle/Vehicle.m.css\";\nimport Textarea from \"../TextArea/TextArea\";\nimport Select from \"../SelectRemoteSource/SelectRemoteSource\";\nimport watch from \"@dojo/framework/core/decorators/watch\";\nimport Menu from \".././Menu/Menu\";\nimport Input from \".././Input/Input\";\nimport ToolBar from \"../../widgets/ToolBar/ToolBar\";\nimport SnackBarT from \"../../widgets/SnackBarTime/SnackBarTime\";\n\nexport interface VehicleProperties {\n  idvehicle?: string;\n}\n\nexport default class Vehicle extends WidgetBase<VehicleProperties> {\n  @watch() private Params = {\n    idvehicle: \"-1\",\n    idaccount: 0,\n    idcontact: \"0\",\n    rowkey: 0,\n    license_plate: \"\",\n    year: \"0\",\n    fuel_tank_capacity: \"0\",\n    idfuel_tank_capacitytype: \"0\",\n    vin: \"\",\n    idvehicletype: \"0\",\n    idmark: \"0\",\n    model: \"\",\n    color: \"0\",\n    idfueltype: \"0\",\n    idunit_measure_fuel_tank: \"0\",\n    note: \"\",\n  };\n\n  private Message = \"\";\n  private MessageType = undefined;\n\n  private SnackBar(message: string, type?: any) {\n    this.MessageType = type;\n    this.Message = message;\n  }\n\n  private async Save() {\n    console.log(this.Params);\n    if (this.Params.idaccount && this.Params.idaccount > 0) {\n      if (Number(this.Params.idcontact) > 0) {\n        if (this.Params.license_plate.length > 0) {\n          let resp = await fetch(\"/vehicle_cu\", {\n            method: \"POST\",\n            body: JSON.stringify(this.Params),\n            headers: { \"Content-Type\": \"application/json\" },\n          });\n          let data = await resp.json();\n          if (resp.status == 200) {\n            console.log(data);\n            if (data.idvehicle > 0) {\n              this.SnackBar(\"Guardado\", \"success\");\n              setTimeout(() => {\n                window.location.href =\n                  \"/#vehicle_cards?idvehicle=\" +\n                  data.idvehicle +\n                  \"&idaccount=\" +\n                  this.Params.idaccount; \n              }, 2000);\n            } else {\n              this.SnackBar(\"No se pudo guardar\", \"error\");\n            }\n          } else if (resp.status == 401) {\n            window.location.href = \"/#login\";\n          } else {\n            this.SnackBar(\"No se pudo guardar \" + resp.status, \"error\");\n          }\n        } else {\n          this.SnackBar(\"Complete los campos que son requeridos\", \"error\");\n        }\n      } else {\n        this.SnackBar(\"Debe seleccionar un Propietario\", \"error\");\n      }\n    } else {\n      this.SnackBar(\"No se encuentra una cuenta válida\", \"error\");\n    }\n\n    this.invalidate();\n  }\n\n  async onAttach() {\n    console.log(this.properties.idvehicle);\n\n    this.Params.idaccount = window.GlobalStore.get(\n      window.GlobalStore.path(\"root\", \"user\", \"idaccount\")\n    );\n\n    if (this.properties.idvehicle) {\n      var paramsString = window.location.hash.split(\"?\")[1];\n      var searchParams = new URLSearchParams(paramsString);\n      this.Params.idvehicle = searchParams.get(\"idvehicle\") || \"-2\";\n      var url =\n        \"/vehicle?idvehicle=\" +\n        this.Params.idvehicle +\n        \"&idaccount=\" +\n        this.Params.idaccount;\n\n      const res = await fetch(url, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      let data = await res.json();\n      console.log(data);\n      if (data.length > 0 && data[0].idaccount && data[0].idvehicle) {\n        this.Params = data[0];\n        this.invalidate();\n      }\n      //console.log(data);\n    }\n  }\n\n  protected render() {\n    return v(\"div\", {}, [\n      w(SnackBarT, { message: this.Message, type: this.MessageType }),\n      w(Menu, {}),\n      w(ToolBar, {\n        title: \"VEHÍCULO\",\n        ShowNew: true,\n        ShowSave: true,\n        onSave: () => {\n          this.Save();\n        },\n        onNew: () => {\n          this.Params = {\n            idaccount: this.Params.idaccount,\n            idvehicle: \"-1\",\n            idcontact: \"0\",\n            rowkey: 0,\n            license_plate: \"\",\n            year: \"0\",\n            fuel_tank_capacity: \"0\",\n            idfuel_tank_capacitytype: \"0\",\n            vin: \"\",\n            idvehicletype: \"0\",\n            idmark: \"0\",\n            model: \"\",\n            color: \"\",\n            idfueltype: \"0\",\n            idunit_measure_fuel_tank: \"0\",\n            note: \"\",\n          };\n        },\n      }),\n      v(\"div\", { classes: [] }, [\n        v(\"div\", { classes: [\"columns is-mobile\", css.spacing] }, [\n          v(\"div\", { classes: [\"column\"] }, [\n            w(Select, {\n              label: \"Propietario\",\n              url: \"/toselect/contacts\",\n              onValue: (value) => {\n                console.log(\"onSelect\", value);\n                this.Params.idcontact = value;\n              },\n            }),\n          ]),\n          v(\"div\", { classes: [\"column\"] }, [\n            w(Input, {\n              label: \"Placa\",\n              onValue: (d) => {\n                this.Params.license_plate = d as string;\n                this.invalidate();\n              },\n            }),\n          ]),\n        ]),\n        v(\"div\", { classes: [\"columns is-mobile\", css.spacing] }, [\n          v(\"div\", { classes: [\"column\"] }, [\n            w(Select, {\n              label: \"Marca\",\n              value: this.Params.idmark,\n              url: \"/toselect/marks\",\n              onValue: (value) => {\n                console.log(\"onSelect\", value);\n                this.Params.idmark = value;\n              },\n            }),\n          ]),\n          v(\"div\", { classes: [\"column\"] }, [\n            w(\n              Input,\n              {\n                label: \"Modelo\",\n                value: this.Params.model,\n                onValue: (value) => {\n                  this.Params.model = value;\n                },\n              },\n              []\n            ),\n          ]),\n        ]),\n        v(\"div\", { classes: [\"columns is-mobile\", css.spacing] }, [\n          v(\"div\", { classes: [\"column\"] }, [\n            w(Input, {\n              label: \"Año\",\n              type: \"number\",\n              value: this.Params.year as any,\n              onValue: (v) => {\n                this.Params.year = v as string;\n                this.invalidate();\n              },\n            }),\n          ]),\n          v(\"div\", { classes: [\"column\"] }, [\n            w(Input, {\n              label: \"VIN\",\n              value: this.Params.vin as any,\n              onValue: (v) => {\n                this.Params.vin = v as string;\n                this.invalidate();\n              },\n            }),\n          ]),\n        ]),\n        v(\"div\", { classes: [\"columns is-mobile\", css.spacing] }, [\n          v(\"div\", { classes: [\"column\"] }, [\n            w(Input, {\n              label: \"Color\",\n              type: \"color\",\n              value: this.Params.color,\n              onValue: (value) => {\n                this.Params.color = value;\n              },\n            }),\n          ]),\n          v(\"div\", { classes: [\"column\"] }, [\n            w(Select, {\n              label: \"Tipo de combustible\",\n              url: \"/toselect/fueltypes\",\n              value: this.Params.idfueltype,\n              onValue: (value) => {\n                console.log(\"onSelect\", value);\n                this.Params.idfueltype = value;\n              },\n            }),\n          ]),\n        ]),\n\n        v(\"div\", { classes: [\"columns is-mobile\", css.spacing] }, [\n          v(\"div\", { classes: [\"column\"] }, [\n            w(Input, {\n              label: \"Capacidad Tanque\",\n              type: \"number\",\n              value: this.Params.fuel_tank_capacity as any,\n              onValue: (v) => {\n                this.Params.fuel_tank_capacity = v as string;\n\n                console.log(this.Params.fuel_tank_capacity);\n\n                this.invalidate();\n              },\n            }),\n          ]),\n          v(\"div\", { classes: [\"column\"] }, [\n            w(\n              Select,\n              {\n                label: \"Unidad de medida del tanque\",\n                url: \"/toselect/unit_measure_fuel_tanks\",\n                value: this.Params.idunit_measure_fuel_tank,\n                onValue: (value) => {\n                  console.log(\"onSelect\", value);\n                  this.Params.idunit_measure_fuel_tank = value;\n                },\n              },\n              []\n            ),\n          ]),\n        ]),\n        /*\n        v(\"div\", { classes: [\"columns is-mobile\", css.spacing] }, [\n          v(\"div\", { classes: [\"column\"] }, []),\n          v(\"div\", { classes: [\"column\"] }, []),\n        ]),\n\n        v(\"div\", { classes: [\"columns is-mobile\", css.spacing] }, [\n          v(\"div\", { classes: [\"column\"] }, []),\n          v(\"div\", { classes: [\"column\"] }, []),\n        ]),\n*/\n        v(\"div\", { classes: [css.spacing] }, [\n          w(Textarea, {\n            label: \"Notas\",\n            rows: 5,\n            value: this.Params.note,\n            onValue: (value: string) => {\n              this.Params.note = value;\n              this.invalidate();\n            },\n          }),\n        ]),\n      ]),\n    ]);\n  }\n}\n","import { v } from \"@dojo/framework/core/vdom\";\nimport WidgetBase from \"@dojo/framework/core/WidgetBase\";\n\nexport interface TextareaProperties {\n  label?: string;\n  value?: string;\n  rows?: number;\n  cols?: number;\n  required?: boolean;\n  placeholder?: string;\n  onValue?(value: any): void;\n}\n\nexport default class Textarea extends WidgetBase<TextareaProperties> {\n  protected render() {\n    return v(\"span\", {}, [\n      v(\"div\", { classes: [\"field\"] }, [\n        v(\"label\", { classes: [\"label\", \"is-small\"] }, [this.properties.label]),\n        v(\"div\", { classes: [\"control\"] }, [\n          v(\n            \"textarea\",\n            {\n              rows: this.properties.rows,\n              cols: this.properties.cols,\n              required: this.properties.required,\n              placeholder: this.properties.placeholder,\n              classes: [\"textarea\", \"is-small\"],\n              value: this.properties.value,\n              onchange: (e) => {\n                this.properties.onValue &&\n                  this.properties.onValue(e.target.value);\n                console.log(\"Click\");\n              },\n            },\n            [this.properties.value]\n          ),\n        ]),\n      ]),\n    ]);\n  }\n}\n","import { v } from \"@dojo/framework/core/vdom\";\nimport WidgetBase from \"@dojo/framework/core/WidgetBase\";\nimport * as css from \"./SelectRemoteSource.m.css\";\n\nexport interface SelectRemoteSourceProperties {\n  url: string;\n  label: string;\n  value?: string;\n  params?: any;\n  required?: boolean;\n  onValue?(Value: any): void;\n}\n\nexport interface SelectOption {\n  label: string;\n  value: string;\n  disabled: boolean;\n}\n\nexport default class SelectRemoteSource extends WidgetBase<\n  SelectRemoteSourceProperties\n> {\n  private RemoteOptions: SelectOption[] = [];\n  private Options: any[] = [];\n\n  public async onAttach() {\n    try {\n      let f = await fetch(this.properties.url, {\n        method: \"POST\",\n        body: JSON.stringify(this.properties.params),\n        headers: { \"Content-Type\": \"application/json\" },\n      });\n      if (f.status == 200) {\n        let d = await f.json();\n        this.RemoteOptions = d as SelectOption[];\n        this.Options = [];\n        await this.RemoteOptions.forEach((option, index) => {\n          this.Options.push(\n            v(\"option\", { value: option.value }, [option.label])\n          );\n          this.invalidate();\n        });\n\n        console.log(\"Opciones\", this.Options.length);\n      } else if (f.status == 401) {\n        window.location.href = \"/#login\";\n      }\n    } catch (e) {\n      console.log(e);\n      this.invalidate();\n    }\n  }\n\n  protected render() {\n    return v(\"span\", {}, [\n      v(\"div\", { classes: [\"field\"] }, [\n        v(\"label\", { classes: [\"label\", \"is-small\"] }, [this.properties.label]),\n        v(\"div\", { classes: [\"control\", \"is-small\"] }, [\n          v(\"div\", { classes: [\"select is-small\", css.full_width] }, [\n            v(\n              \"select\",\n              {\n                required: this.properties.required,\n                onchange: (e) => {\n                  this.properties.onValue &&\n                    this.properties.onValue(e.target.value as any);\n                  console.log(\"Click\", e.target, e);\n                },\n              },\n              this.Options \n            ),\n          ]),\n        ]),\n      ]),\n    ]);\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"mycarlog3/SelectRemoteSource\",\"full_width\":\"SelectRemoteSource-m__full_width__e9fe791RePL\"};"],"sourceRoot":""}