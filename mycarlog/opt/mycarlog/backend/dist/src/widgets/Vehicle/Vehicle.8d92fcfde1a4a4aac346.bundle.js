/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
(window.dojoWebpackJsonpmycarlog3=window.dojoWebpackJsonpmycarlog3||[]).push([["src/widgets/Vehicle/Vehicle"],{271:function(e,a,t){t(272),e.exports={" _key":"@dojo/widgets/text-area",root:"text-area-m__root__1NUZh",wrapper:"text-area-m__wrapper__1Nkrq",input:"text-area-m__input__3libn",inputWrapper:"text-area-m__inputWrapper__1LN1m",disabled:"text-area-m__disabled__BN85r",focused:"text-area-m__focused__1Pb_L",readonly:"text-area-m__readonly__21ZTb",required:"text-area-m__required__1NXja",invalid:"text-area-m__invalid__2jMTq",valid:"text-area-m__valid__3mRCW"}},272:function(e,a,t){},295:function(e,a,t){"use strict";t.r(a);var i=t(35),s=t(20),l=t(22),n=t(36),o=t(48),c=t(37),r=t(271),d=t(49),u=t(47),h=t(21),v=t(29),p=t(45),m=t(46);var _=Object(s.a)({icache:Object(h.a)(),theme:v.a,focus:p.a,validity:m.a}).properties().children()(function({id:e,middleware:{icache:a,theme:t,focus:i,validity:l},properties:n,children:h}){const v=t.classes(r);function p(e,a){let t,{valid:i,onValidate:s}=n();"object"==typeof i&&(t=i.message,i=i.valid),e===i&&a===t||s&&s(e,a)}const{aria:m={},columns:_=20,disabled:b,widgetId:y=`textarea-${e}`,maxLength:j,minLength:O,name:f,placeholder:w,readOnly:g,required:P,rows:k=2,initialValue:x,wrapText:S,theme:V,classes:N,labelHidden:q,helperText:T,onValidate:B}=n();let{value:C}=n();if(void 0===C){C=a.get("value"),x!==a.get("initialValue")&&(a.set("value",x),a.set("initialValue",x),C=x)}B&&function(){const{customValidator:e,value:t=a.get("value")||""}=n(),i=a.getOrSet("dirty",!1);if(""===t&&!i)return void p(void 0,"");a.set("dirty",!0);let{valid:s,message:o=""}=l.get("input",t||"");if(s&&e){const a=e(t);a&&(s=a.valid,o=a.message||"")}p(s,o)}();const{valid:L,message:W}=function(){const{valid:e={valid:void 0,message:void 0}}=n();return"boolean"==typeof e?{valid:e,message:void 0}:{valid:e.valid,message:e.message}}(),$=!1===L&&W||T,D=i.isFocused("input"),[U]=h();return Object(s.h)("div",{key:"root",classes:[t.variant(),v.root]},Object(s.h)("div",{key:"wrapper",classes:[v.wrapper,b?v.disabled:null,!1===L?v.invalid:null,!0===L?v.valid:null,g?v.readonly:null,P?v.required:null,D?v.focused:null]},U?Object(s.h)(o.a,{theme:t.compose(d,r,"label"),classes:N,disabled:b,valid:L,readOnly:g,required:P,hidden:q,forId:y,focused:D,active:!!C||D},U):null,Object(s.h)("div",{classes:v.inputWrapper},Object(s.h)("textarea",Object.assign({id:y,key:"input"},Object(c.a)(m),{classes:v.input,cols:`${_}`,disabled:b,focus:i.shouldFocus,"aria-invalid":!1===L?"true":null,maxlength:j?`${j}`:null,minlength:O?`${O}`:null,name:f,placeholder:w,readOnly:g,"aria-readonly":g?"true":null,required:P,rows:`${k}`,value:C,wrap:S,onblur:()=>{const{onBlur:e}=n();e&&e()},onfocus:()=>{const{onFocus:e}=n();e&&e()},oninput:e=>{const{onValue:t}=n();e.stopPropagation();const i=e.target.value;a.set("value",i),t&&t(i)},onkeydown:e=>{const{onKeyDown:a}=n();e.stopPropagation(),a&&a(e.which,()=>{e.preventDefault()})},onkeyup:e=>{const{onKeyUp:a}=n();e.stopPropagation(),a&&a(e.which,()=>{e.preventDefault()})},onclick:()=>{const{onClick:e}=n();e&&e()},onpointerenter:()=>{const{onOver:e}=n();e&&e()},onpointerleave:()=>{const{onOut:e}=n();e&&e()}})))),Object(s.h)(u.a,{text:$,valid:L,classes:N,theme:V}))}),b=t(41),y=t(38);t.d(a,"default",function(){return j});class j extends l.a{constructor(){super(...arguments),this.Params={idvehicle:"-1",idaccount:0,idcontact:"0",rowkey:0,license_plate:"",year:"",fuel_tank_capacity:"",idfuel_tank_capacitytype:"0",vin:"",idvehicletype:"0",idmark:"0",idmodel:"0",idcolor:"0",idfueltype:"0",idunit_measure_fuel_tank:"0",note:""}}SnackBar(e){}async Save(){if(Number(this.Params.idcontact)>0)if(this.Params.license_plate.length>0){let e=await fetch("/vehicle_cu",{method:"POST",body:JSON.stringify(this.Params),headers:{"Content-Type":"application/json"}}),a=await e.json();200==e.status?(console.log(a),a.idvehicle>0?window.location.href="/#vehicles?idvehicle="+a.idvehicle+"&idaccount="+this.Params.idaccount:this.SnackBar("No se pudo guardar")):401==e.status?window.location.href="/#login":this.SnackBar("No se pudo guardar "+e.status)}else this.SnackBar("Complete los campos que son requeridos");else this.SnackBar("Debe seleccionar un Propietario");this.invalidate()}async onAttach(){if(console.log(this.properties.idvehicle),this.Params.idaccount=window.GlobalStore.get(window.GlobalStore.path("root","user","idaccount")),this.properties.idvehicle){var e=window.location.hash.split("?")[1],a=new URLSearchParams(e);this.Params.idvehicle=a.get("idvehicle")||"-2";var t="/vehicle?idvehicle="+this.Params.idvehicle+"&idaccount="+this.Params.idaccount;const i=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});let s=await i.json();console.log(s),s.length>0&&s[0].idaccount&&s[0].idvehicle&&(this.Params=s[0],this.invalidate())}}render(){return Object(s.i)("div",{},[Object(s.j)(y.a,{title:"VEHÍCULO",ShowNew:!0,ShowSave:!0,onSave:()=>{this.Save()},onNew:()=>{this.Params={idaccount:this.Params.idaccount,idvehicle:"-1",idcontact:"0",rowkey:0,license_plate:"",year:"",fuel_tank_capacity:"",idfuel_tank_capacitytype:"0",vin:"",idvehicletype:"0",idmark:"0",idmodel:"0",idcolor:"0",idfueltype:"0",idunit_measure_fuel_tank:"0",note:""}}}),Object(s.i)("div",{classes:[]},[Object(s.i)("div",{classes:[]},[]),Object(s.i)("div",{classes:[]},[Object(s.i)("div",{classes:[]},[Object(s.j)(n.a,{type:"text",disabled:!1,readOnly:!1,required:!0,placeholder:"Placa",value:this.Params.license_plate,onValue:e=>{this.Params.license_plate=e,this.invalidate()}},[{label:"Placa"}])]),Object(s.i)("div",{classes:[]},[])]),Object(s.i)("div",{classes:[]},[Object(s.i)("div",{classes:[]},[Object(s.j)(n.a,{type:"number",disabled:!1,readOnly:!1,value:this.Params.year,onValue:e=>{this.Params.year=e,this.invalidate()}},[{label:"Año"}])]),Object(s.i)("div",{classes:[]},[Object(s.j)(n.a,{type:"text",disabled:!1,readOnly:!1,value:this.Params.vin,onValue:e=>{this.Params.vin=e,this.invalidate()}},[{label:"VIN"}])])]),Object(s.i)("div",{classes:""},[Object(s.i)("div",{classes:[]},[]),Object(s.i)("div",{classes:[]},[])]),Object(s.i)("div",{classes:""},[Object(s.i)("div",{classes:[]},[Object(s.j)(n.a,{key:"t6",type:"number",disabled:!1,readOnly:!1,value:this.Params.fuel_tank_capacity,onValue:e=>{this.Params.fuel_tank_capacity=e,this.invalidate()}},[{label:"Capacidad del tanque"}])]),Object(s.i)("div",{classes:[]},[])]),Object(s.i)("div",{classes:[""]},[Object(s.j)(_,{columns:40,rows:5,placeholder:"Notas",key:"text-area",value:this.Params.note,onValue:e=>{this.Params.note=e,this.invalidate()}})])])])}}i.a([Object(b.a)()],j.prototype,"Params",void 0)}}]);
//# sourceMappingURL=Vehicle.8d92fcfde1a4a4aac346.bundle.js.map