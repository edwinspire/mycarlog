/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
(window.dojoWebpackJsonpmycarlog3=window.dojoWebpackJsonpmycarlog3||[]).push([["src/widgets/Vehicle/Vehicle"],{271:function(e,a,t){e.exports={" _key":"mycarlog3/Vehicle",spacing:"Vehicle-m__spacing__e9fe791z0jY"}},273:function(e,a,t){t(274),e.exports={" _key":"@dojo/widgets/text-area",root:"text-area-m__root__1NUZh",wrapper:"text-area-m__wrapper__1Nkrq",input:"text-area-m__input__3libn",inputWrapper:"text-area-m__inputWrapper__1LN1m",disabled:"text-area-m__disabled__BN85r",focused:"text-area-m__focused__1Pb_L",readonly:"text-area-m__readonly__21ZTb",required:"text-area-m__required__1NXja",invalid:"text-area-m__invalid__2jMTq",valid:"text-area-m__valid__3mRCW"}},274:function(e,a,t){},276:function(e,a,t){e.exports={" _key":"mycarlog3/SelectRemoteSource",full_width:"SelectRemoteSource-m__full_width__e9fe791RePL"}},298:function(e,a,t){"use strict";t.r(a);var i=t(34),s=t(20),l=t(21),c=t(271),o=t(35),n=t(46),r=t(36),d=t(273),u=t(47),p=t(45),h=t(23),v=t(28),b=t(43),m=t(44);var j=Object(s.a)({icache:Object(h.a)(),theme:v.a,focus:b.a,validity:m.a}).properties().children()(function({id:e,middleware:{icache:a,theme:t,focus:i,validity:l},properties:c,children:o}){const h=t.classes(d);function v(e,a){let t,{valid:i,onValidate:s}=c();"object"==typeof i&&(t=i.message,i=i.valid),e===i&&a===t||s&&s(e,a)}const{aria:b={},columns:m=20,disabled:j,widgetId:O=`textarea-${e}`,maxLength:_,minLength:y,name:f,placeholder:g,readOnly:w,required:k,rows:P=2,initialValue:x,wrapText:S,theme:V,classes:q,labelHidden:N,helperText:C,onValidate:T}=c();let{value:R}=c();if(void 0===R){R=a.get("value"),x!==a.get("initialValue")&&(a.set("value",x),a.set("initialValue",x),R=x)}T&&function(){const{customValidator:e,value:t=a.get("value")||""}=c(),i=a.getOrSet("dirty",!1);if(""===t&&!i)return void v(void 0,"");a.set("dirty",!0);let{valid:s,message:o=""}=l.get("input",t||"");if(s&&e){const a=e(t);a&&(s=a.valid,o=a.message||"")}v(s,o)}();const{valid:B,message:L}=function(){const{valid:e={valid:void 0,message:void 0}}=c();return"boolean"==typeof e?{valid:e,message:void 0}:{valid:e.valid,message:e.message}}(),W=!1===B&&L||C,M=i.isFocused("input"),[$]=o();return Object(s.h)("div",{key:"root",classes:[t.variant(),h.root]},Object(s.h)("div",{key:"wrapper",classes:[h.wrapper,j?h.disabled:null,!1===B?h.invalid:null,!0===B?h.valid:null,w?h.readonly:null,k?h.required:null,M?h.focused:null]},$?Object(s.h)(n.a,{theme:t.compose(u,d,"label"),classes:q,disabled:j,valid:B,readOnly:w,required:k,hidden:N,forId:O,focused:M,active:!!R||M},$):null,Object(s.h)("div",{classes:h.inputWrapper},Object(s.h)("textarea",Object.assign({id:O,key:"input"},Object(r.a)(b),{classes:h.input,cols:`${m}`,disabled:j,focus:i.shouldFocus,"aria-invalid":!1===B?"true":null,maxlength:_?`${_}`:null,minlength:y?`${y}`:null,name:f,placeholder:g,readOnly:w,"aria-readonly":w?"true":null,required:k,rows:`${P}`,value:R,wrap:S,onblur:()=>{const{onBlur:e}=c();e&&e()},onfocus:()=>{const{onFocus:e}=c();e&&e()},oninput:e=>{const{onValue:t}=c();e.stopPropagation();const i=e.target.value;a.set("value",i),t&&t(i)},onkeydown:e=>{const{onKeyDown:a}=c();e.stopPropagation(),a&&a(e.which,()=>{e.preventDefault()})},onkeyup:e=>{const{onKeyUp:a}=c();e.stopPropagation(),a&&a(e.which,()=>{e.preventDefault()})},onclick:()=>{const{onClick:e}=c();e&&e()},onpointerenter:()=>{const{onOver:e}=c();e&&e()},onpointerleave:()=>{const{onOut:e}=c();e&&e()}})))),Object(s.h)(p.a,{text:W,valid:B,classes:q,theme:V}))}),O=t(276);class _ extends l.a{constructor(){super(...arguments),this.RemoteOptions=[],this.Options=[]}async onAttach(){try{let e=await fetch(this.properties.url,{method:"POST",body:JSON.stringify(this.properties.params),headers:{"Content-Type":"application/json"}});if(200==e.status){let a=await e.json();this.RemoteOptions=a,this.Options=[],await this.RemoteOptions.forEach((e,a)=>{this.Options.push(Object(s.i)("option",{value:e.value},[e.label])),this.invalidate()}),console.log("Opciones",this.Options.length)}else 401==e.status&&(window.location.href="/#login")}catch(e){console.log(e),this.invalidate()}}render(){return Object(s.i)("span",{classes:[],onclick:e=>{console.log("Click")}},[Object(s.i)("div",{classes:["field"]},[Object(s.i)("label",{classes:["label","is-small"]},["Hola"]),Object(s.i)("div",{classes:["control","is-small"]},[Object(s.i)("div",{classes:["select is-small",O.full_width]},[Object(s.i)("select",{},this.Options)])])])])}}var y=t(40),f=t(38);class g extends l.a{render(){return Object(s.i)("span",{classes:[],onclick:e=>{console.log("Click")}},[Object(s.i)("div",{classes:["field"]},[Object(s.i)("label",{classes:["label","is-small"]},["Hola"]),Object(s.i)("div",{classes:["control","is-small"]},[Object(s.i)("input",{placeholder:"Prueba input",classes:["input","is-small"]})])])])}}var w=t(37);t.d(a,"default",function(){return k});class k extends l.a{constructor(){super(...arguments),this.Params={idvehicle:"-1",idaccount:0,idcontact:"0",rowkey:0,license_plate:"",year:"",fuel_tank_capacity:"",idfuel_tank_capacitytype:"0",vin:"",idvehicletype:"0",idmark:"0",idmodel:"0",idcolor:"0",idfueltype:"0",idunit_measure_fuel_tank:"0",note:""}}SnackBar(e){}async Save(){if(Number(this.Params.idcontact)>0)if(this.Params.license_plate.length>0){let e=await fetch("/vehicle_cu",{method:"POST",body:JSON.stringify(this.Params),headers:{"Content-Type":"application/json"}}),a=await e.json();200==e.status?(console.log(a),a.idvehicle>0?window.location.href="/#vehicles?idvehicle="+a.idvehicle+"&idaccount="+this.Params.idaccount:this.SnackBar("No se pudo guardar")):401==e.status?window.location.href="/#login":this.SnackBar("No se pudo guardar "+e.status)}else this.SnackBar("Complete los campos que son requeridos");else this.SnackBar("Debe seleccionar un Propietario");this.invalidate()}async onAttach(){if(console.log(this.properties.idvehicle),this.Params.idaccount=window.GlobalStore.get(window.GlobalStore.path("root","user","idaccount")),this.properties.idvehicle){var e=window.location.hash.split("?")[1],a=new URLSearchParams(e);this.Params.idvehicle=a.get("idvehicle")||"-2";var t="/vehicle?idvehicle="+this.Params.idvehicle+"&idaccount="+this.Params.idaccount;const i=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});let s=await i.json();console.log(s),s.length>0&&s[0].idaccount&&s[0].idvehicle&&(this.Params=s[0],this.invalidate())}}render(){return Object(s.i)("div",{},[Object(s.j)(f.a,{}),Object(s.j)(w.a,{title:"VEHÍCULO",ShowNew:!0,ShowSave:!0,onSave:()=>{this.Save()},onNew:()=>{this.Params={idaccount:this.Params.idaccount,idvehicle:"-1",idcontact:"0",rowkey:0,license_plate:"",year:"",fuel_tank_capacity:"",idfuel_tank_capacitytype:"0",vin:"",idvehicletype:"0",idmark:"0",idmodel:"0",idcolor:"0",idfueltype:"0",idunit_measure_fuel_tank:"0",note:""}}}),Object(s.i)("div",{classes:[]},[Object(s.i)("div",{classes:[]},[]),Object(s.i)("div",{classes:["columns is-mobile",c.spacing]},[Object(s.i)("div",{classes:["column"]},[Object(s.j)(_,{label:"Propietario",url:"/toselect/contacts"})]),Object(s.i)("div",{classes:["column"]},[Object(s.j)(g,{label:"Mi quinto input"})])]),Object(s.i)("div",{classes:["columns is-mobile",c.spacing]},[Object(s.i)("div",{classes:["column"]},[Object(s.j)(g,{label:"Mi primer input"})]),Object(s.i)("div",{classes:["column"]},[Object(s.j)(g,{label:"Mi quinto input"})])]),Object(s.j)(g,{label:"Mi primer input"}),Object(s.i)("div",{classes:[]},[Object(s.i)("div",{classes:[]},[Object(s.j)(o.a,{type:"text",disabled:!1,readOnly:!1,required:!0,placeholder:"Placa",value:this.Params.license_plate,onValue:e=>{this.Params.license_plate=e,this.invalidate()}},[{label:"Placa"}])]),Object(s.i)("div",{classes:[]},[])]),Object(s.i)("div",{classes:[]},[Object(s.i)("div",{classes:[]},[Object(s.j)(o.a,{type:"number",disabled:!1,readOnly:!1,value:this.Params.year,onValue:e=>{this.Params.year=e,this.invalidate()}},[{label:"Año"}])]),Object(s.i)("div",{classes:[]},[Object(s.j)(o.a,{type:"text",disabled:!1,readOnly:!1,value:this.Params.vin,onValue:e=>{this.Params.vin=e,this.invalidate()}},[{label:"VIN"}])])]),Object(s.i)("div",{classes:""},[Object(s.i)("div",{classes:[]},[]),Object(s.i)("div",{classes:[]},[])]),Object(s.i)("div",{classes:""},[Object(s.i)("div",{classes:[]},[Object(s.j)(o.a,{key:"t6",type:"number",disabled:!1,readOnly:!1,value:this.Params.fuel_tank_capacity,onValue:e=>{this.Params.fuel_tank_capacity=e,this.invalidate()}},[{label:"Capacidad del tanque"}])]),Object(s.i)("div",{classes:[]},[])]),Object(s.i)("div",{classes:[""]},[Object(s.j)(j,{columns:40,rows:5,placeholder:"Notas",key:"text-area",value:this.Params.note,onValue:e=>{this.Params.note=e,this.invalidate()}})])])])}}i.a([Object(y.a)()],k.prototype,"Params",void 0)}}]);
//# sourceMappingURL=Vehicle.37dcba32cc30806ecff4.bundle.js.map