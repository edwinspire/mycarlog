{"version":3,"sources":["webpack://lib_mycarlog3/./src/widgets/Register/Register.m.css","webpack://lib_mycarlog3/./src/widgets/Register/Register.ts"],"names":["module","exports"," _key","root","body","wrapper","form-success","container","form","links_block","bg_bubbles","square","__webpack_require__","r","__webpack_exports__","d","Register","_dojo_framework_core_vdom__WEBPACK_IMPORTED_MODULE_0__","_dojo_framework_core_WidgetBase__WEBPACK_IMPORTED_MODULE_1__","_Register_m_css__WEBPACK_IMPORTED_MODULE_2__","[object Object]","type","msg","console","log","document","cookie","Object","classes","action","method","onsubmit","e","target","inputs","getElementsByTagName","i","DataLogin","pwd","pwd2","length","defineProperty","name","value","enumerable","resp","fetch","JSON","stringify","headers","Content-Type","data","json","status","this","SnackBar","Message","setTimeout","window","location","href","preventDefault","placeholder","required"],"mappings":"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","file":"src/widgets/Register/Register.905be22a889614b56c8c.bundle.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"mycarlog3/Register\",\"root\":\"Register-m__root__e9fe79ZfqvN\",\"body\":\"Register-m__body__e9fe7914P3S\",\"wrapper\":\"Register-m__wrapper__e9fe791i_sn\",\"form-success\":\"Register-m__form-success__e9fe791TD6E\",\"container\":\"Register-m__container__e9fe79159nE\",\"form\":\"Register-m__form__e9fe79vdDOV\",\"links_block\":\"Register-m__links_block__e9fe791j0gK\",\"bg_bubbles\":\"Register-m__bg_bubbles__e9fe791NnOJ\",\"square\":\"Register-m__square__e9fe793a002\"};","import { v } from \"@dojo/framework/core/vdom\";\nimport WidgetBase from \"@dojo/framework/core/WidgetBase\";\nimport * as css from \"./Register.m.css\";\n//import SBar from '@dojo/widgets/snackbar';\n//import watch from '@dojo/framework/core/decorators/watch';\n\nexport default class Register extends WidgetBase {\n  // private _openSnack = false;\n  // private _MsgSnackBar = '-';\n  // private _SnackType: 'success'|'error'|undefined;\n\n  private SnackBar(type: \"success\" | \"error\" | undefined, msg: string) {\n    console.log(\"SnackBar \" + msg);\n    // this._openSnack = true;\n    // this._MsgSnackBar = msg;\n    // this._SnackType = type;\n    // this.invalidate();\n    // setTimeout(()=>{\n    // \tthis._openSnack = false;\n    // \tthis.invalidate();\n    // }, 4000)\n  }\n\n  onAttach() {\n    document.cookie = \"TOKEN_USER= ; expires = Thu, 01 Jan 1970 00:00:00 GMT\";\n    console.log(\"Borrar\");\n  }\n\n  protected render() {\n    return v(\"div\", { classes: [css.root] }, [\n      v(\"div\", { classes: [css.body] }, [\n        v(\"div\", { classes: css.wrapper }, [\n          v(\"div\", { classes: [css.container] }, [\n            v(\"h1\", {}, [\"Registro\"]),\n            v(\n              \"form\",\n              {\n                classes: css.form,\n                action: \"/register\",\n                method: \"post\",\n                onsubmit: (e: Event) => {\n                  if (e.target) {\n                    let d = e.target as HTMLFormElement;\n                    let inputs = d.getElementsByTagName(\"input\");\n                    let i = 0;\n                    var DataLogin = {};\n                    let pwd = \"\";\n                    let pwd2 = \"\";\n\n                    for (i = 0; i < inputs.length; i++) {\n                      Object.defineProperty(DataLogin, inputs[i].name, {\n                        value: inputs[i].value,\n                        enumerable: true,\n                      });\n\n                      if (inputs[i].name == \"pwd\") {\n                        pwd = inputs[i].value;\n                      }\n\n                      if (inputs[i].name == \"pwd2\") {\n                        pwd2 = inputs[i].value;\n                      }\n\n                      if (i + 1 == inputs.length) {\n                        if (pwd == pwd2) {\n                          (async () => {\n                            let resp = await fetch(\"/register\", {\n                              method: \"POST\",\n                              body: JSON.stringify(DataLogin),\n                              headers: { \"Content-Type\": \"application/json\" },\n                            });\n                            let data = await resp.json();\n                            if (resp.status == 200) {\n                              console.log(data);\n                              if (data.Register) {\n                                this.SnackBar(\"success\", data.Message);\n                                setTimeout(() => {\n                                  window.location.href = \"/#login\";\n                                }, 5000);\n                              } else {\n                                this.SnackBar(\"error\", data.Message);\n                              }\n                            } else {\n                              console.log(\"No se pudo registrar\", data);\n                              //alert('No se pudo registrar');\n                              this.SnackBar(\"error\", \"no se pudo guardar\");\n                            }\n                          })();\n                        } else {\n                          this.SnackBar(\n                            \"error\",\n                            \"Las contraseñas no coinciden\"\n                          );\n                        }\n                      }\n                    }\n                  }\n\n                  e.preventDefault();\n                },\n              },\n              [\n                v(\"input\", {\n                  name: \"firstname\",\n                  type: \"text\",\n                  placeholder: \"Nombre\",\n                  required: \"required\",\n                }),\n                v(\"input\", {\n                  name: \"lastname\",\n                  type: \"text\",\n                  placeholder: \"Apellido\",\n                  required: \"required\",\n                }),\n                v(\"input\", {\n                  name: \"username\",\n                  type: \"email\",\n                  placeholder: \"Email\",\n                  required: \"required\",\n                }),\n                v(\"input\", {\n                  name: \"pwd\",\n                  type: \"password\",\n                  placeholder: \"Contraseña\",\n                  required: \"required\",\n                }),\n                v(\"input\", {\n                  name: \"pwd2\",\n                  type: \"password\",\n                  placeholder: \"Confirme Contraseña\",\n                  required: \"required\",\n                }),\n                v(\"input\", {\n                  name: \"register\",\n                  type: \"submit\",\n                  value: \"Aceptar\",\n                }),\n                v(\"div\", { classes: css.links_block }, [\n                  v(\"a\", { href: \"/#login\" }, [\"Login\"]),\n                ]),\n              ]\n            ),\n          ]),\n          // w(SBar, {open: this._openSnack, leading: false, type: this._SnackType, messageRenderer: () => this._MsgSnackBar})\n        ]),\n      ]),\n      v(\"ul\", { classes: css.bg_bubbles }, [\n        v(\"li\"),\n        v(\"li\"),\n        v(\"li\"),\n        v(\"li\"),\n        v(\"li\"),\n        v(\"li\"),\n        v(\"li\"),\n        v(\"li\"),\n        v(\"li\"),\n        v(\"li\"),\n      ]),\n    ]);\n  }\n}\n"],"sourceRoot":""}