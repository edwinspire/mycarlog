/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
(window.dojoWebpackJsonpmycarlog3=window.dojoWebpackJsonpmycarlog3||[]).push([["src/widgets/Login/Login"],{263:function(e,o,t){e.exports={" _key":"mycarlog3/Login",root:"Login-m__root__e9fe791YVXP",body:"Login-m__body__e9fe79Z7a8j",wrapper:"Login-m__wrapper__e9fe792f8oy","form-success":"Login-m__form-success__e9fe793ALq-",container:"Login-m__container__e9fe79NQvnb",form:"Login-m__form__e9fe79rnNI7",links_block:"Login-m__links_block__e9fe79eBLqT",bg_bubbles:"Login-m__bg_bubbles__e9fe793ft1S",square:"Login-m__square__e9fe792G8Jf"}},306:function(e,o,t){"use strict";t.r(o),t.d(o,"default",function(){return n});var i=t(20),r=t(21),a=t(263),s=t(38);class n extends r.a{showSnackBar(e,o){console.log(e);var{path:t,apply:i}=window.GlobalStore;i([Object(s.a)(t("root","notifications"),{message:e,type:o})],!0)}onAttach(){document.cookie="TOKEN_USER= ; expires = Thu, 01 Jan 1970 00:00:00 GMT",console.log("Borrar")}render(){return Object(i.i)("div",{classes:[a.root]},[Object(i.i)("div",{classes:[a.body]},[Object(i.i)("div",{classes:a.wrapper},[Object(i.i)("div",{classes:[a.container]},[Object(i.i)("h1",{},["Login"]),Object(i.i)("form",{classes:a.form,action:"/login",method:"post",onsubmit:e=>{const{path:o,apply:t}=window.GlobalStore;if(e.target){let r=e.target.getElementsByTagName("input"),a=0;var i={};for(a=0;a<r.length;a++)Object.defineProperty(i,r[a].name,{value:r[a].value,enumerable:!0}),a+1==r.length&&(async()=>{try{let r=await fetch("/login",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}});var e=await r.json();console.log(e),200==r.status?e.login&&(t([Object(s.a)(o("root","user","idaccount"),e.idaccount)],!0),t([Object(s.a)(o("root","user","iduser"),e.iduser)],!0),t([Object(s.a)(o("root","user","preferences"),e.preferences)],!0),t([Object(s.a)(o("root","user","username"),e.username)],!0),t([Object(s.a)(o("root","user","fullname"),e.fullname)],!0),t([Object(s.a)(o("root","user","rowkey"),e.rowkey)],!0),window.location.href="/#home"):this.showSnackBar("Algo salió mal",void 0)}catch(e){this.showSnackBar(e,"error")}})()}e.preventDefault()}},[Object(i.i)("input",{name:"username",type:"text",placeholder:"Usuario",required:"required"},[]),Object(i.i)("input",{name:"pwd",type:"password",placeholder:"Contraseña",required:"required"},[]),Object(i.i)("input",{type:"submit",name:"submit",value:"Aceptar"}),Object(i.i)("div",{classes:a.links_block},[Object(i.i)("a",{href:"/#register"},["Registro"])])])])])]),Object(i.i)("ul",{classes:a.bg_bubbles},[Object(i.i)("li"),Object(i.i)("li"),Object(i.i)("li"),Object(i.i)("li"),Object(i.i)("li"),Object(i.i)("li"),Object(i.i)("li"),Object(i.i)("li"),Object(i.i)("li"),Object(i.i)("li")])])}}}}]);
//# sourceMappingURL=Login.9adbfd5d4e70cb4ccbe5.bundle.js.map