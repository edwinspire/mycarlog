{"version":3,"sources":["webpack://lib_mycarlog3/./src/widgets/AccountActivation/AccountActivation.m.css","webpack://lib_mycarlog3/./src/widgets/AccountActivation/AccountActivation.ts"],"names":["module","exports"," _key","root","body","wrapper","form-success","container","form","links_block","bg_bubbles","square","__webpack_require__","r","__webpack_exports__","d","AccountActivation","_dojo_framework_core_vdom__WEBPACK_IMPORTED_MODULE_0__","_dojo_framework_core_WidgetBase__WEBPACK_IMPORTED_MODULE_1__","_AccountActivation_m_css__WEBPACK_IMPORTED_MODULE_2__","[object Object]","document","cookie","console","log","type","msg","Object","classes","action","method","onsubmit","e","paramsString","window","location","hash","split","datacode","code","URLSearchParams","get","resp","fetch","JSON","stringify","headers","Content-Type","data","json","status","idaccount","this","SnackBar","notes","setTimeout","href","preventDefault","name","value"],"mappings":";;;;;;;;uJACAA,EAAAC,QAAA,CAAkBC,QAAA,8BAAAC,KAAA,yCAAAC,KAAA,yCAAAC,QAAA,4CAAAC,eAAA,iDAAAC,UAAA,8CAAAC,KAAA,yCAAAC,YAAA,gDAAAC,WAAA,+CAAAC,OAAA,8ECDlBC,EAAAC,EAAAC,GAAAF,EAAAG,EAAAD,EAAA,4BAAAE,IAAA,IAAAC,EAAAL,EAAA,IAAAM,EAAAN,EAAA,IAAAO,EAAAP,EAAA,KAKe,MAAMI,UAA0BE,EAAA,EAE9CE,WACCC,SAASC,OAAS,wDAClBC,QAAQC,IAAI,UAOLJ,SAASK,EAAmCC,IAY1CN,SAET,OAAOO,OAAAV,EAAA,EAAAU,CAAE,MAAO,CAACC,QAAS,CAACT,EAAA,OAAY,CACtCQ,OAAAV,EAAA,EAAAU,CAAE,MAAO,CAACC,QAAS,CAACT,EAAA,OAAY,CAC/BQ,OAAAV,EAAA,EAAAU,CAAE,MAAO,CAACC,QAAST,EAAA,SAAc,CAChCQ,OAAAV,EAAA,EAAAU,CAAE,MAAO,CAAEC,QAAS,CAACT,EAAA,YAAiB,CACrCQ,OAAAV,EAAA,EAAAU,CAAE,KAAM,GAAI,CAAC,gBACbA,OAAAV,EAAA,EAAAU,CAAE,MAAO,GAAI,CAAC,4DACbA,OAAAV,EAAA,EAAAU,CAAE,IAAK,GAAI,CAAC,+CAEbA,OAAAV,EAAA,EAAAU,CAAE,OAAQ,CAACC,QAAST,EAAA,KAAUU,OAAQ,OAAQC,OAAQ,OAAQC,SAAWC,IAExE,WAGE,IAAIC,EAAeC,OAAOC,SAASC,KAAKC,MAAM,KAAK,GAG/CC,EAAW,CACdC,KAHkB,IAAIC,gBAAgBP,GAGnBQ,IAAI,oBAGxB,IAAIC,QAAaC,MAAM,sBAAsB,CAACb,OAAQ,OAAQ1B,KAAMwC,KAAKC,UAAUP,GAAWQ,QAAS,CAACC,eAAgB,sBACpHC,QAAaN,EAAKO,OAEJ,KAAfP,EAAKQ,OAEJF,EAAKG,WAAaH,EAAKG,UAAY,GAErCC,KAAKC,SAAS,UAAWL,EAAKM,OAC9BC,WAAW,KACVrB,OAAOC,SAASqB,KAAO,WACrB,MAGHJ,KAAKC,SAAS,QAASL,EAAKM,QAI7B/B,QAAQC,IAAI,uBAAwBwB,GAEpCI,KAAKC,SAAS,QAAS,wBA7B1B,GAkCCrB,EAAEyB,mBACC,CACJ9B,OAAAV,EAAA,EAAAU,CAAE,QAAS,CAAC+B,KAAM,YAAajC,KAAM,SAAUkC,MAAO,sBAM1DhC,OAAAV,EAAA,EAAAU,CAAE,KAAM,CAACC,QAAST,EAAA,YAAiB,CAClCQ,OAAAV,EAAA,EAAAU,CAAE,MACFA,OAAAV,EAAA,EAAAU,CAAE,MACFA,OAAAV,EAAA,EAAAU,CAAE,MACFA,OAAAV,EAAA,EAAAU,CAAE,MACFA,OAAAV,EAAA,EAAAU,CAAE,MACFA,OAAAV,EAAA,EAAAU,CAAE,MACFA,OAAAV,EAAA,EAAAU,CAAE,MACFA,OAAAV,EAAA,EAAAU,CAAE,MACFA,OAAAV,EAAA,EAAAU,CAAE,MACFA,OAAAV,EAAA,EAAAU,CAAE","file":"src/widgets/AccountActivation/AccountActivation.9837ef80d76596ce3baa.bundle.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"mycarlog3/AccountActivation\",\"root\":\"AccountActivation-m__root__e9fe791prX4\",\"body\":\"AccountActivation-m__body__e9fe792Rcia\",\"wrapper\":\"AccountActivation-m__wrapper__e9fe792z0rd\",\"form-success\":\"AccountActivation-m__form-success__e9fe79XXack\",\"container\":\"AccountActivation-m__container__e9fe793cew6\",\"form\":\"AccountActivation-m__form__e9fe7924utU\",\"links_block\":\"AccountActivation-m__links_block__e9fe791xGLF\",\"bg_bubbles\":\"AccountActivation-m__bg_bubbles__e9fe79E9QUt\",\"square\":\"AccountActivation-m__square__e9fe791muf0\"};","import { v } from '@dojo/framework/core/vdom';\nimport WidgetBase from '@dojo/framework/core/WidgetBase';\nimport * as css from './AccountActivation.m.css';\n//import SBar from '@dojo/widgets/snackbar';\n\nexport default class AccountActivation extends WidgetBase  {\n\n\tonAttach(){\n\t\tdocument.cookie = \"TOKEN_USER= ; expires = Thu, 01 Jan 1970 00:00:00 GMT\";\n\t\tconsole.log('Borrar');\n\t}\n\n\t// private _openSnack = false;\n\t// private _MsgSnackBar = '-';\n\t// private _SnackType: 'success'|'error'|undefined;\n\t\n\tprivate SnackBar(type: 'success'|'error'|undefined, msg: string){\n\t\t// console.log('SnackBar '+msg)\t\n\t\t// this._openSnack = true;\n\t\t// this._MsgSnackBar = msg;\n\t\t// this._SnackType = type;\n\t\t// this.invalidate();\n\t\t// setTimeout(()=>{\n\t\t// \tthis._openSnack = false;\n\t\t// \tthis.invalidate();\n\t\t// }, 4000)\t\t\n\t}\n\n\tprotected render(){\n\n\t\treturn v('div', {classes: [css.root]}, [\n\t\t\tv('div', {classes: [css.body]}, [\n\t\t\t\tv('div', {classes: css.wrapper}, [\n\t\t\t\t\tv('div', { classes: [css.container]}, [\n\t\t\t\t\t\tv('h1', {}, ['Bienvenido!']),\n\t\t\t\t\t\tv('div', {}, ['Su cuenta ha sido creada. El siguiente paso es activarla.', \n\t\t\t\t\t\t\tv('p', {}, ['Presione el botÃ³n para activar su cuenta'])\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\tv('form', {classes: css.form, action: \"/xyz\", method: \"POST\", onsubmit: (e: Event)=>{\t\n\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tasync ()=>{\n\n\t\t\t\t\t\t\t\t\tvar paramsString = window.location.hash.split('?')[1];\n\t\t\t\t\t\t\t\t\tvar searchParams = new URLSearchParams(paramsString);\n\n\t\t\t\t\t\t\t\t\tvar datacode = {\n\t\t\t\t\t\t\t\t\t\tcode: searchParams.get(\"activation_code\")\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tlet resp = await fetch(\"/account_activation\",{method: 'POST', body: JSON.stringify(datacode), headers: {'Content-Type': 'application/json'}});\n\t\t\t\t\t\t\t\t\tlet data = await resp.json();\n\n\t\t\t\t\t\t\t\t\tif(resp.status == 200){\n\n\t\t\t\t\t\t\t\t\t\tif(data.idaccount && data.idaccount > 0){\n\n\t\t\t\t\t\t\t\t\t\t\tthis.SnackBar('success', data.notes);\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\t\t\t\twindow.location.href = \"/#login\";\n\t\t\t\t\t\t\t\t\t\t\t}, 5000);\n\n\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\tthis.SnackBar('error', data.notes);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tconsole.log('No se pudo registrar', data);\n\t\t\t\t\t\t\t\t\t\t//alert('No se pudo registrar');\n\t\t\t\t\t\t\t\t\t\tthis.SnackBar('error', 'no se pudo guardar');\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)();\n\n\t\t\t\t\t\t\t\te.preventDefault();\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}}, [\n\t\t\t\t\t\t\tv('input', {name: 'Continuar', type: 'submit', value: 'Continuar'})\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t])\n\t\t\t\t\t]),\n\t\t\t//\tw(SBar, {open: this._openSnack, leading: false, type: this._SnackType, messageRenderer: () => this._MsgSnackBar})\n\t\t\t\t]),\n\t\t\tv('ul', {classes: css.bg_bubbles}, [\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li'),\n\t\t\t\tv('li')\n\t\t\t\t])\n\t\t\t])\n\t}\n}"],"sourceRoot":""}