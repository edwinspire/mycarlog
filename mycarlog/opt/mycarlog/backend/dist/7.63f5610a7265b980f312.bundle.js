/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
(window.dojoWebpackJsonppen_onitoring_ystem=window.dojoWebpackJsonppen_onitoring_ystem||[]).push([[7],{323:function(e,t,a){e.exports={" _key":"OpenMonitoringSystem/VehicleCard",container:"VehicleCard-m__container__309e8d3ggyL",column:"VehicleCard-m__column__309e8d2hzND",row:"VehicleCard-m__row__309e8d1cZVt",label:"VehicleCard-m__label__309e8d3hpgA",title:"VehicleCard-m__title__309e8d1zTDQ",image:"VehicleCard-m__image__309e8d1mXtV"}},325:function(e,t,a){a(326),e.exports={" _key":"@dojo/widgets/card",root:"card-m__root__1zMtM",actions:"card-m__actions__1Z_Hb",actionButtons:"card-m__actionButtons__2SSbU",actionIcons:"card-m__actionIcons__3aObP",primaryAction:"card-m__primaryAction__1zj-J",media:"card-m__media__2jfnD",mediaContent:"card-m__mediaContent__2DMyX",mediaSquare:"card-m__mediaSquare__fDbOX",media16by9:"card-m__media16by9__3qldC",primary:"card-m__primary__r84rj",secondary:"card-m__secondary__2FZlH"}},326:function(e,t,a){},333:function(e,t,a){"use strict";a.r(t);var i=a(18),c=a(19),s=a(31),o=a(49),n=a(36),l=a(323),r=a(20),d=a(50),h=a(140);function _(){return Object(d.b)((e,t)=>{Object(h.a)(function(){this.invalidate()})(e)})}var j=a(21),b=a(325);let p=class extends(Object(j.c)(c.a)){render(){const{actionsRenderer:e}=this.properties,t=e&&e();return Object(i.i)("div",{key:"root",classes:this.theme(b.root)},this.children,t&&Object(i.i)("div",{classes:this.theme(b.actions)},t))}};var m=p=r.__decorate([Object(j.f)(b),_()],p),u=a(39),v=a(35),O=a(45);class y extends c.b{constructor(){super(...arguments),this.clase="fa-car-side",this.Data=this.properties}onAttach(){this.Data=this.properties,this.Data.idaccount=window.GlobalStore.get(window.GlobalStore.path("root","user","preferences","last_vehicle","idvehicle")),window.onstorage=(e=>{console.log("The "+e.key+" key has been changed from "+e.oldValue+" to "+e.newValue+".",e),this.Data.name=e.newValue,this.invalidate()}),this.invalidate()}render(){return Object(i.j)("div",{classes:l.container},[Object(i.j)("div",{classes:[l.column]},[Object(i.j)("div",{},[Object(i.k)(m,{},[Object(i.j)("div",{onClick:()=>{const{path:e,apply:t}=window.GlobalStore;t([Object(O.a)(e("root","user","preferences","last_vehicle","idvehicle"),this.Data.idvehicle)],!0),console.log("Se ha presionado",this.Data),this.invalidate()}},[Object(i.k)(u.a,{label:this.Data.name||this.Data.license_plate+" - "+this.Data.vin,classes:[this.clase,"far",l.title],ShowLabel:!0}),Object(i.j)("div",{},[Object(i.j)("img",{classes:[l.image]},[]),Object(i.j)("div",{},[Object(i.j)("div",{},[Object(i.j)("div",{},[Object(i.j)("span",{classes:[l.label]},["VIN: "]),Object(i.j)("span",{},[this.Data.vin])]),Object(i.j)("div",{},[Object(i.j)("span",{classes:[l.label]},["AÃ±o: "]),Object(i.j)("span",{},[this.Data.year])]),Object(i.j)("div",{},[Object(i.j)("span",{classes:[l.label]},["Propietario: "]),Object(i.j)("span",{},[this.Data.lfname])]),Object(i.j)("div",{},[Object(i.j)("span",{classes:[l.label]},["Tipo combustible: "]),Object(i.j)("span",{},[this.Data.fueltype])]),Object(i.j)("div",{},[Object(i.j)("span",{},["Color: "]),Object(i.j)("span",{},[this.Data.color])])])]),Object(i.j)("div",{onclick:()=>{this.Data.color="Verde",console.log("Invalida"),this.invalidate()}},["Piecito"])])])])])])])}}Object(n.a)([Object(v.a)()],y.prototype,"Data",void 0),a.d(t,"default",function(){return f});class f extends c.b{constructor(){super(...arguments),this.Vehicles=[],this.TextSearch=""}async GetVehicles(){const{path:e}=window.GlobalStore;let t=window.GlobalStore.get(e("root","user","idaccount"));try{const e=await fetch("/vehicles",{method:"POST",body:JSON.stringify({idaccount:t,Search:this.TextSearch}),headers:{"Content-Type":"application/json"}});if(200==e.status){this.Vehicles=[];let t=await e.json();console.log(t),Array.isArray(t)&&t.forEach((e,t)=>{console.log(e.license_plate),this.Vehicles.push(Object(i.k)(y,{idvehicle:e.idvehicle,name:e.name,color:e.color,lfname:e.lfname,fueltype:e.fueltype,license_plate:e.license_plate,vin:e.vin,year:e.year,fuel_tank_capacity:e.fuel_tank_capacity})),this.invalidate()}),this.invalidate()}}catch(e){console.log(e)}}render(){return Object(i.j)("div",{},[Object(i.k)(o.a,{}),Object(i.k)(s.a,{label:"Buscar",value:this.TextSearch,onChange:e=>{console.log(JSON.stringify(e)),this.TextSearch=e,this.invalidate(),this.GetVehicles().then(()=>{console.log("invalida al terminar de obtener los vehiculos"),this.invalidate()})}},[]),Object(i.j)("div",{},this.Vehicles)])}}}}]);
//# sourceMappingURL=7.63f5610a7265b980f312.bundle.js.map