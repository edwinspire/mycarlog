{"version":3,"sources":["webpack://pen_onitoring_ystem/./src/widgets/VehicleSummary/VehicleSummary.ts","webpack://pen_onitoring_ystem/./src/widgets/Home.ts"],"names":["VehicleSummary_VehicleSummary","WidgetBase","[object Object]","this","Params","idvehicle","idaccount","localStorage","getItem","idcontact","rowkey","license_plate","year","fuel_tank_capacity","idfuel_tank_capacitytype","vin","idvehicletype","idmark","idmodel","idcolor","idfueltype","idunit_measure_fuel_tank","note","_openSnack","_MsgSnackBar","msg","console","log","invalidate","setTimeout","properties","paramsString","window","location","hash","split","searchParams","URLSearchParams","get","url","res","fetch","method","headers","Content-Type","data","json","length","SnackBar","Object","vdom","toolbar","heading","collapseWidth","Icon","label","classes","ShowLabel","onClick","e","Profile_m","text_input","type","value","readOnly","disabled","required","placeholder","onChange","d","v","key","text_area","columns","rows","onInput","snackbar","open","leading","messageRenderer","tslib_es6","watch","factory","__webpack_exports__","Menu"],"mappings":"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","file":"12.d45680400402975fa040.bundle.js","sourcesContent":["import { v, w } from \"@dojo/framework/core/vdom\";\nimport WidgetBase from \"@dojo/framework/core/WidgetBase\";\nimport * as cssProfile from \"../styles/Profile.m.css\";\nimport TextInput from \"@dojo/widgets/text-input\";\nimport Textarea from \"@dojo/widgets/text-area\";\nimport SBar from \"@dojo/widgets/snackbar\";\nimport watch from \"@dojo/framework/core/decorators/watch\";\nimport Icon from \"../Icon/Icon\";\nimport ToolBar from \"@dojo/widgets/toolbar\";\n\nexport interface VehicleSummaryProperties {\n  idvehicle?: string;\n}\n\nexport default class VehicleSummary extends WidgetBase<\n  VehicleSummaryProperties\n> {\n  @watch() private Params = {\n    idvehicle: \"-1\",\n    idaccount: localStorage.getItem(\"idaccount\"),\n    idcontact: \"0\",\n    rowkey: 0,\n    license_plate: \"\",\n    year: \"\",\n    fuel_tank_capacity: \"\",\n    idfuel_tank_capacitytype: \"0\",\n    vin: \"\",\n    idvehicletype: \"0\",\n    idmark: \"0\",\n    idmodel: \"0\",\n    idcolor: \"0\",\n    idfueltype: \"0\",\n    idunit_measure_fuel_tank: \"0\",\n    note: \"\",\n  };\n\n  @watch() private _openSnack = false;\n  private _MsgSnackBar = \"-\";\n\n  private SnackBar(msg: string) {\n    console.log(\"SnackBar \" + msg);\n    this._openSnack = true;\n    this._MsgSnackBar = msg;\n    this.invalidate();\n    setTimeout(() => {\n      this._openSnack = false;\n      this.invalidate();\n    }, 4000);\n  }\n\n  async onAttach() {\n    console.log(this.properties.idvehicle);\n\n    if (this.properties.idvehicle) {\n      var paramsString = window.location.hash.split(\"?\")[1];\n      var searchParams = new URLSearchParams(paramsString);\n      this.Params.idvehicle = searchParams.get(\"idvehicle\") || \"-2\";\n      var url =\n        \"/vehicle?idvehicle=\" +\n        this.Params.idvehicle +\n        \"&idaccount=\" +\n        localStorage.getItem(\"idaccount\");\n\n      const res = await fetch(url, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      });\n      let data = await res.json();\n      console.log(data);\n      if (data.length > 0) {\n        this.Params = data[0];\n        this.invalidate();\n      } else {\n        this.SnackBar(\"No se ha encontrado datos\");\n      }\n      //console.log(data);\n    }\n  }\n\n  protected render() {\n    return v(\"div\", {}, [\n      w(ToolBar, { heading: \"VEHÍCULO\", collapseWidth: 150 }, [\n        w(Icon, {\n          label: \"NUEVO\",\n          classes: [\"fas\", \"fa-car\"],\n          ShowLabel: true,\n          onClick: (e) => {\n            this.Params = {\n              idaccount: localStorage.getItem(\"idaccount\"),\n              idvehicle: \"-1\",\n              idcontact: \"0\",\n              rowkey: 0,\n              license_plate: \"\",\n              year: \"\",\n              fuel_tank_capacity: \"\",\n              idfuel_tank_capacitytype: \"0\",\n              vin: \"\",\n              idvehicletype: \"0\",\n              idmark: \"0\",\n              idmodel: \"0\",\n              idcolor: \"0\",\n              idfueltype: \"0\",\n              idunit_measure_fuel_tank: \"0\",\n              note: \"\",\n            };\n          },\n        }),\n        v(\"span\", {}, [\"|\"]),\n      ]),\n      v(\"div\", { classes: [cssProfile.container] }, [\n        v(\"div\", { classes: [cssProfile.container_field_reset] }, [\n          w(\n            TextInput,\n            {\n              type: \"text\",\n              label: \"Propietario\",\n              value: this.Params.idcontact,\n              readOnly: false,\n            },\n            []\n          ),\n        ]),\n        v(\"div\", { classes: [cssProfile.row] }, [\n          v(\"div\", { classes: [cssProfile.column2] }, [\n            w(\n              TextInput,\n              {\n                type: \"text\",\n                label: \"Placa\",\n                disabled: false,\n                readOnly: false,\n                required: true,\n                placeholder: \"Placa\",\n                value: this.Params.license_plate,\n                onChange: (d) => {\n                  this.Params.license_plate = d as string;\n                  this.invalidate();\n                },\n              },\n              []\n            ),\n          ]),\n          v(\"div\", { classes: [cssProfile.column2] }, [\n            w(\n              TextInput,\n              {\n                label: \"Marca\",\n                value: this.Params.idmark,\n                readOnly: false,\n              },\n              []\n            ),\n          ]),\n        ]),\n        v(\"div\", { classes: cssProfile.row }, [\n          v(\"div\", { classes: [cssProfile.column2] }, [\n            w(\n              TextInput,\n              {\n                type: \"number\",\n                label: \"Año\",\n                disabled: false,\n                readOnly: false,\n                value: this.Params.year as any,\n                onChange: (v) => {\n                  this.Params.year = v as string;\n                  this.invalidate();\n                },\n              },\n              []\n            ),\n          ]),\n          v(\"div\", { classes: [cssProfile.column2] }, [\n            w(\n              TextInput,\n              {\n                type: \"text\",\n                label: \"VIN\",\n                disabled: false,\n                readOnly: false,\n                value: this.Params.vin as any,\n                onChange: (v) => {\n                  this.Params.vin = v as string;\n                  this.invalidate();\n                },\n              },\n              []\n            ),\n          ]),\n        ]),\n        v(\"div\", { classes: cssProfile.row }, [\n          v(\"div\", { classes: [cssProfile.column2] }, [\n            w(\n              TextInput,\n              {\n                label: \"Color\",\n                readOnly: true,\n                value: this.Params.idcolor,\n              },\n              []\n            ),\n          ]),\n          v(\"div\", { classes: [cssProfile.column2] }, [\n            w(\n              TextInput,\n              {\n                label: \"Tipo de combustible\",\n                value: this.Params.idfueltype,\n                readOnly: true,\n              },\n              []\n            ),\n          ]),\n        ]),\n        v(\"div\", { classes: cssProfile.row }, [\n          v(\"div\", { classes: [cssProfile.column2] }, [\n            w(\n              TextInput,\n              {\n                key: \"t6\",\n                type: \"number\",\n                label: \"Capacidad del tanque\",\n                disabled: false,\n                readOnly: false,\n                value: this.Params.fuel_tank_capacity as any,\n                onChange: (v) => {\n                  this.Params.fuel_tank_capacity = v as string;\n                  this.invalidate();\n                },\n              },\n              []\n            ),\n          ]),\n          v(\"div\", { classes: [cssProfile.column2] }, [\n            w(\n              TextInput,\n              {\n                label: \"Unidad de medida del tanque\",\n                readOnly: true,\n                value: this.Params.idunit_measure_fuel_tank,\n              },\n              []\n            ),\n          ]),\n        ]),\n        v(\"div\", { classes: [cssProfile.container_field_reset] }, [\n          w(Textarea, {\n            columns: 40,\n            rows: 5,\n            readOnly: true,\n            placeholder: \"Notas\",\n            label: \"Notas\",\n            key: \"text-area\",\n            value: this.Params.note,\n            onInput: (value: string) => {\n              this.Params.note = value;\n              this.invalidate();\n            },\n          }),\n        ]),\n        w(SBar, {\n          open: this._openSnack,\n          leading: false,\n          type: \"error\",\n          messageRenderer: () => this._MsgSnackBar,\n        }),\n      ]),\n    ]);\n  }\n}\n","import { create, w, v } from '@dojo/framework/core/vdom';\nimport Summary from './VehicleSummary/VehicleSummary';\nimport Menu from './Menu';\n\nconst factory = create();\n\nexport default factory(function Profile() {\n\treturn  v('div', {}, [\n\t\tw(Menu, {}),\n\t\tw(Summary, {}, [])\n\t\t]) ;\n});\n"],"sourceRoot":""}