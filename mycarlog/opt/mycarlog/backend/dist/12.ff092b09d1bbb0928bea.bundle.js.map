{"version":3,"sources":["webpack://pen_onitoring_ystem/./src/widgets/select_vehicle/select_vehicle.ts"],"names":["__webpack_require__","r","__webpack_exports__","d","SelectVehicle","_dojo_framework_core_vdom__WEBPACK_IMPORTED_MODULE_0__","_dojo_framework_core_WidgetBase__WEBPACK_IMPORTED_MODULE_1__","_dojo_widgets_text_input__WEBPACK_IMPORTED_MODULE_2__","_Menu__WEBPACK_IMPORTED_MODULE_3__","[object Object]","this","Vehicles","TextSearch","push","Object","setInterval","console","log","length","invalidate","res","fetch","method","body","JSON","stringify","idaccount","localStorage","getItem","Search","headers","Content-Type","status","data","json","Array","isArray","forEach","element","index","license_plate","label","value","onChange","v","GetVehicles","then"],"mappings":";;;;;;;;yIAAAA,EAAAC,EAAAC,GAAAF,EAAAG,EAAAD,EAAA,4BAAAE,IAAA,IAAAC,EAAAL,EAAA,IAAAM,EAAAN,EAAA,IAAAO,EAAAP,EAAA,IAAAQ,EAAAR,EAAA,IAMe,MAAMI,UAAsBE,EAAA,EAA3CG,kCACUC,KAAAC,SAAW,GAEXD,KAAAE,WAAqB,GAE7BH,WACEC,KAAKC,SAASE,KAAKC,OAAAT,EAAA,EAAAS,CAAE,MAAO,GAAI,CAAC,qBAEjCC,YAAY,KACdL,KAAKC,SAASE,KAAKC,OAAAT,EAAA,EAAAS,CAAE,MAAO,GAAI,CAAC,cAC7BE,QAAQC,IAAIP,KAAKC,SAASO,QAC1BR,KAAKS,cACJ,KACHT,KAAKS,aAGPV,oBAEE,MAAMW,QAAYC,MAAM,YAAa,CACnCC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBC,UAAWC,aAAaC,QAAQ,aAChCC,OAAQnB,KAAKE,aAEfkB,QAAS,CACPC,eAAgB,sBAIpB,GAAkB,KAAdX,EAAIY,OAAe,CAEzBtB,KAAKC,SAAW,GACZ,IAAIsB,QAAab,EAAIc,OAErBlB,QAAQC,IAAIgB,GACRE,MAAMC,QAAQH,IAChBA,EAAKI,QAAQ,CAACC,EAAcC,KAC1BvB,QAAQC,IAAIqB,EAAQE,eAC1B9B,KAAKC,SAASE,KAAKC,OAAAT,EAAA,EAAAS,CAAE,MAAO,GAAI,CAACwB,EAAQE,iBACzC9B,KAAKC,SAASE,KAAKC,OAAAT,EAAA,EAAAS,CAAE,MAAO,GAAI,CAAC,OAASyB,KACpC7B,KAAKS,eAITT,KAAKS,cAICV,SACR,OAAOK,OAAAT,EAAA,EAAAS,CAAE,MAAO,GAAI,CAClBA,OAAAT,EAAA,EAAAS,CAAEN,EAAA,EAAM,IACRM,OAAAT,EAAA,EAAAS,CACEP,EAAA,EACA,CACEkC,MAAO,UACPC,MAAOhC,KAAKE,WACZ+B,SAAWC,IACT5B,QAAQC,IAAIO,KAAKC,UAAUmB,IACpClC,KAAKE,WAAagC,EAClBlC,KAAKC,SAASE,KAAK,gBACnBH,KAAKS,aACIT,KAAKmC,cAAcC,KAAK,KAChC9B,QAAQC,IAAI,iDACZP,KAAKS,iBAID,IAEFL,OAAAT,EAAA,EAAAS,CAAE,MAAO,GAAIJ,KAAKC","file":"12.ff092b09d1bbb0928bea.bundle.js","sourcesContent":["import { v, w } from \"@dojo/framework/core/vdom\";\nimport WidgetBase from \"@dojo/framework/core/WidgetBase\";\nimport TextInput from \"@dojo/widgets/text-input\";\n//import watch from \"@dojo/framework/core/decorators/watch\";\nimport Menu from \".././Menu\";\n\nexport default class SelectVehicle extends WidgetBase {\n  private Vehicles = [] as any[];\n\n  private TextSearch: string = \"\";\n\n  onAttach() {\n    this.Vehicles.push(v(\"div\", {}, [\"Primer registro\"]));\n\n    setInterval(() => {\n\t\tthis.Vehicles.push(v(\"div\", {}, [\"pROBANDO\"]));\n      console.log(this.Vehicles.length);\n      this.invalidate();\n    }, 5000);\n    this.invalidate();\n  }\n\n  async GetVehicles() {\n\n    const res = await fetch(\"/vehicles\", {\n      method: \"POST\",\n      body: JSON.stringify({\n        idaccount: localStorage.getItem(\"idaccount\"),\n        Search: this.TextSearch\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n\n    if (res.status == 200) {\n\n\t\tthis.Vehicles = [];\n      let data = await res.json();\n      //\t\tthis._fetcher = createFetcher(data);\n      console.log(data);\n      if (Array.isArray(data)) {\n        data.forEach((element: any, index) => {\n          console.log(element.license_plate);\n\t\t  this.Vehicles.push(v(\"div\", {}, [element.license_plate as string]));\n\t\t  this.Vehicles.push(v(\"div\", {}, ['Hola' + index]));\n          this.invalidate();\n        });\n      }\n\n      this.invalidate();\n    }\n  }\n\n  protected render() {\n    return v(\"div\", {}, [\n      w(Menu, {}),\n      w(\n        TextInput,\n        {\n          label: \"BuscarZ\",\n          value: this.TextSearch,\n          onChange: (v) => {\n            console.log(JSON.stringify(v));\n\t\t\tthis.TextSearch = v as string;\n\t\t\tthis.Vehicles.push('Pude cambiar');\n\t\t\tthis.invalidate();\n            this.GetVehicles().then(()=>{\n\t\t\t\tconsole.log('invalida al terminar de obtener los vehiculos');\n\t\t\t\tthis.invalidate();\n\t\t\t});\n          },\n        },\n        []\n      ),\n      v(\"div\", {}, this.Vehicles),\n    ]);\n  }\n}\n"],"sourceRoot":""}