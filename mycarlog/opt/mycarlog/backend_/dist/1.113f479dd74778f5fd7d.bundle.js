/*!
 * 
 * [Dojo](https://dojo.io/)
 * Copyright [JS Foundation](https://js.foundation/) & contributors
 * [New BSD license](https://github.com/dojo/meta/blob/master/LICENSE)
 * All rights reserved
 * 
 */
(window.dojoWebpackJsonputomotive_og=window.dojoWebpackJsonputomotive_og||[]).push([[1],{22:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var o=a(0);a(1);function i(e,t=!1,a=!1){return a?o.default[e].bind(o.default):o.default[e]}},247:function(e,t,a){e.exports={" _key":"AutomotiveLog/Vehicle",entrada:"Vehicle-m__entrada__fef75536oBI",boton:"Vehicle-m__boton__fef755nmqJN",favorite_checkbox:"Vehicle-m__favorite_checkbox__fef7552k_zs"}},261:function(e,t,a){"use strict";a.r(t);var o=a(18),i=a(36),s=a(19),c=a(247),n=a(28),l=a(48),r=a(72),d=a(71),h=a(84),u=a(44),p=a(35),_=a(33),b=a(23),m=a(26);class v extends s.b{constructor(){super(),this._openSnack=!1,this._MsgSnackBar="",this.SnackBarType="error",Object(m.b)("preference",b.a,this.diffFooReaction)(this)}getLocalUser(){var e={};try{let t=localStorage.getItem("user");if(t){let a=JSON.parse(t);a&&(e=a)}}catch(e){console.error(e)}return console.log(e),e}diffFooReaction(e,t){console.log(t);try{let e=this.getLocalUser();switch(t.preference.name){case"default_idvehicle":e.default_idvehicle=t.preference.value;break;default:if(e&&e.preferences){let a=e.preferences;a[t.preference.name]!=t.preference.value?(a[t.preference.name]=t.preference.value,e.preferences=a,localStorage.setItem("user",JSON.stringify(e)),this.Save()):console.log("No ha cambiado la preferencia")}else this.openSnack("La preferencia "+t.preference.name+" no existe","error")}}catch(e){console.log(e),this.openSnack(e,"error")}}async Save(){var e=this.getLocalUser();if(e.preferences){let t=await fetch("/preferences_u",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),a=await t.json();console.log(a),a.iduser&&a.rowkey&&(e.rowkey=a.rowkey,localStorage.setItem("user",JSON.stringify(e)))}}openSnack(e,t){this._openSnack=!0,this._MsgSnackBar=e,this.SnackBarType=t,setTimeout(()=>{this._openSnack=!1},4e3)}render(){return Object(o.k)(u.a,{open:this._openSnack,leading:!1,type:this.SnackBarType,messageRenderer:()=>this._MsgSnackBar})}}Object(i.a)([Object(p.a)()],v.prototype,"_openSnack",void 0),Object(i.a)([Object(p.a)()],v.prototype,"_MsgSnackBar",void 0);var k=a(37),g=a(63);class f extends s.b{constructor(){super(...arguments),this.favorite={preference:{name:"",value:""}},this.checkbox_favorite=!1,this.Params={idvehicle:"-1",idaccount:localStorage.getItem("idaccount"),idcontact:"0",rowkey:0,license_plate:"",year:"",fuel_tank_capacity:"",idfuel_tank_capacitytype:"0",vin:"",idvehicletype:"0",idmark:"0",idmodel:"0",idcolor:"0",idfueltype:"0",idunit_measure_fuel_tank:"0",note:""},this._openSnack=!1,this._MsgSnackBar="-"}SnackBar(e){console.log("SnackBar "+e),this._openSnack=!0,this._MsgSnackBar=e,this.invalidate(),setTimeout(()=>{this._openSnack=!1,this.invalidate()},4e3)}async Save(){if(this.Params.license_plate.length>0){let e=await fetch("/vehicle_cu",{method:"POST",body:JSON.stringify(this.Params),headers:{"Content-Type":"application/json"}}),t=await e.json();200==e.status?(console.log(t),t.idvehicle>0?window.location.href="/#vehicles?idvehicle="+t.idvehicle+"&idaccount="+localStorage.getItem("idaccount"):this.SnackBar("No se pudo guardar")):401==e.status?window.location.href="/#login":this.SnackBar("No se pudo guardar "+e.status)}else this.SnackBar("Complete los campos que son requeridos");this.invalidate()}async onAttach(){console.log(this.properties.idvehicle);var e=new g.a;const t=e.get(e.path("grid","meta","page"));if(console.log("Main Nuevo Global1X: "+t),this.properties.idvehicle){var a=window.location.hash.split("?")[1],o=new URLSearchParams(a);this.Params.idvehicle=o.get("idvehicle")||"-2";var i="/vehicle?idvehicle="+this.Params.idvehicle+"&idaccount="+localStorage.getItem("idaccount");const e=await fetch(i,{method:"GET",headers:{"Content-Type":"application/json"}});let t=await e.json();console.log(t),t.length>0&&(this.Params=t[0],this.invalidate())}}render(){return Object(o.j)("div",{},[Object(o.k)(k.a,{heading:"VEHÍCULO",collapseWidth:150},[Object(o.k)(_.a,{label:"NUEVO",classes:["fas","fa-car"],ShowLabel:!0,onClick:e=>{this.Params={idaccount:localStorage.getItem("idaccount"),idvehicle:"-1",idcontact:"0",rowkey:0,license_plate:"",year:"",fuel_tank_capacity:"",idfuel_tank_capacitytype:"0",vin:"",idvehicletype:"0",idmark:"0",idmodel:"0",idcolor:"0",idfueltype:"0",idunit_measure_fuel_tank:"0",note:""}}}),Object(o.j)("span",{},["|"]),Object(o.k)(_.a,{label:"GUARDAR",classes:["fas","fa-save"],ShowLabel:!0,onClick:e=>{this.Save()}})]),Object(o.j)("div",{classes:[n.container]},[Object(o.j)("div",{classes:c.favorite_checkbox},[Object(o.k)(r.b,{checked:this.checkbox_favorite,aria:{describedBy:"Predeterminado"},label:"Predeterminado",mode:r.a.toggle,name:"Predeterminado",onChange:(e,t)=>{Number(this.Params.idvehicle)>0?(this.checkbox_favorite=t,this.favorite.preference=t?{name:"default_idvehicle",value:this.Params.idvehicle}:{name:"default_idvehicle",value:0},this.invalidate()):this.SnackBar("Debe primero guardar el vehículo")}})]),Object(o.j)("div",{classes:[n.container_field_reset]},[Object(o.k)(h.a,{label:"Propietario",value:this.Params.idcontact,url:"/toselect/contacts",onSelect:(e,t,a)=>{console.log("onSelect",e,t,a),this.Params.idcontact=t}},[])]),Object(o.j)("div",{classes:[n.row]},[Object(o.j)("div",{classes:[n.column2]},[Object(o.k)(l.a,{type:"text",label:"Placa",disabled:!1,readOnly:!1,required:!0,placeholder:"Placa",value:this.Params.license_plate,onChange:e=>{this.Params.license_plate=e,this.invalidate()}},[])]),Object(o.j)("div",{classes:[n.column2]},[Object(o.k)(h.a,{label:"Marca",value:this.Params.idmark,url:"/toselect/marks",onSelect:(e,t,a)=>{console.log("onSelect",e,t,a),this.Params.idmark=t}},[])])]),Object(o.j)("div",{classes:n.row},[Object(o.j)("div",{classes:[n.column2]},[Object(o.k)(l.a,{type:"number",label:"Año",disabled:!1,readOnly:!1,value:this.Params.year,onChange:e=>{this.Params.year=e,this.invalidate()}},[])]),Object(o.j)("div",{classes:[n.column2]},[Object(o.k)(l.a,{type:"text",label:"VIN",disabled:!1,readOnly:!1,value:this.Params.vin,onChange:e=>{this.Params.vin=e,this.invalidate()}},[])])]),Object(o.j)("div",{classes:n.row},[Object(o.j)("div",{classes:[n.column2]},[Object(o.k)(h.a,{label:"Color",url:"/toselect/colors",value:this.Params.idcolor,onSelect:(e,t,a)=>{console.log("onSelect",e,t,a),this.Params.idcolor=t}},[])]),Object(o.j)("div",{classes:[n.column2]},[Object(o.k)(h.a,{label:"Tipo de combustible",url:"/toselect/fueltypes",value:this.Params.idfueltype,onSelect:(e,t,a)=>{console.log("onSelect",e,t,a),this.Params.idfueltype=t}},[])])]),Object(o.j)("div",{classes:n.row},[Object(o.j)("div",{classes:[n.column2]},[Object(o.k)(l.a,{key:"t6",type:"number",label:"Capacidad del tanque",disabled:!1,readOnly:!1,value:this.Params.fuel_tank_capacity,onChange:e=>{this.Params.fuel_tank_capacity=e,this.invalidate()}},[])]),Object(o.j)("div",{classes:[n.column2]},[Object(o.k)(h.a,{label:"Unidad de medida del tanque",url:"/toselect/unit_measure_fuel_tanks",value:this.Params.idunit_measure_fuel_tank,onSelect:(e,t,a)=>{console.log("onSelect",e,t,a),this.Params.idunit_measure_fuel_tank=t}},[])])]),Object(o.j)("div",{classes:[n.container_field_reset]},[Object(o.k)(d.a,{columns:40,rows:5,placeholder:"Notas",label:"Notas",key:"text-area",value:this.Params.note,onInput:e=>{this.Params.note=e,this.invalidate()}})]),Object(o.k)(u.a,{open:this._openSnack,leading:!1,type:"error",messageRenderer:()=>this._MsgSnackBar}),Object(o.k)(v,this.favorite)])])}}Object(i.a)([Object(p.a)()],f.prototype,"Params",void 0),Object(i.a)([Object(p.a)()],f.prototype,"_openSnack",void 0);var j=a(38);const O=Object(o.a)();t.default=O(function({properties:e}){return Object(o.j)("div",{classes:[n.root]},[Object(o.k)(j.a,{}),Object(o.k)(f,{idvehicle:"0"},[])])})},72:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var o,i=a(20),s=a(19),c=a(21),n=a(29),l=a(43),r=a(49),d=a(27),h=a(18),u=a(24),p=a(73);!function(e){e.normal="normal",e.toggle="toggle"}(o||(o={}));let _=class extends(Object(c.c)(Object(n.a)(s.a))){constructor(){super(...arguments),this._uuid=Object(u.c)()}_onBlur(e){const t=e.target;this.properties.onBlur&&this.properties.onBlur(t.value,t.checked)}_onChange(e){e.stopPropagation();const t=e.target;this.properties.onChange&&this.properties.onChange(t.value,t.checked)}_onClick(e){e.stopPropagation();const t=e.target;this.properties.onClick&&this.properties.onClick(t.value,t.checked)}_onFocus(e){const t=e.target;this.properties.onFocus&&this.properties.onFocus(t.value,t.checked)}_onMouseDown(e){e.stopPropagation(),this.properties.onMouseDown&&this.properties.onMouseDown()}_onMouseUp(e){e.stopPropagation(),this.properties.onMouseUp&&this.properties.onMouseUp()}_onTouchStart(e){e.stopPropagation(),this.properties.onTouchStart&&this.properties.onTouchStart()}_onTouchEnd(e){e.stopPropagation(),this.properties.onTouchEnd&&this.properties.onTouchEnd()}_onTouchCancel(e){e.stopPropagation(),this.properties.onTouchCancel&&this.properties.onTouchCancel()}getRootClasses(){const{checked:e=!1,disabled:t,invalid:a,mode:i,readOnly:s,required:c}=this.properties,n=this.meta(l.a).get("root");return[p.root,i===o.toggle?p.toggle:null,e?p.checked:null,t?p.disabled:null,n.containsFocus?p.focused:null,!0===a?p.invalid:null,!1===a?p.valid:null,s?p.readonly:null,c?p.required:null]}renderToggle(){const{checked:e,mode:t,onLabel:a,offLabel:i}=this.properties;return t===o.toggle?[i?Object(h.j)("div",{key:"offLabel",classes:this.theme(p.offLabel),"aria-hidden":e?"true":null},[i]):null,Object(h.j)("div",{key:"toggle",classes:this.theme(p.toggleSwitch)}),a?Object(h.j)("div",{key:"onLabel",classes:this.theme(p.onLabel),"aria-hidden":e?null:"true"},[a]):null]:[]}render(){const{aria:e={},classes:t,checked:a=!1,disabled:o,widgetId:i=this._uuid,invalid:s,label:c,labelAfter:n=!0,labelHidden:u,theme:_,name:b,readOnly:m,required:v,value:k}=this.properties,g=this.meta(l.a).get("root"),f=[Object(h.j)("div",{classes:this.theme(p.inputWrapper)},[...this.renderToggle(),Object(h.j)("input",Object.assign({id:i},Object(d.b)(e),{classes:this.theme(p.input),checked:a,disabled:o,focus:this.shouldFocus,"aria-invalid":!0===s?"true":null,name:b,readOnly:m,"aria-readonly":!0===m?"true":null,required:v,type:"checkbox",value:k,onblur:this._onBlur,onchange:this._onChange,onclick:this._onClick,onfocus:this._onFocus,onmousedown:this._onMouseDown,onmouseup:this._onMouseUp,ontouchstart:this._onTouchStart,ontouchend:this._onTouchEnd,ontouchcancel:this._onTouchCancel}))]),c?Object(h.k)(r.a,{key:"label",classes:t,theme:_,disabled:o,focused:g.containsFocus,invalid:s,readOnly:m,required:v,hidden:u,forId:i,secondary:!0},[c]):null];return Object(h.j)("div",{key:"root",classes:this.theme(this.getRootClasses())},n?f:f.reverse())}};_=i.__decorate([Object(c.f)(p)],_),t.b=_},73:function(e,t,a){a(74),e.exports={" _key":"@dojo/widgets/checkbox",root:"checkbox-m__root__306Hj",input:"checkbox-m__input__2c32X",inputWrapper:"checkbox-m__inputWrapper__18x6Q",checked:"checkbox-m__checked__3Mh6h",disabled:"checkbox-m__disabled__OQT1C",focused:"checkbox-m__focused__35iMF",readonly:"checkbox-m__readonly__jOqIs",required:"checkbox-m__required__g1cWt",invalid:"checkbox-m__invalid__FhP_j",valid:"checkbox-m__valid__19doN",toggle:"checkbox-m__toggle__3gWDr",onLabel:"checkbox-m__onLabel__1ISHp",offLabel:"checkbox-m__offLabel__1gBqt",toggleSwitch:"checkbox-m__toggleSwitch__cSjeF"}},74:function(e,t,a){}}]);
//# sourceMappingURL=1.113f479dd74778f5fd7d.bundle.js.map