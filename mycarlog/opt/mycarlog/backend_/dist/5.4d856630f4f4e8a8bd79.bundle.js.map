{"version":3,"sources":["webpack://utomotive_og/./src/widgets/login/Login.m.css","webpack://utomotive_og/./src/widgets/login/Login.ts"],"names":["module","exports"," _key","btn","active","disabled","btn_large","btn_primary","btn_block","container","container_html","root","login","input","register","anchor","Login","_dojo_framework_core_WidgetBase__WEBPACK_IMPORTED_MODULE_2__","[object Object]","this","_openSnack","_MsgSnackBar","msg","console","log","invalidate","setTimeout","document","cookie","Object","_dojo_framework_core_vdom__WEBPACK_IMPORTED_MODULE_1__","classes","_Login_m_css__WEBPACK_IMPORTED_MODULE_3__","action","method","onsubmit","e","target","inputs","getElementsByTagName","i","DataLogin","length","defineProperty","name","value","enumerable","res","fetch","body","JSON","stringify","headers","Content-Type","data","json","status","localStorage","setItem","idaccount","iduser","preferences","fullname","window","location","href","SnackBar","message","preventDefault","type","placeholder","required","_dojo_widgets_snackbar__WEBPACK_IMPORTED_MODULE_4__","open","leading","messageRenderer","tslib__WEBPACK_IMPORTED_MODULE_0__","_dojo_framework_core_decorators_watch__WEBPACK_IMPORTED_MODULE_5__"],"mappings":"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","file":"5.4d856630f4f4e8a8bd79.bundle.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"AutomotiveLog/Login\",\"btn\":\"Login-m__btn__fef755nE8Yn\",\"active\":\"Login-m__active__fef7553zbIo\",\"disabled\":\"Login-m__disabled__fef755u520u\",\"btn_large\":\"Login-m__btn_large__fef7552o3AI\",\"btn_primary\":\"Login-m__btn_primary__fef7553C7TY\",\"btn_block\":\"Login-m__btn_block__fef7551C_uT\",\"container\":\"Login-m__container__fef755aargL\",\"container_html\":\"Login-m__container_html__fef7551Xdl8\",\"root\":\"Login-m__root__fef7553B_u0\",\"login\":\"Login-m__login__fef755r6iOW\",\"input\":\"Login-m__input__fef755_mk6S\",\"register\":\"Login-m__register__fef75513VHD\",\"anchor\":\"Login-m__anchor__fef755JV_sF\"};","import { v, w } from '@dojo/framework/core/vdom';\nimport WidgetBase from '@dojo/framework/core/WidgetBase';\nimport * as css from './Login.m.css';\nimport SBar from '@dojo/widgets/snackbar';\nimport watch from '@dojo/framework/core/decorators/watch';\n\nexport default class Login extends WidgetBase  {\n\n\t@watch()\tprivate _openSnack = false;\n\t@watch()\tprivate _MsgSnackBar = '-';\n\t\n\tprivate SnackBar(msg: string){\n\t\tconsole.log('SnackBar '+msg)\n\t\tthis._openSnack = true;\n\t\tthis._MsgSnackBar = msg;\n\t\tthis.invalidate();\n\t\tsetTimeout(()=>{\n\t\t\tthis._openSnack = false;\n\t\t\tthis.invalidate();\n\t\t}, 4000)\t\t\n\t}\n\n\tonAttach(){\ndocument.cookie = \"TOKEN_USER= ; expires = Thu, 01 Jan 1970 00:00:00 GMT\";\nconsole.log('Borrar');\n\n\t}\n\n\tprotected render(){\n\n\t\treturn v('div', {classes: [css.root]}, [\n\t\t\tv('div', { classes: [css.login, css.container, css.container_html]}, [\n\t\t\t\tv('h1', {}, ['Login']),\n\t\t\t\tv('form', {action: \"/login\", method: \"post\",  onsubmit: (e: Event)=>{\t\n\t\t\t\t\tif(e.target){\n\t\t\t\t\t\tlet d = e.target as HTMLFormElement;\n\t\t\t\t\t\tlet inputs = d.getElementsByTagName(\"input\");\n\t\t\t\t\t\tlet i = 0;\n\t\t\t\t\t\tvar DataLogin = {};\n\n\t\t\t\t\t\tfor (i=0; i<inputs.length; i++){\n\t\t\t\t\t\t\tObject.defineProperty(DataLogin, inputs[i].name, {value : inputs[i].value, enumerable: true});\n\t\t\t\t\t\t\tif(i+1 == inputs.length){\n\t\t\t\t\t\t\t\t(async()=>{\n\n\t\t\t\t\t\t\t\t\tlet res = await fetch(\"/login\",{method: 'POST', body: JSON.stringify(DataLogin), headers: {'Content-Type': 'application/json'}});\n\t\t\t\t\t\t\t\t\tvar data = await res.json();\n\t\t\t\t\t\t\t\t\tconsole.log(data);\n\t\t\t\t\t\t\t\t\tif(res.status == 200){\n\n\t\t\t\t\t\t\t\t\t\tif(!data.login){\n\t\t\t\t\t\t\t\t\t\t\tthis.SnackBar(data.message)\n\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('idaccount', data.idaccount);\n\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('iduser', data.iduser);\n\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('preferences', data.preferences);\n\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('fullname', data.fullname);\n\t\t\t\t\t\t\t\t\t\t\tlocalStorage.setItem('user', JSON.stringify(data));\n\t\t\t\t\t\t\t\t\t\t\twindow.location.href = \"/#home\";\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tthis.SnackBar('Sucedió un inconveniente con el servidor')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}}, [\n\t\t\t\t//v('input', {classes: [css.input], name: 'account',  type: 'text', placeholder: 'Cuenta'}, []),\n\t\t\t\tv('input', {classes: [css.input],  name: 'username', type: 'text', placeholder: 'Usuario', required: 'required'}, []),\n\t\t\t\tv('input', {classes: [css.input], name: 'pwd', type: 'password', placeholder: 'Contraseña', required: 'required'}, []),\n\t\t\t\tv('input', {name: 'carlog', classes: [css.btn, css.btn_primary, css.btn_block, css.btn_large], type: 'submit', value: 'Aceptar'})\n\t\t\t\t]),\n\t\t\t\tv('div', {classes: css.register}, [\n\t\t\t\t\tv('a', {classes: [css.anchor],  href: \"/#register\"}, ['Registro'])])\n\t\t\t\t]),\n\t\t\tw(SBar, {open: this._openSnack, leading: false, type: 'error', messageRenderer: () => this._MsgSnackBar})\n\t\t\t])\n\t}\n\n\n}"],"sourceRoot":""}